parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"VtE8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){function s(){this._disposables=[],this._isDisposed=!1}return s.prototype.dispose=function(){this._isDisposed=!0,this._disposables.forEach(function(s){return s.dispose()}),this._disposables.length=0},s.prototype.register=function(s){this._disposables.push(s)},s.prototype.unregister=function(s){var e=this._disposables.indexOf(s);-1!==e&&this._disposables.splice(e,1)},s}();exports.Disposable=s;
},{}],"lW8c":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./Lifecycle"),n=function(e){function n(){var t=e.call(this)||this;return t._events=t._events||{},t}return t(n,e),n.prototype.on=function(t,e){this._events[t]=this._events[t]||[],this._events[t].push(e)},n.prototype.addDisposableListener=function(t,e){var n=this;this.on(t,e);var o=!1;return{dispose:function(){o||(n.off(t,e),o=!0)}}},n.prototype.off=function(t,e){if(this._events[t])for(var n=this._events[t],o=n.length;o--;)if(n[o]===e)return void n.splice(o,1)},n.prototype.removeAllListeners=function(t){this._events[t]&&delete this._events[t]},n.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(this._events[t])for(var o=this._events[t],r=0;r<o.length;r++)o[r].apply(this,e)},n.prototype.listeners=function(t){return this._events[t]||[]},n.prototype.dispose=function(){e.prototype.dispose.call(this),this._events={}},n}(e.Disposable);exports.EventEmitter=n;
},{"./Lifecycle":"VtE8"}],"JJu0":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./EventEmitter"),i=function(e){function i(t){var i=e.call(this)||this;return i._maxLength=t,i._array=new Array(i._maxLength),i._startIndex=0,i._length=0,i}return t(i,e),Object.defineProperty(i.prototype,"maxLength",{get:function(){return this._maxLength},set:function(t){if(this._maxLength!==t){for(var e=new Array(t),i=0;i<Math.min(t,this.length);i++)e[i]=this._array[this._getCyclicIndex(i)];this._array=e,this._maxLength=t,this._startIndex=0}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"length",{get:function(){return this._length},set:function(t){if(t>this._length)for(var e=this._length;e<t;e++)this._array[e]=void 0;this._length=t},enumerable:!0,configurable:!0}),i.prototype.get=function(t){return this._array[this._getCyclicIndex(t)]},i.prototype.set=function(t,e){this._array[this._getCyclicIndex(t)]=e},i.prototype.push=function(t){this._array[this._getCyclicIndex(this._length)]=t,this._length===this._maxLength?(this._startIndex++,this._startIndex===this._maxLength&&(this._startIndex=0),this.emit("trim",1)):this._length++},i.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},i.prototype.splice=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];if(e){for(var r=t;r<this._length-e;r++)this._array[this._getCyclicIndex(r)]=this._array[this._getCyclicIndex(r+e)];this._length-=e}if(i&&i.length){for(r=this._length-1;r>=t;r--)this._array[this._getCyclicIndex(r+i.length)]=this._array[this._getCyclicIndex(r)];for(r=0;r<i.length;r++)this._array[this._getCyclicIndex(t+r)]=i[r];if(this._length+i.length>this.maxLength){var h=this._length+i.length-this.maxLength;this._startIndex+=h,this._length=this.maxLength,this.emit("trim",h)}else this._length+=i.length}},i.prototype.trimStart=function(t){t>this._length&&(t=this._length),this._startIndex+=t,this._length-=t,this.emit("trim",t)},i.prototype.shiftElements=function(t,e,i){if(!(e<=0)){if(t<0||t>=this._length)throw new Error("start argument out of range");if(t+i<0)throw new Error("Cannot shift elements in list beyond index 0");if(i>0){for(var n=e-1;n>=0;n--)this.set(t+n+i,this.get(t+n));var r=t+e+i-this._length;if(r>0)for(this._length+=r;this._length>this.maxLength;)this._length--,this._startIndex++,this.emit("trim",1)}else for(n=0;n<e;n++)this.set(t+n+i,this.get(t+n))}},i.prototype._getCyclicIndex=function(t){return(this._startIndex+t)%this.maxLength},i}(e.EventEmitter);exports.CircularList=i;
},{"./EventEmitter":"lW8c"}],"dDZ9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./Buffer"),e=function(){function e(e,i,n){if(this.isWrapped=!1,this._data=[],this.length=this._data.length,e){i||(i=[0,t.NULL_CELL_CHAR,t.NULL_CELL_WIDTH,t.NULL_CELL_CODE]);for(var s=0;s<e;s++)this.push(i)}n&&(this.isWrapped=!0)}return e.blankLine=function(i,n,s){return new e(i,[n,t.NULL_CELL_CHAR,t.NULL_CELL_WIDTH,t.NULL_CELL_CODE],s)},e.prototype.get=function(t){return this._data[t]},e.prototype.set=function(t,e){this._data[t]=e},e.prototype.pop=function(){var t=this._data.pop();return this.length=this._data.length,t},e.prototype.push=function(t){this._data.push(t),this.length=this._data.length},e.prototype.splice=function(t,e){for(var i,n=[],s=2;s<arguments.length;s++)n[s-2]=arguments[s];var r=(i=this._data).splice.apply(i,[t,e].concat(n));return this.length=this._data.length,r},e.prototype.insertCells=function(t,e,i){for(;e--;)this.splice(t,0,i),this.pop()},e.prototype.deleteCells=function(t,e,i){for(;e--;)this.splice(t,1),this.push(i)},e.prototype.replaceCells=function(t,e,i){for(;t<e&&t<this.length;)this.set(t++,i)},e}();exports.BufferLine=e;
},{"./Buffer":"nJkY"}],"nJkY":[function(require,module,exports) {

"use strict";var t=this&&this.__extends||function(){var t=function(e,s){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s])})(e,s)};return function(e,s){function i(){this.constructor=e}t(e,s),e.prototype=null===s?Object.create(s):(i.prototype=s.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./common/CircularList"),s=require("./common/EventEmitter"),i=require("./BufferLine");exports.DEFAULT_ATTR=131840,exports.CHAR_DATA_ATTR_INDEX=0,exports.CHAR_DATA_CHAR_INDEX=1,exports.CHAR_DATA_WIDTH_INDEX=2,exports.CHAR_DATA_CODE_INDEX=3,exports.MAX_BUFFER_SIZE=4294967295,exports.NULL_CELL_CHAR=" ",exports.NULL_CELL_WIDTH=1,exports.NULL_CELL_CODE=32;var r=function(){function t(t,e){this._terminal=t,this._hasScrollback=e,this.markers=[],this.clear()}return Object.defineProperty(t.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._terminal.rows},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCursorInViewport",{get:function(){var t=this.ybase+this.y-this.ydisp;return t>=0&&t<this._terminal.rows},enumerable:!0,configurable:!0}),t.prototype._getCorrectBufferLength=function(t){if(!this._hasScrollback)return t;var e=t+this._terminal.options.scrollback;return e>exports.MAX_BUFFER_SIZE?exports.MAX_BUFFER_SIZE:e},t.prototype.fillViewportRows=function(){if(0===this.lines.length)for(var t=this._terminal.rows;t--;)this.lines.push(i.BufferLine.blankLine(this._terminal.cols,exports.DEFAULT_ATTR))},t.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new e.CircularList(this._getCorrectBufferLength(this._terminal.rows)),this.scrollTop=0,this.scrollBottom=this._terminal.rows-1,this.setupTabStops()},t.prototype.resize=function(t,e){var s=this._getCorrectBufferLength(e);if(s>this.lines.maxLength&&(this.lines.maxLength=s),this.lines.length>0){if(this._terminal.cols<t)for(var r=[exports.DEFAULT_ATTR,exports.NULL_CELL_CHAR,exports.NULL_CELL_WIDTH,exports.NULL_CELL_CODE],n=0;n<this.lines.length;n++)for(;this.lines.get(n).length<t;)this.lines.get(n).push(r);var o=0;if(this._terminal.rows<e)for(var h=this._terminal.rows;h<e;h++)this.lines.length<e+this.ybase&&(this.ybase>0&&this.lines.length<=this.ybase+this.y+o+1?(this.ybase--,o++,this.ydisp>0&&this.ydisp--):this.lines.push(i.BufferLine.blankLine(t,exports.DEFAULT_ATTR)));else for(h=this._terminal.rows;h>e;h--)this.lines.length>e+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(s<this.lines.maxLength){var a=this.lines.length-s;a>0&&(this.lines.trimStart(a),this.ybase=Math.max(this.ybase-a,0),this.ydisp=Math.max(this.ydisp-a,0)),this.lines.maxLength=s}this.x=Math.min(this.x,t-1),this.y=Math.min(this.y,e-1),o&&(this.y+=o),this.savedY=Math.min(this.savedY,e-1),this.savedX=Math.min(this.savedX,t-1),this.scrollTop=0}this.scrollBottom=e-1},t.prototype.stringIndexToBufferIndex=function(t,e){for(;e;){for(var s=this.lines.get(t),i=0;i<s.length;++i)if((e-=s.get(i)[exports.CHAR_DATA_CHAR_INDEX].length)<0)return[t,i];t++}return[t,0]},t.prototype.translateBufferLineToString=function(t,e,s,i){void 0===s&&(s=0),void 0===i&&(i=null);var r="",n=this.lines.get(t);if(!n)return"";var o=s;null===i&&(i=n.length);for(var h=i,a=0;a<n.length;a++){var l=n.get(a);r+=l[exports.CHAR_DATA_CHAR_INDEX],0===l[exports.CHAR_DATA_WIDTH_INDEX]?(s>=a&&o--,i>a&&h--):l[exports.CHAR_DATA_CHAR_INDEX].length>1&&(s>a&&(o+=l[exports.CHAR_DATA_CHAR_INDEX].length-1),i>a&&(h+=l[exports.CHAR_DATA_CHAR_INDEX].length-1))}if(e){var p=r.search(/\s+$/);if(-1!==p&&(h=Math.min(h,p)),h<=o)return""}return r.substring(o,h)},t.prototype.getWrappedRangeForLine=function(t){for(var e=t,s=t;e>0&&this.lines.get(e).isWrapped;)e--;for(;s+1<this.lines.length&&this.lines.get(s+1).isWrapped;)s++;return{first:e,last:s}},t.prototype.setupTabStops=function(t){for(null!=t?this.tabs[t]||(t=this.prevStop(t)):(this.tabs={},t=0);t<this._terminal.cols;t+=this._terminal.options.tabStopWidth)this.tabs[t]=!0},t.prototype.prevStop=function(t){for(null==t&&(t=this.x);!this.tabs[--t]&&t>0;);return t>=this._terminal.cols?this._terminal.cols-1:t<0?0:t},t.prototype.nextStop=function(t){for(null==t&&(t=this.x);!this.tabs[++t]&&t<this._terminal.cols;);return t>=this._terminal.cols?this._terminal.cols-1:t<0?0:t},t.prototype.addMarker=function(t){var e=this,s=new n(t);return this.markers.push(s),s.register(this.lines.addDisposableListener("trim",function(t){s.line-=t,s.line<0&&s.dispose()})),s.register(s.addDisposableListener("dispose",function(){return e._removeMarker(s)})),s},t.prototype._removeMarker=function(t){this.markers.splice(this.markers.indexOf(t),1)},t.prototype.iterator=function(t,e,s,i,r){return new o(this,t,e,s,i,r)},t}();exports.Buffer=r;var n=function(e){function s(t){var i=e.call(this)||this;return i.line=t,i._id=s._nextId++,i.isDisposed=!1,i}return t(s,e),Object.defineProperty(s.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),s.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.emit("dispose"),e.prototype.dispose.call(this))},s._nextId=1,s}(s.EventEmitter);exports.Marker=n;var o=function(){function t(t,e,s,i,r,n){void 0===s&&(s=0),void 0===i&&(i=t.lines.length),void 0===r&&(r=0),void 0===n&&(n=0),this._buffer=t,this._trimRight=e,this._startIndex=s,this._endIndex=i,this._startOverscan=r,this._endOverscan=n,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return t.prototype.hasNext=function(){return this._current<this._endIndex},t.prototype.next=function(){var t=this._buffer.getWrappedRangeForLine(this._current);t.first<this._startIndex-this._startOverscan&&(t.first=this._startIndex-this._startOverscan),t.last>this._endIndex+this._endOverscan&&(t.last=this._endIndex+this._endOverscan),t.first=Math.max(t.first,0),t.last=Math.min(t.last,this._buffer.lines.length);for(var e="",s=t.first;s<=t.last;++s)e+=this._buffer.translateBufferLineToString(s,!!this._trimRight&&s===t.last);return this._current=t.last+1,{range:t,content:e}},t}();exports.BufferStringIterator=o;
},{"./common/CircularList":"JJu0","./common/EventEmitter":"lW8c","./BufferLine":"dDZ9"}],"cxFs":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./Buffer"),r=require("./common/EventEmitter"),i=function(r){function i(t){var i=r.call(this)||this;return i._terminal=t,i._normal=new e.Buffer(i._terminal,!0),i._normal.fillViewportRows(),i._alt=new e.Buffer(i._terminal,!1),i._activeBuffer=i._normal,i.setupTabStops(),i}return t(i,r),Object.defineProperty(i.prototype,"alt",{get:function(){return this._alt},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"normal",{get:function(){return this._normal},enumerable:!0,configurable:!0}),i.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._alt.clear(),this._activeBuffer=this._normal,this.emit("activate",{activeBuffer:this._normal,inactiveBuffer:this._alt}))},i.prototype.activateAltBuffer=function(){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(),this._activeBuffer=this._alt,this.emit("activate",{activeBuffer:this._alt,inactiveBuffer:this._normal}))},i.prototype.resize=function(t,e){this._normal.resize(t,e),this._alt.resize(t,e)},i.prototype.setupTabStops=function(t){this._normal.setupTabStops(t),this._alt.setupTabStops(t)},i}(r.EventEmitter);exports.BufferSet=i;
},{"./Buffer":"nJkY","./common/EventEmitter":"lW8c"}],"ZmpO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,i,e){this._textarea=t,this._compositionView=i,this._terminal=e,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:null,end:null}}return t.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._compositionView.classList.add("active")},t.prototype.compositionupdate=function(t){var i=this;this._compositionView.textContent=t.data,this.updateCompositionElements(),setTimeout(function(){i._compositionPosition.end=i._textarea.value.length},0)},t.prototype.compositionend=function(){this._finalizeComposition(!0)},t.prototype.keydown=function(t){if(this._isComposing||this._isSendingComposition){if(229===t.keyCode)return!1;if(16===t.keyCode||17===t.keyCode||18===t.keyCode)return!1;this._finalizeComposition(!1)}return 229!==t.keyCode||(this._handleAnyTextareaChanges(),!1)},t.prototype._finalizeComposition=function(t){var i=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,this._clearTextareaPosition(),t){var e={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){if(i._isSendingComposition){i._isSendingComposition=!1;var t=void 0;t=i._isComposing?i._textarea.value.substring(e.start,e.end):i._textarea.value.substring(e.start),i._terminal.handler(t)}},0)}else{this._isSendingComposition=!1;var o=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._terminal.handler(o)}},t.prototype._handleAnyTextareaChanges=function(){var t=this,i=this._textarea.value;setTimeout(function(){if(!t._isComposing){var e=t._textarea.value.replace(i,"");e.length>0&&t._terminal.handler(e)}},0)},t.prototype.updateCompositionElements=function(t){var i=this;if(this._isComposing){if(this._terminal.buffer.isCursorInViewport){var e=Math.ceil(this._terminal.charMeasure.height*this._terminal.options.lineHeight),o=this._terminal.buffer.y*e,s=this._terminal.buffer.x*this._terminal.charMeasure.width;this._compositionView.style.left=s+"px",this._compositionView.style.top=o+"px",this._compositionView.style.height=e+"px",this._compositionView.style.lineHeight=e+"px";var n=this._compositionView.getBoundingClientRect();this._textarea.style.left=s+"px",this._textarea.style.top=o+"px",this._textarea.style.width=n.width+"px",this._textarea.style.height=n.height+"px",this._textarea.style.lineHeight=n.height+"px"}t||setTimeout(function(){return i.updateCompositionElements(!0)},0)}},t.prototype._clearTextareaPosition=function(){this._textarea.style.left="",this._textarea.style.top=""},t}();exports.CompositionHelper=t;
},{}],"0SNy":[function(require,module,exports) {
"use strict";function e(e,t,n,s){return e.addEventListener(t,n,s),{dispose:function(){n&&(e.removeEventListener(t,n,s),e=null,n=null)}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.addDisposableDomListener=e;
},{}],"8hXU":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./common/Lifecycle"),r=require("./ui/Lifecycle"),i=15,o=function(t){function o(e,o,l,s){var n=t.call(this)||this;return n._terminal=e,n._viewportElement=o,n._scrollArea=l,n._charMeasure=s,n.scrollBarWidth=0,n._currentRowHeight=0,n._lastRecordedBufferLength=0,n._lastRecordedViewportHeight=0,n._lastRecordedBufferHeight=0,n._lastScrollTop=0,n._wheelPartialScroll=0,n._refreshAnimationFrame=null,n._ignoreNextScrollEvent=!1,n.scrollBarWidth=n._viewportElement.offsetWidth-n._scrollArea.offsetWidth||i,n.register(r.addDisposableDomListener(n._viewportElement,"scroll",n._onScroll.bind(n))),setTimeout(function(){return n.syncScrollArea()},0),n}return e(o,t),o.prototype.onThemeChanged=function(e){this._viewportElement.style.backgroundColor=e.background.css},o.prototype._refresh=function(){var e=this;null===this._refreshAnimationFrame&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return e._innerRefresh()}))},o.prototype._innerRefresh=function(){if(this._charMeasure.height>0){this._currentRowHeight=this._terminal.renderer.dimensions.scaledCellHeight/window.devicePixelRatio,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._terminal.renderer.dimensions.canvasHeight);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var t=this._terminal.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==t&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=t),this._refreshAnimationFrame=null},o.prototype.syncScrollArea=function(){if(this._lastRecordedBufferLength!==this._terminal.buffer.lines.length)return this._lastRecordedBufferLength=this._terminal.buffer.lines.length,void this._refresh();if(this._lastRecordedViewportHeight===this._terminal.renderer.dimensions.canvasHeight){var e=this._terminal.buffer.ydisp*this._currentRowHeight;this._lastScrollTop===e&&this._lastScrollTop===this._viewportElement.scrollTop&&this._terminal.renderer.dimensions.scaledCellHeight/window.devicePixelRatio===this._currentRowHeight||this._refresh()}else this._refresh()},o.prototype._onScroll=function(e){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent)if(this._ignoreNextScrollEvent)this._ignoreNextScrollEvent=!1;else{var t=Math.round(this._lastScrollTop/this._currentRowHeight)-this._terminal.buffer.ydisp;this._terminal.scrollLines(t,!0)}},o.prototype.onWheel=function(e){var t=this._getPixelsScrolled(e);0!==t&&(this._viewportElement.scrollTop+=t,e.preventDefault())},o.prototype._getPixelsScrolled=function(e){if(0===e.deltaY)return 0;var t=e.deltaY;return e.deltaMode===WheelEvent.DOM_DELTA_LINE?t*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._currentRowHeight*this._terminal.rows),t},o.prototype.getLinesScrolled=function(e){if(0===e.deltaY)return 0;var t=e.deltaY;return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(t/=this._currentRowHeight+0,this._wheelPartialScroll+=t,t=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._terminal.rows),t},o.prototype.onTouchStart=function(e){this._lastTouchY=e.touches[0].pageY},o.prototype.onTouchMove=function(e){var t=this._lastTouchY-e.touches[0].pageY;this._lastTouchY=e.touches[0].pageY,0!==t&&(this._viewportElement.scrollTop+=t,e.preventDefault())},o}(t.Disposable);exports.Viewport=o;
},{"./common/Lifecycle":"VtE8","./ui/Lifecycle":"0SNy"}],"3c3X":[function(require,module,exports) {
"use strict";function e(e){return e.replace(/\r?\n/g,"\r")}function t(e,t){return t?"[200~"+e+"[201~":e}function l(e,t,l){t.browser.isMSIE?window.clipboardData.setData("Text",l.selectionText):e.clipboardData.setData("text/plain",l.selectionText),e.preventDefault()}function a(l,a){l.stopPropagation();var o=function(o){o=t(o=e(o),a.bracketedPasteMode),a.handler(o),a.textarea.value="",a.emit("paste",o),a.cancel(l)};a.browser.isMSIE?window.clipboardData&&o(window.clipboardData.getData("Text")):l.clipboardData&&o(l.clipboardData.getData("text/plain"))}function o(e,t){t.style.position="fixed",t.style.width="20px",t.style.height="20px",t.style.left=e.clientX-10+"px",t.style.top=e.clientY-10+"px",t.style.zIndex="1000",t.focus(),setTimeout(function(){t.style.position=null,t.style.width=null,t.style.height=null,t.style.left=null,t.style.top=null,t.style.zIndex=null},200)}function n(e,t,l,a){o(e,t),a&&!l.isClickInSelection(e)&&l.selectWordAtCursor(e),t.value=l.selectionText,t.select()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.prepareTextForTerminal=e,exports.bracketTextForPaste=t,exports.copyHandler=l,exports.pasteHandler=a,exports.moveTextAreaUnderMouseCursor=o,exports.rightClickHandler=n;
},{}],"xnQp":[function(require,module,exports) {
"use strict";var S,C;Object.defineProperty(exports,"__esModule",{value:!0}),function(S){S.NUL="\0",S.SOH="",S.STX="",S.ETX="",S.EOT="",S.ENQ="",S.ACK="",S.BEL="",S.BS="\b",S.HT="\t",S.LF="\n",S.VT="\v",S.FF="\f",S.CR="\r",S.SO="",S.SI="",S.DLE="",S.DC1="",S.DC2="",S.DC3="",S.DC4="",S.NAK="",S.SYN="",S.ETB="",S.CAN="",S.EM="",S.SUB="",S.ESC="",S.FS="",S.GS="",S.RS="",S.US="",S.SP=" ",S.DEL=""}(S=exports.C0||(exports.C0={})),function(S){S.PAD="",S.HOP="",S.BPH="",S.NBH="",S.IND="",S.NEL="",S.SSA="",S.ESA="",S.HTS="",S.HTJ="",S.VTS="",S.PLD="",S.PLU="",S.RI="",S.SS2="",S.SS3="",S.DCS="",S.PU1="",S.PU2="",S.STS="",S.CCH="",S.MW="",S.SPA="",S.EPA="",S.SOS="",S.SGCI="",S.SCI="",S.CSI="",S.ST="",S.OSC="",S.PM="",S.APC=""}(C=exports.C1||(exports.C1={}));
},{}],"6f5g":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CHARSETS={},exports.DEFAULT_CHARSET=exports.CHARSETS.B,exports.CHARSETS[0]={"`":"◆",a:"▒",b:"\t",c:"\f",d:"\r",e:"\n",f:"°",g:"±",h:"␤",i:"\v",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},exports.CHARSETS.A={"#":"£"},exports.CHARSETS.B=null,exports.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},exports.CHARSETS.C=exports.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},exports.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},exports.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},exports.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},exports.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},exports.CHARSETS.E=exports.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},exports.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},exports.CHARSETS.H=exports.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},exports.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"};
},{}],"Xux/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});
},{}],"lZiw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var I,e=require("../shared/Types");exports.IColorSet=e.IColorSet,function(I){I[I.BOLD=1]="BOLD",I[I.UNDERLINE=2]="UNDERLINE",I[I.BLINK=4]="BLINK",I[I.INVERSE=8]="INVERSE",I[I.INVISIBLE=16]="INVISIBLE",I[I.DIM=32]="DIM",I[I.ITALIC=64]="ITALIC"}(I=exports.FLAGS||(exports.FLAGS={}));
},{"../shared/Types":"Xux/"}],"6Lzu":[function(require,module,exports) {
"use strict";function r(r){for(var t=0,n=0;n<r.length;++n){var e=r.charCodeAt(n);if(55296<=e&&e<=56319){var o=r.charCodeAt(n+1);if(isNaN(o))return t;e=1024*(e-55296)+(o-56320)+65536}56320<=e&&e<=57343||(t+=exports.wcwidth(e))}return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.wcwidth=function(r){var t=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],n=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];function e(r,t){var n,e=0,o=t.length-1;if(r<t[0][0]||r>t[o][1])return!1;for(;o>=e;)if(r>t[n=e+o>>1][1])e=n+1;else{if(!(r<t[n][0]))return!0;o=n-1}return!1}var o=0|r.control,u=null;return function(i){if((i|=0)<32)return 0|o;if(i<127)return 1;var f,a=u||function(){var n;u="undefined"==typeof Uint32Array?new Array(4096):new Uint32Array(4096);for(var o=0;o<4096;++o){for(var i=0,f=16;f--;)i=i<<2|(0===(n=16*o+f)?r.nul:n<32||n>=127&&n<160?r.control:e(n,t)?0:function(r){return r>=4352&&(r<=4447||9001===r||9002===r||r>=11904&&r<=42191&&12351!==r||r>=44032&&r<=55203||r>=63744&&r<=64255||r>=65040&&r<=65049||r>=65072&&r<=65135||r>=65280&&r<=65376||r>=65504&&r<=65510)}(n)?2:1);u[o]=i}return u}();return i<65536?a[i>>4]>>((15&i)<<1)&3:e(f=i,n)?0:f>=131072&&f<=196605||f>=196608&&f<=262141?2:1}}({nul:0,control:0}),exports.getStringCellWidth=r;
},{}],"4kff":[function(require,module,exports) {
"use strict";var S,E,C;Object.defineProperty(exports,"__esModule",{value:!0}),function(S){S.HOVER="linkhover",S.TOOLTIP="linktooltip",S.LEAVE="linkleave"}(S=exports.LinkHoverEventTypes||(exports.LinkHoverEventTypes={})),function(S){S[S.GROUND=0]="GROUND",S[S.ESCAPE=1]="ESCAPE",S[S.ESCAPE_INTERMEDIATE=2]="ESCAPE_INTERMEDIATE",S[S.CSI_ENTRY=3]="CSI_ENTRY",S[S.CSI_PARAM=4]="CSI_PARAM",S[S.CSI_INTERMEDIATE=5]="CSI_INTERMEDIATE",S[S.CSI_IGNORE=6]="CSI_IGNORE",S[S.SOS_PM_APC_STRING=7]="SOS_PM_APC_STRING",S[S.OSC_STRING=8]="OSC_STRING",S[S.DCS_ENTRY=9]="DCS_ENTRY",S[S.DCS_PARAM=10]="DCS_PARAM",S[S.DCS_IGNORE=11]="DCS_IGNORE",S[S.DCS_INTERMEDIATE=12]="DCS_INTERMEDIATE",S[S.DCS_PASSTHROUGH=13]="DCS_PASSTHROUGH"}(E=exports.ParserState||(exports.ParserState={})),function(S){S[S.IGNORE=0]="IGNORE",S[S.ERROR=1]="ERROR",S[S.PRINT=2]="PRINT",S[S.EXECUTE=3]="EXECUTE",S[S.OSC_START=4]="OSC_START",S[S.OSC_PUT=5]="OSC_PUT",S[S.OSC_END=6]="OSC_END",S[S.CSI_DISPATCH=7]="CSI_DISPATCH",S[S.PARAM=8]="PARAM",S[S.COLLECT=9]="COLLECT",S[S.ESC_DISPATCH=10]="ESC_DISPATCH",S[S.CLEAR=11]="CLEAR",S[S.DCS_HOOK=12]="DCS_HOOK",S[S.DCS_PUT=13]="DCS_PUT",S[S.DCS_UNHOOK=14]="DCS_UNHOOK"}(C=exports.ParserAction||(exports.ParserAction={}));
},{}],"k6J0":[function(require,module,exports) {
"use strict";var r=this&&this.__extends||function(){var r=function(a,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var e in a)a.hasOwnProperty(e)&&(r[e]=a[e])})(a,e)};return function(a,e){function t(){this.constructor=a}r(a,e),a.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}}();Object.defineProperty(exports,"__esModule",{value:!0});var a=require("./Types"),e=require("./common/Lifecycle");function t(r,a){for(var e=a-r,t=new Array(e);e--;)t[e]=--a;return t}var s=function(){function r(r){this.table="undefined"==typeof Uint8Array?new Array(r):new Uint8Array(r)}return r.prototype.add=function(r,a,e,t){this.table[a<<8|r]=(0|e)<<4|(void 0===t?a:t)},r.prototype.addMany=function(r,a,e,t){for(var s=0;s<r.length;s++)this.add(r[s],a,e,t)},r}();exports.TransitionTable=s;var n=t(32,127),S=t(0,24);S.push(25),S.concat(t(28,32));var P=a.ParserAction.ERROR<<4|a.ParserState.GROUND;exports.VT500_TRANSITION_TABLE=function(){var r,e=new s(4095),P=t(a.ParserState.GROUND,a.ParserState.DCS_PASSTHROUGH+1);for(r in P)for(var d=0;d<160;++d)e.add(d,r,a.ParserAction.ERROR,a.ParserState.GROUND);for(r in e.addMany(n,a.ParserState.GROUND,a.ParserAction.PRINT,a.ParserState.GROUND),P)e.addMany([24,26,153,154],r,a.ParserAction.EXECUTE,a.ParserState.GROUND),e.addMany(t(128,144),r,a.ParserAction.EXECUTE,a.ParserState.GROUND),e.addMany(t(144,152),r,a.ParserAction.EXECUTE,a.ParserState.GROUND),e.add(156,r,a.ParserAction.IGNORE,a.ParserState.GROUND),e.add(27,r,a.ParserAction.CLEAR,a.ParserState.ESCAPE),e.add(157,r,a.ParserAction.OSC_START,a.ParserState.OSC_STRING),e.addMany([152,158,159],r,a.ParserAction.IGNORE,a.ParserState.SOS_PM_APC_STRING),e.add(155,r,a.ParserAction.CLEAR,a.ParserState.CSI_ENTRY),e.add(144,r,a.ParserAction.CLEAR,a.ParserState.DCS_ENTRY);return e.addMany(S,a.ParserState.GROUND,a.ParserAction.EXECUTE,a.ParserState.GROUND),e.addMany(S,a.ParserState.ESCAPE,a.ParserAction.EXECUTE,a.ParserState.ESCAPE),e.add(127,a.ParserState.ESCAPE,a.ParserAction.IGNORE,a.ParserState.ESCAPE),e.addMany(S,a.ParserState.OSC_STRING,a.ParserAction.IGNORE,a.ParserState.OSC_STRING),e.addMany(S,a.ParserState.CSI_ENTRY,a.ParserAction.EXECUTE,a.ParserState.CSI_ENTRY),e.add(127,a.ParserState.CSI_ENTRY,a.ParserAction.IGNORE,a.ParserState.CSI_ENTRY),e.addMany(S,a.ParserState.CSI_PARAM,a.ParserAction.EXECUTE,a.ParserState.CSI_PARAM),e.add(127,a.ParserState.CSI_PARAM,a.ParserAction.IGNORE,a.ParserState.CSI_PARAM),e.addMany(S,a.ParserState.CSI_IGNORE,a.ParserAction.EXECUTE,a.ParserState.CSI_IGNORE),e.addMany(S,a.ParserState.CSI_INTERMEDIATE,a.ParserAction.EXECUTE,a.ParserState.CSI_INTERMEDIATE),e.add(127,a.ParserState.CSI_INTERMEDIATE,a.ParserAction.IGNORE,a.ParserState.CSI_INTERMEDIATE),e.addMany(S,a.ParserState.ESCAPE_INTERMEDIATE,a.ParserAction.EXECUTE,a.ParserState.ESCAPE_INTERMEDIATE),e.add(127,a.ParserState.ESCAPE_INTERMEDIATE,a.ParserAction.IGNORE,a.ParserState.ESCAPE_INTERMEDIATE),e.add(93,a.ParserState.ESCAPE,a.ParserAction.OSC_START,a.ParserState.OSC_STRING),e.addMany(n,a.ParserState.OSC_STRING,a.ParserAction.OSC_PUT,a.ParserState.OSC_STRING),e.add(127,a.ParserState.OSC_STRING,a.ParserAction.OSC_PUT,a.ParserState.OSC_STRING),e.addMany([156,27,24,26,7],a.ParserState.OSC_STRING,a.ParserAction.OSC_END,a.ParserState.GROUND),e.addMany(t(28,32),a.ParserState.OSC_STRING,a.ParserAction.IGNORE,a.ParserState.OSC_STRING),e.addMany([88,94,95],a.ParserState.ESCAPE,a.ParserAction.IGNORE,a.ParserState.SOS_PM_APC_STRING),e.addMany(n,a.ParserState.SOS_PM_APC_STRING,a.ParserAction.IGNORE,a.ParserState.SOS_PM_APC_STRING),e.addMany(S,a.ParserState.SOS_PM_APC_STRING,a.ParserAction.IGNORE,a.ParserState.SOS_PM_APC_STRING),e.add(156,a.ParserState.SOS_PM_APC_STRING,a.ParserAction.IGNORE,a.ParserState.GROUND),e.add(91,a.ParserState.ESCAPE,a.ParserAction.CLEAR,a.ParserState.CSI_ENTRY),e.addMany(t(64,127),a.ParserState.CSI_ENTRY,a.ParserAction.CSI_DISPATCH,a.ParserState.GROUND),e.addMany(t(48,58),a.ParserState.CSI_ENTRY,a.ParserAction.PARAM,a.ParserState.CSI_PARAM),e.add(59,a.ParserState.CSI_ENTRY,a.ParserAction.PARAM,a.ParserState.CSI_PARAM),e.addMany([60,61,62,63],a.ParserState.CSI_ENTRY,a.ParserAction.COLLECT,a.ParserState.CSI_PARAM),e.addMany(t(48,58),a.ParserState.CSI_PARAM,a.ParserAction.PARAM,a.ParserState.CSI_PARAM),e.add(59,a.ParserState.CSI_PARAM,a.ParserAction.PARAM,a.ParserState.CSI_PARAM),e.addMany(t(64,127),a.ParserState.CSI_PARAM,a.ParserAction.CSI_DISPATCH,a.ParserState.GROUND),e.addMany([58,60,61,62,63],a.ParserState.CSI_PARAM,a.ParserAction.IGNORE,a.ParserState.CSI_IGNORE),e.addMany(t(32,64),a.ParserState.CSI_IGNORE,a.ParserAction.IGNORE,a.ParserState.CSI_IGNORE),e.add(127,a.ParserState.CSI_IGNORE,a.ParserAction.IGNORE,a.ParserState.CSI_IGNORE),e.addMany(t(64,127),a.ParserState.CSI_IGNORE,a.ParserAction.IGNORE,a.ParserState.GROUND),e.add(58,a.ParserState.CSI_ENTRY,a.ParserAction.IGNORE,a.ParserState.CSI_IGNORE),e.addMany(t(32,48),a.ParserState.CSI_ENTRY,a.ParserAction.COLLECT,a.ParserState.CSI_INTERMEDIATE),e.addMany(t(32,48),a.ParserState.CSI_INTERMEDIATE,a.ParserAction.COLLECT,a.ParserState.CSI_INTERMEDIATE),e.addMany(t(48,64),a.ParserState.CSI_INTERMEDIATE,a.ParserAction.IGNORE,a.ParserState.CSI_IGNORE),e.addMany(t(64,127),a.ParserState.CSI_INTERMEDIATE,a.ParserAction.CSI_DISPATCH,a.ParserState.GROUND),e.addMany(t(32,48),a.ParserState.CSI_PARAM,a.ParserAction.COLLECT,a.ParserState.CSI_INTERMEDIATE),e.addMany(t(32,48),a.ParserState.ESCAPE,a.ParserAction.COLLECT,a.ParserState.ESCAPE_INTERMEDIATE),e.addMany(t(32,48),a.ParserState.ESCAPE_INTERMEDIATE,a.ParserAction.COLLECT,a.ParserState.ESCAPE_INTERMEDIATE),e.addMany(t(48,127),a.ParserState.ESCAPE_INTERMEDIATE,a.ParserAction.ESC_DISPATCH,a.ParserState.GROUND),e.addMany(t(48,80),a.ParserState.ESCAPE,a.ParserAction.ESC_DISPATCH,a.ParserState.GROUND),e.addMany(t(81,88),a.ParserState.ESCAPE,a.ParserAction.ESC_DISPATCH,a.ParserState.GROUND),e.addMany([89,90,92],a.ParserState.ESCAPE,a.ParserAction.ESC_DISPATCH,a.ParserState.GROUND),e.addMany(t(96,127),a.ParserState.ESCAPE,a.ParserAction.ESC_DISPATCH,a.ParserState.GROUND),e.add(80,a.ParserState.ESCAPE,a.ParserAction.CLEAR,a.ParserState.DCS_ENTRY),e.addMany(S,a.ParserState.DCS_ENTRY,a.ParserAction.IGNORE,a.ParserState.DCS_ENTRY),e.add(127,a.ParserState.DCS_ENTRY,a.ParserAction.IGNORE,a.ParserState.DCS_ENTRY),e.addMany(t(28,32),a.ParserState.DCS_ENTRY,a.ParserAction.IGNORE,a.ParserState.DCS_ENTRY),e.addMany(t(32,48),a.ParserState.DCS_ENTRY,a.ParserAction.COLLECT,a.ParserState.DCS_INTERMEDIATE),e.add(58,a.ParserState.DCS_ENTRY,a.ParserAction.IGNORE,a.ParserState.DCS_IGNORE),e.addMany(t(48,58),a.ParserState.DCS_ENTRY,a.ParserAction.PARAM,a.ParserState.DCS_PARAM),e.add(59,a.ParserState.DCS_ENTRY,a.ParserAction.PARAM,a.ParserState.DCS_PARAM),e.addMany([60,61,62,63],a.ParserState.DCS_ENTRY,a.ParserAction.COLLECT,a.ParserState.DCS_PARAM),e.addMany(S,a.ParserState.DCS_IGNORE,a.ParserAction.IGNORE,a.ParserState.DCS_IGNORE),e.addMany(t(32,128),a.ParserState.DCS_IGNORE,a.ParserAction.IGNORE,a.ParserState.DCS_IGNORE),e.addMany(t(28,32),a.ParserState.DCS_IGNORE,a.ParserAction.IGNORE,a.ParserState.DCS_IGNORE),e.addMany(S,a.ParserState.DCS_PARAM,a.ParserAction.IGNORE,a.ParserState.DCS_PARAM),e.add(127,a.ParserState.DCS_PARAM,a.ParserAction.IGNORE,a.ParserState.DCS_PARAM),e.addMany(t(28,32),a.ParserState.DCS_PARAM,a.ParserAction.IGNORE,a.ParserState.DCS_PARAM),e.addMany(t(48,58),a.ParserState.DCS_PARAM,a.ParserAction.PARAM,a.ParserState.DCS_PARAM),e.add(59,a.ParserState.DCS_PARAM,a.ParserAction.PARAM,a.ParserState.DCS_PARAM),e.addMany([58,60,61,62,63],a.ParserState.DCS_PARAM,a.ParserAction.IGNORE,a.ParserState.DCS_IGNORE),e.addMany(t(32,48),a.ParserState.DCS_PARAM,a.ParserAction.COLLECT,a.ParserState.DCS_INTERMEDIATE),e.addMany(S,a.ParserState.DCS_INTERMEDIATE,a.ParserAction.IGNORE,a.ParserState.DCS_INTERMEDIATE),e.add(127,a.ParserState.DCS_INTERMEDIATE,a.ParserAction.IGNORE,a.ParserState.DCS_INTERMEDIATE),e.addMany(t(28,32),a.ParserState.DCS_INTERMEDIATE,a.ParserAction.IGNORE,a.ParserState.DCS_INTERMEDIATE),e.addMany(t(32,48),a.ParserState.DCS_INTERMEDIATE,a.ParserAction.COLLECT,a.ParserState.DCS_INTERMEDIATE),e.addMany(t(48,64),a.ParserState.DCS_INTERMEDIATE,a.ParserAction.IGNORE,a.ParserState.DCS_IGNORE),e.addMany(t(64,127),a.ParserState.DCS_INTERMEDIATE,a.ParserAction.DCS_HOOK,a.ParserState.DCS_PASSTHROUGH),e.addMany(t(64,127),a.ParserState.DCS_PARAM,a.ParserAction.DCS_HOOK,a.ParserState.DCS_PASSTHROUGH),e.addMany(t(64,127),a.ParserState.DCS_ENTRY,a.ParserAction.DCS_HOOK,a.ParserState.DCS_PASSTHROUGH),e.addMany(S,a.ParserState.DCS_PASSTHROUGH,a.ParserAction.DCS_PUT,a.ParserState.DCS_PASSTHROUGH),e.addMany(n,a.ParserState.DCS_PASSTHROUGH,a.ParserAction.DCS_PUT,a.ParserState.DCS_PASSTHROUGH),e.add(127,a.ParserState.DCS_PASSTHROUGH,a.ParserAction.IGNORE,a.ParserState.DCS_PASSTHROUGH),e.addMany([27,156],a.ParserState.DCS_PASSTHROUGH,a.ParserAction.DCS_UNHOOK,a.ParserState.GROUND),e}();var d=function(){function r(){}return r.prototype.hook=function(r,a,e){},r.prototype.put=function(r,a,e){},r.prototype.unhook=function(){},r}(),c=function(e){function t(r){void 0===r&&(r=exports.VT500_TRANSITION_TABLE);var t=e.call(this)||this;return t.TRANSITIONS=r,t.initialState=a.ParserState.GROUND,t.currentState=t.initialState,t._osc="",t._params=[0],t._collect="",t._printHandlerFb=function(r,a,e){},t._executeHandlerFb=function(r){},t._csiHandlerFb=function(r,a,e){},t._escHandlerFb=function(r,a){},t._oscHandlerFb=function(r,a){},t._dcsHandlerFb=new d,t._errorHandlerFb=function(r){return r},t._printHandler=t._printHandlerFb,t._executeHandlers=Object.create(null),t._csiHandlers=Object.create(null),t._escHandlers=Object.create(null),t._oscHandlers=Object.create(null),t._dcsHandlers=Object.create(null),t._activeDcsHandler=null,t._errorHandler=t._errorHandlerFb,t}return r(t,e),t.prototype.dispose=function(){this._printHandlerFb=null,this._executeHandlerFb=null,this._csiHandlerFb=null,this._escHandlerFb=null,this._oscHandlerFb=null,this._dcsHandlerFb=null,this._errorHandlerFb=null,this._printHandler=null,this._executeHandlers=null,this._csiHandlers=null,this._escHandlers=null,this._oscHandlers=null,this._dcsHandlers=null,this._activeDcsHandler=null,this._errorHandler=null},t.prototype.setPrintHandler=function(r){this._printHandler=r},t.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},t.prototype.setExecuteHandler=function(r,a){this._executeHandlers[r.charCodeAt(0)]=a},t.prototype.clearExecuteHandler=function(r){this._executeHandlers[r.charCodeAt(0)]&&delete this._executeHandlers[r.charCodeAt(0)]},t.prototype.setExecuteHandlerFallback=function(r){this._executeHandlerFb=r},t.prototype.setCsiHandler=function(r,a){this._csiHandlers[r.charCodeAt(0)]=a},t.prototype.clearCsiHandler=function(r){this._csiHandlers[r.charCodeAt(0)]&&delete this._csiHandlers[r.charCodeAt(0)]},t.prototype.setCsiHandlerFallback=function(r){this._csiHandlerFb=r},t.prototype.setEscHandler=function(r,a){this._escHandlers[r]=a},t.prototype.clearEscHandler=function(r){this._escHandlers[r]&&delete this._escHandlers[r]},t.prototype.setEscHandlerFallback=function(r){this._escHandlerFb=r},t.prototype.setOscHandler=function(r,a){this._oscHandlers[r]=a},t.prototype.clearOscHandler=function(r){this._oscHandlers[r]&&delete this._oscHandlers[r]},t.prototype.setOscHandlerFallback=function(r){this._oscHandlerFb=r},t.prototype.setDcsHandler=function(r,a){this._dcsHandlers[r]=a},t.prototype.clearDcsHandler=function(r){this._dcsHandlers[r]&&delete this._dcsHandlers[r]},t.prototype.setDcsHandlerFallback=function(r){this._dcsHandlerFb=r},t.prototype.setErrorHandler=function(r){this._errorHandler=r},t.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},t.prototype.reset=function(){this.currentState=this.initialState,this._osc="",this._params=[0],this._collect="",this._activeDcsHandler=null},t.prototype.parse=function(r){for(var e=0,t=0,s=!1,n=this.currentState,S=-1,d=-1,c=this._osc,i=this._collect,o=this._params,A=this.TRANSITIONS.table,E=this._activeDcsHandler,_=null,C=r.length,R=0;R<C;++R)if(e=r.charCodeAt(R),n===a.ParserState.GROUND&&e>31&&e<128){S=~S?S:R;do{R++}while(R<C&&r.charCodeAt(R)>31&&r.charCodeAt(R)<128);R--}else if(n===a.ParserState.CSI_PARAM&&e>47&&e<57)o[o.length-1]=10*o[o.length-1]+e-48;else{switch((t=e<160?A[n<<8|e]:P)>>4){case a.ParserAction.PRINT:S=~S?S:R;break;case a.ParserAction.EXECUTE:~S&&(this._printHandler(r,S,R),S=-1),(_=this._executeHandlers[e])?_():this._executeHandlerFb(e);break;case a.ParserAction.IGNORE:~S?(this._printHandler(r,S,R),S=-1):~d&&(E.put(r,d,R),d=-1);break;case a.ParserAction.ERROR:if(e>159)switch(n){case a.ParserState.GROUND:S=~S?S:R;break;case a.ParserState.OSC_STRING:c+=String.fromCharCode(e),t|=a.ParserState.OSC_STRING;break;case a.ParserState.CSI_IGNORE:t|=a.ParserState.CSI_IGNORE;break;case a.ParserState.DCS_IGNORE:t|=a.ParserState.DCS_IGNORE;break;case a.ParserState.DCS_PASSTHROUGH:d=~d?d:R,t|=a.ParserState.DCS_PASSTHROUGH;break;default:s=!0}else s=!0;if(s){if(this._errorHandler({position:R,code:e,currentState:n,print:S,dcs:d,osc:c,collect:i,params:o,abort:!1}).abort)return;s=!1}break;case a.ParserAction.CSI_DISPATCH:(_=this._csiHandlers[e])?_(o,i):this._csiHandlerFb(i,o,e);break;case a.ParserAction.PARAM:59===e?o.push(0):o[o.length-1]=10*o[o.length-1]+e-48;break;case a.ParserAction.COLLECT:i+=String.fromCharCode(e);break;case a.ParserAction.ESC_DISPATCH:(_=this._escHandlers[i+String.fromCharCode(e)])?_(i,e):this._escHandlerFb(i,e);break;case a.ParserAction.CLEAR:~S&&(this._printHandler(r,S,R),S=-1),c="",o=[0],i="",d=-1;break;case a.ParserAction.DCS_HOOK:(E=this._dcsHandlers[i+String.fromCharCode(e)])||(E=this._dcsHandlerFb),E.hook(i,o,e);break;case a.ParserAction.DCS_PUT:d=~d?d:R;break;case a.ParserAction.DCS_UNHOOK:E&&(~d&&E.put(r,d,R),E.unhook(),E=null),27===e&&(t|=a.ParserState.ESCAPE),c="",o=[0],i="",d=-1;break;case a.ParserAction.OSC_START:~S&&(this._printHandler(r,S,R),S=-1),c="";break;case a.ParserAction.OSC_PUT:c+=r.charAt(R);break;case a.ParserAction.OSC_END:if(c&&24!==e&&26!==e){var I=c.indexOf(";");if(-1===I)this._oscHandlerFb(-1,c);else{var l=parseInt(c.substring(0,I)),T=c.substring(I+1);(_=this._oscHandlers[l])?_(T):this._oscHandlerFb(l,T)}}27===e&&(t|=a.ParserState.ESCAPE),c="",o=[0],i="",d=-1}n=15&t}n===a.ParserState.GROUND&&~S?this._printHandler(r,S,r.length):n===a.ParserState.DCS_PASSTHROUGH&&~d&&E&&E.put(r,d,r.length),this._osc=c,this._collect=i,this._params=o,this._activeDcsHandler=E,this.currentState=n},t}(e.Disposable);exports.EscapeSequenceParser=c;
},{"./Types":"4kff","./common/Lifecycle":"VtE8"}],"uvkR":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./common/data/EscapeSequences"),r=require("./core/data/Charsets"),i=require("./Buffer"),s=require("./renderer/Types"),n=require("./CharWidth"),a=require("./EscapeSequenceParser"),l=require("./common/Lifecycle"),o=require("./BufferLine"),u={"(":0,")":1,"*":2,"+":3,"-":1,".":2},_=function(){function e(e){this._terminal=e}return e.prototype.hook=function(e,t,r){this._data=""},e.prototype.put=function(e,t,r){this._data+=e.substring(t,r)},e.prototype.unhook=function(){this._terminal.handler(t.C0.ESC+"P0+r"+this._data+t.C0.ESC+"\\")},e}(),c=function(){function e(e){this._terminal=e}return e.prototype.hook=function(e,t,r){this._data=""},e.prototype.put=function(e,t,r){this._data+=e.substring(t,r)},e.prototype.unhook=function(){switch(this._data){case'"q':return this._terminal.handler(t.C0.ESC+'P1$r0"q'+t.C0.ESC+"\\");case'"p':return this._terminal.handler(t.C0.ESC+'P1$r61"p'+t.C0.ESC+"\\");case"r":var e=this._terminal.buffer.scrollTop+1+";"+(this._terminal.buffer.scrollBottom+1)+"r";return this._terminal.handler(t.C0.ESC+"P1$r"+e+t.C0.ESC+"\\");case"m":return this._terminal.handler(t.C0.ESC+"P1$r0m"+t.C0.ESC+"\\");case" q":var r={block:2,underline:4,bar:6}[this._terminal.getOption("cursorStyle")];return r-=this._terminal.getOption("cursorBlink"),this._terminal.handler(t.C0.ESC+"P1$r"+r+" q"+t.C0.ESC+"\\");default:this._terminal.error("Unknown DCS $q %s",this._data),this._terminal.handler(t.C0.ESC+"P0$r"+this._data+t.C0.ESC+"\\")}},e}(),f=function(l){function f(e,i){void 0===i&&(i=new a.EscapeSequenceParser);var s=l.call(this)||this;s._terminal=e,s._parser=i,s.register(s._parser),s._surrogateHigh="",s._parser.setCsiHandlerFallback(function(e,t,r){s._terminal.error("Unknown CSI code: ",{collect:e,params:t,flag:String.fromCharCode(r)})}),s._parser.setEscHandlerFallback(function(e,t){s._terminal.error("Unknown ESC code: ",{collect:e,flag:String.fromCharCode(t)})}),s._parser.setExecuteHandlerFallback(function(e){s._terminal.error("Unknown EXECUTE code: ",{code:e})}),s._parser.setOscHandlerFallback(function(e,t){s._terminal.error("Unknown OSC code: ",{identifier:e,data:t})}),s._parser.setPrintHandler(function(e,t,r){return s.print(e,t,r)}),s._parser.setCsiHandler("@",function(e,t){return s.insertChars(e)}),s._parser.setCsiHandler("A",function(e,t){return s.cursorUp(e)}),s._parser.setCsiHandler("B",function(e,t){return s.cursorDown(e)}),s._parser.setCsiHandler("C",function(e,t){return s.cursorForward(e)}),s._parser.setCsiHandler("D",function(e,t){return s.cursorBackward(e)}),s._parser.setCsiHandler("E",function(e,t){return s.cursorNextLine(e)}),s._parser.setCsiHandler("F",function(e,t){return s.cursorPrecedingLine(e)}),s._parser.setCsiHandler("G",function(e,t){return s.cursorCharAbsolute(e)}),s._parser.setCsiHandler("H",function(e,t){return s.cursorPosition(e)}),s._parser.setCsiHandler("I",function(e,t){return s.cursorForwardTab(e)}),s._parser.setCsiHandler("J",function(e,t){return s.eraseInDisplay(e)}),s._parser.setCsiHandler("K",function(e,t){return s.eraseInLine(e)}),s._parser.setCsiHandler("L",function(e,t){return s.insertLines(e)}),s._parser.setCsiHandler("M",function(e,t){return s.deleteLines(e)}),s._parser.setCsiHandler("P",function(e,t){return s.deleteChars(e)}),s._parser.setCsiHandler("S",function(e,t){return s.scrollUp(e)}),s._parser.setCsiHandler("T",function(e,t){return s.scrollDown(e,t)}),s._parser.setCsiHandler("X",function(e,t){return s.eraseChars(e)}),s._parser.setCsiHandler("Z",function(e,t){return s.cursorBackwardTab(e)}),s._parser.setCsiHandler("`",function(e,t){return s.charPosAbsolute(e)}),s._parser.setCsiHandler("a",function(e,t){return s.hPositionRelative(e)}),s._parser.setCsiHandler("b",function(e,t){return s.repeatPrecedingCharacter(e)}),s._parser.setCsiHandler("c",function(e,t){return s.sendDeviceAttributes(e,t)}),s._parser.setCsiHandler("d",function(e,t){return s.linePosAbsolute(e)}),s._parser.setCsiHandler("e",function(e,t){return s.vPositionRelative(e)}),s._parser.setCsiHandler("f",function(e,t){return s.hVPosition(e)}),s._parser.setCsiHandler("g",function(e,t){return s.tabClear(e)}),s._parser.setCsiHandler("h",function(e,t){return s.setMode(e,t)}),s._parser.setCsiHandler("l",function(e,t){return s.resetMode(e,t)}),s._parser.setCsiHandler("m",function(e,t){return s.charAttributes(e)}),s._parser.setCsiHandler("n",function(e,t){return s.deviceStatus(e,t)}),s._parser.setCsiHandler("p",function(e,t){return s.softReset(e,t)}),s._parser.setCsiHandler("q",function(e,t){return s.setCursorStyle(e,t)}),s._parser.setCsiHandler("r",function(e,t){return s.setScrollRegion(e,t)}),s._parser.setCsiHandler("s",function(e,t){return s.saveCursor(e)}),s._parser.setCsiHandler("u",function(e,t){return s.restoreCursor(e)}),s._parser.setExecuteHandler(t.C0.BEL,function(){return s.bell()}),s._parser.setExecuteHandler(t.C0.LF,function(){return s.lineFeed()}),s._parser.setExecuteHandler(t.C0.VT,function(){return s.lineFeed()}),s._parser.setExecuteHandler(t.C0.FF,function(){return s.lineFeed()}),s._parser.setExecuteHandler(t.C0.CR,function(){return s.carriageReturn()}),s._parser.setExecuteHandler(t.C0.BS,function(){return s.backspace()}),s._parser.setExecuteHandler(t.C0.HT,function(){return s.tab()}),s._parser.setExecuteHandler(t.C0.SO,function(){return s.shiftOut()}),s._parser.setExecuteHandler(t.C0.SI,function(){return s.shiftIn()}),s._parser.setExecuteHandler(t.C1.IND,function(){return s.index()}),s._parser.setExecuteHandler(t.C1.NEL,function(){return s.nextLine()}),s._parser.setExecuteHandler(t.C1.HTS,function(){return s.tabSet()}),s._parser.setOscHandler(0,function(e){return s.setTitle(e)}),s._parser.setOscHandler(2,function(e){return s.setTitle(e)}),s._parser.setEscHandler("7",function(){return s.saveCursor([])}),s._parser.setEscHandler("8",function(){return s.restoreCursor([])}),s._parser.setEscHandler("D",function(){return s.index()}),s._parser.setEscHandler("E",function(){return s.nextLine()}),s._parser.setEscHandler("H",function(){return s.tabSet()}),s._parser.setEscHandler("M",function(){return s.reverseIndex()}),s._parser.setEscHandler("=",function(){return s.keypadApplicationMode()}),s._parser.setEscHandler(">",function(){return s.keypadNumericMode()}),s._parser.setEscHandler("c",function(){return s.reset()}),s._parser.setEscHandler("n",function(){return s.setgLevel(2)}),s._parser.setEscHandler("o",function(){return s.setgLevel(3)}),s._parser.setEscHandler("|",function(){return s.setgLevel(3)}),s._parser.setEscHandler("}",function(){return s.setgLevel(2)}),s._parser.setEscHandler("~",function(){return s.setgLevel(1)}),s._parser.setEscHandler("%@",function(){return s.selectDefaultCharset()}),s._parser.setEscHandler("%G",function(){return s.selectDefaultCharset()});var n=function(e){o._parser.setEscHandler("("+e,function(){return s.selectCharset("("+e)}),o._parser.setEscHandler(")"+e,function(){return s.selectCharset(")"+e)}),o._parser.setEscHandler("*"+e,function(){return s.selectCharset("*"+e)}),o._parser.setEscHandler("+"+e,function(){return s.selectCharset("+"+e)}),o._parser.setEscHandler("-"+e,function(){return s.selectCharset("-"+e)}),o._parser.setEscHandler("."+e,function(){return s.selectCharset("."+e)}),o._parser.setEscHandler("/"+e,function(){return s.selectCharset("/"+e)})},o=this;for(var u in r.CHARSETS)n(u);return s._parser.setErrorHandler(function(e){return s._terminal.error("Parsing error: ",e),e}),s._parser.setDcsHandler("$q",new c(s._terminal)),s._parser.setDcsHandler("+q",new _(s._terminal)),s}return e(f,l),f.prototype.dispose=function(){l.prototype.dispose.call(this),this._terminal=null},f.prototype.parse=function(e){if(this._terminal){var t=this._terminal.buffer,r=t.x,i=t.y;this._terminal.debug&&this._terminal.log("data: "+e),this._surrogateHigh&&(e=this._surrogateHigh+e,this._surrogateHigh=""),this._parser.parse(e),(t=this._terminal.buffer).x===r&&t.y===i||this._terminal.emit("cursormove")}},f.prototype.print=function(e,t,r){var s,a,l,o,u=this._terminal.buffer,_=this._terminal.charset,c=this._terminal.options.screenReaderMode,f=this._terminal.cols,h=this._terminal.wraparoundMode,m=this._terminal.insertMode,p=this._terminal.curAttr,d=u.lines.get(u.y+u.ybase);this._terminal.updateRange(u.y);for(var b=t;b<r;++b){if(s=e.charAt(b),55296<=(a=e.charCodeAt(b))&&a<=56319){if(l=e.charCodeAt(b+1),isNaN(l)){this._surrogateHigh=s;continue}a=1024*(a-55296)+(l-56320)+65536,s+=e.charAt(b+1)}if(!(56320<=a&&a<=57343))if(o=n.wcwidth(a),_&&(a=(s=_[s]||s).charCodeAt(0)),c&&this._terminal.emit("a11y.char",s),o||!u.x){if(u.x+o-1>=f)if(h)u.x=0,u.y++,u.y>u.scrollBottom?(u.y--,this._terminal.scroll(!0)):u.lines.get(u.y).isWrapped=!0,d=u.lines.get(u.y+u.ybase);else if(2===o)continue;if(m)for(var C=0;C<o;++C){var y=d.pop();L=d.get(u.x-2);0===y[i.CHAR_DATA_WIDTH_INDEX]&&L&&2===L[i.CHAR_DATA_WIDTH_INDEX]&&d.set(this._terminal.cols-2,[p,i.NULL_CELL_CHAR,i.NULL_CELL_WIDTH,i.NULL_CELL_CODE]),d.splice(u.x,0,[p,i.NULL_CELL_CHAR,i.NULL_CELL_WIDTH,i.NULL_CELL_CODE])}d.set(u.x++,[p,s,o,a]),2===o&&d.set(u.x++,[p,"",0,void 0])}else{var L,E=d.get(u.x-1);E&&(E[i.CHAR_DATA_WIDTH_INDEX]?(E[i.CHAR_DATA_CHAR_INDEX]+=s,E[i.CHAR_DATA_CODE_INDEX]=a):(L=d.get(u.x-2))&&(L[i.CHAR_DATA_CHAR_INDEX]+=s,L[i.CHAR_DATA_CODE_INDEX]=a))}}this._terminal.updateRange(u.y)},f.prototype.bell=function(){this._terminal.bell()},f.prototype.lineFeed=function(){var e=this._terminal.buffer;this._terminal.options.convertEol&&(e.x=0),e.y++,e.y>e.scrollBottom&&(e.y--,this._terminal.scroll()),e.x>=this._terminal.cols&&e.x--,this._terminal.emit("linefeed")},f.prototype.carriageReturn=function(){this._terminal.buffer.x=0},f.prototype.backspace=function(){this._terminal.buffer.x>0&&this._terminal.buffer.x--},f.prototype.tab=function(){var e=this._terminal.buffer.x;this._terminal.buffer.x=this._terminal.buffer.nextStop(),this._terminal.options.screenReaderMode&&this._terminal.emit("a11y.tab",this._terminal.buffer.x-e)},f.prototype.shiftOut=function(){this._terminal.setgLevel(1)},f.prototype.shiftIn=function(){this._terminal.setgLevel(0)},f.prototype.insertChars=function(e){this._terminal.buffer.lines.get(this._terminal.buffer.y+this._terminal.buffer.ybase).insertCells(this._terminal.buffer.x,e[0]||1,[this._terminal.eraseAttr(),i.NULL_CELL_CHAR,i.NULL_CELL_WIDTH,i.NULL_CELL_CODE]),this._terminal.updateRange(this._terminal.buffer.y)},f.prototype.cursorUp=function(e){var t=e[0];t<1&&(t=1),this._terminal.buffer.y-=t,this._terminal.buffer.y<0&&(this._terminal.buffer.y=0)},f.prototype.cursorDown=function(e){var t=e[0];t<1&&(t=1),this._terminal.buffer.y+=t,this._terminal.buffer.y>=this._terminal.rows&&(this._terminal.buffer.y=this._terminal.rows-1),this._terminal.buffer.x>=this._terminal.cols&&this._terminal.buffer.x--},f.prototype.cursorForward=function(e){var t=e[0];t<1&&(t=1),this._terminal.buffer.x+=t,this._terminal.buffer.x>=this._terminal.cols&&(this._terminal.buffer.x=this._terminal.cols-1)},f.prototype.cursorBackward=function(e){var t=e[0];t<1&&(t=1),this._terminal.buffer.x>=this._terminal.cols&&this._terminal.buffer.x--,this._terminal.buffer.x-=t,this._terminal.buffer.x<0&&(this._terminal.buffer.x=0)},f.prototype.cursorNextLine=function(e){var t=e[0];t<1&&(t=1),this._terminal.buffer.y+=t,this._terminal.buffer.y>=this._terminal.rows&&(this._terminal.buffer.y=this._terminal.rows-1),this._terminal.buffer.x=0},f.prototype.cursorPrecedingLine=function(e){var t=e[0];t<1&&(t=1),this._terminal.buffer.y-=t,this._terminal.buffer.y<0&&(this._terminal.buffer.y=0),this._terminal.buffer.x=0},f.prototype.cursorCharAbsolute=function(e){var t=e[0];t<1&&(t=1),this._terminal.buffer.x=t-1},f.prototype.cursorPosition=function(e){var t,r=e[0]-1;t=e.length>=2?e[1]-1:0,r<0?r=0:r>=this._terminal.rows&&(r=this._terminal.rows-1),t<0?t=0:t>=this._terminal.cols&&(t=this._terminal.cols-1),this._terminal.buffer.x=t,this._terminal.buffer.y=r},f.prototype.cursorForwardTab=function(e){for(var t=e[0]||1;t--;)this._terminal.buffer.x=this._terminal.buffer.nextStop()},f.prototype._eraseInBufferLine=function(e,t,r){this._terminal.buffer.lines.get(this._terminal.buffer.ybase+e).replaceCells(t,r,[this._terminal.eraseAttr(),i.NULL_CELL_CHAR,i.NULL_CELL_WIDTH,i.NULL_CELL_CODE])},f.prototype.eraseInDisplay=function(e){var t;switch(e[0]){case 0:for(t=this._terminal.buffer.y,this._terminal.updateRange(t),this._eraseInBufferLine(t++,this._terminal.buffer.x,this._terminal.cols);t<this._terminal.rows;t++)this._eraseInBufferLine(t,0,this._terminal.cols);this._terminal.updateRange(t);break;case 1:for(t=this._terminal.buffer.y,this._terminal.updateRange(t),this._eraseInBufferLine(t,0,this._terminal.buffer.x+1);t--;)this._eraseInBufferLine(t,0,this._terminal.cols);this._terminal.updateRange(0);break;case 2:for(t=this._terminal.rows,this._terminal.updateRange(t-1);t--;)this._eraseInBufferLine(t,0,this._terminal.cols);this._terminal.updateRange(0);break;case 3:var r=this._terminal.buffer.lines.length-this._terminal.rows;r>0&&(this._terminal.buffer.lines.trimStart(r),this._terminal.buffer.ybase=Math.max(this._terminal.buffer.ybase-r,0),this._terminal.buffer.ydisp=Math.max(this._terminal.buffer.ydisp-r,0),this._terminal.emit("scroll",0))}},f.prototype.eraseInLine=function(e){switch(e[0]){case 0:this._eraseInBufferLine(this._terminal.buffer.y,this._terminal.buffer.x,this._terminal.cols);break;case 1:this._eraseInBufferLine(this._terminal.buffer.y,0,this._terminal.buffer.x+1);break;case 2:this._eraseInBufferLine(this._terminal.buffer.y,0,this._terminal.cols)}this._terminal.updateRange(this._terminal.buffer.y)},f.prototype.insertLines=function(e){var t=e[0];t<1&&(t=1);for(var r=this._terminal.buffer,i=r.y+r.ybase,s=this._terminal.rows-1-r.scrollBottom,n=this._terminal.rows-1+r.ybase-s+1;t--;)r.lines.splice(n-1,1),r.lines.splice(i,0,o.BufferLine.blankLine(this._terminal.cols,this._terminal.eraseAttr()));this._terminal.updateRange(r.y),this._terminal.updateRange(r.scrollBottom)},f.prototype.deleteLines=function(e){var t=e[0];t<1&&(t=1);var r,i=this._terminal.buffer,s=i.y+i.ybase;for(r=this._terminal.rows-1-i.scrollBottom,r=this._terminal.rows-1+i.ybase-r;t--;)i.lines.splice(s,1),i.lines.splice(r,0,o.BufferLine.blankLine(this._terminal.cols,this._terminal.eraseAttr()));this._terminal.updateRange(i.y),this._terminal.updateRange(i.scrollBottom)},f.prototype.deleteChars=function(e){this._terminal.buffer.lines.get(this._terminal.buffer.y+this._terminal.buffer.ybase).deleteCells(this._terminal.buffer.x,e[0]||1,[this._terminal.eraseAttr(),i.NULL_CELL_CHAR,i.NULL_CELL_WIDTH,i.NULL_CELL_CODE]),this._terminal.updateRange(this._terminal.buffer.y)},f.prototype.scrollUp=function(e){for(var t=e[0]||1,r=this._terminal.buffer;t--;)r.lines.splice(r.ybase+r.scrollTop,1),r.lines.splice(r.ybase+r.scrollBottom,0,o.BufferLine.blankLine(this._terminal.cols,i.DEFAULT_ATTR));this._terminal.updateRange(r.scrollTop),this._terminal.updateRange(r.scrollBottom)},f.prototype.scrollDown=function(e,t){if(e.length<2&&!t){for(var r=e[0]||1,s=this._terminal.buffer;r--;)s.lines.splice(s.ybase+s.scrollBottom,1),s.lines.splice(s.ybase+s.scrollBottom,0,o.BufferLine.blankLine(this._terminal.cols,i.DEFAULT_ATTR));this._terminal.updateRange(s.scrollTop),this._terminal.updateRange(s.scrollBottom)}},f.prototype.eraseChars=function(e){this._terminal.buffer.lines.get(this._terminal.buffer.y+this._terminal.buffer.ybase).replaceCells(this._terminal.buffer.x,this._terminal.buffer.x+(e[0]||1),[this._terminal.eraseAttr(),i.NULL_CELL_CHAR,i.NULL_CELL_WIDTH,i.NULL_CELL_CODE])},f.prototype.cursorBackwardTab=function(e){for(var t=e[0]||1,r=this._terminal.buffer;t--;)r.x=r.prevStop()},f.prototype.charPosAbsolute=function(e){var t=e[0];t<1&&(t=1),this._terminal.buffer.x=t-1,this._terminal.buffer.x>=this._terminal.cols&&(this._terminal.buffer.x=this._terminal.cols-1)},f.prototype.hPositionRelative=function(e){var t=e[0];t<1&&(t=1),this._terminal.buffer.x+=t,this._terminal.buffer.x>=this._terminal.cols&&(this._terminal.buffer.x=this._terminal.cols-1)},f.prototype.repeatPrecedingCharacter=function(e){var t=this._terminal.buffer,r=t.lines.get(t.ybase+t.y);r.replaceCells(t.x,t.x+(e[0]||1),r.get(t.x-1)||[i.DEFAULT_ATTR,i.NULL_CELL_CHAR,i.NULL_CELL_WIDTH,i.NULL_CELL_CODE])},f.prototype.sendDeviceAttributes=function(e,r){e[0]>0||(r?">"===r&&(this._terminal.is("xterm")?this._terminal.handler(t.C0.ESC+"[>0;276;0c"):this._terminal.is("rxvt-unicode")?this._terminal.handler(t.C0.ESC+"[>85;95;0c"):this._terminal.is("linux")?this._terminal.handler(e[0]+"c"):this._terminal.is("screen")&&this._terminal.handler(t.C0.ESC+"[>83;40003;0c")):this._terminal.is("xterm")||this._terminal.is("rxvt-unicode")||this._terminal.is("screen")?this._terminal.handler(t.C0.ESC+"[?1;2c"):this._terminal.is("linux")&&this._terminal.handler(t.C0.ESC+"[?6c"))},f.prototype.linePosAbsolute=function(e){var t=e[0];t<1&&(t=1),this._terminal.buffer.y=t-1,this._terminal.buffer.y>=this._terminal.rows&&(this._terminal.buffer.y=this._terminal.rows-1)},f.prototype.vPositionRelative=function(e){var t=e[0];t<1&&(t=1),this._terminal.buffer.y+=t,this._terminal.buffer.y>=this._terminal.rows&&(this._terminal.buffer.y=this._terminal.rows-1),this._terminal.buffer.x>=this._terminal.cols&&this._terminal.buffer.x--},f.prototype.hVPosition=function(e){e[0]<1&&(e[0]=1),e[1]<1&&(e[1]=1),this._terminal.buffer.y=e[0]-1,this._terminal.buffer.y>=this._terminal.rows&&(this._terminal.buffer.y=this._terminal.rows-1),this._terminal.buffer.x=e[1]-1,this._terminal.buffer.x>=this._terminal.cols&&(this._terminal.buffer.x=this._terminal.cols-1)},f.prototype.tabClear=function(e){var t=e[0];t<=0?delete this._terminal.buffer.tabs[this._terminal.buffer.x]:3===t&&(this._terminal.buffer.tabs={})},f.prototype.setMode=function(e,t){if(e.length>1)for(var i=0;i<e.length;i++)this.setMode([e[i]]);else if(t){if("?"===t)switch(e[0]){case 1:this._terminal.applicationCursor=!0;break;case 2:this._terminal.setgCharset(0,r.DEFAULT_CHARSET),this._terminal.setgCharset(1,r.DEFAULT_CHARSET),this._terminal.setgCharset(2,r.DEFAULT_CHARSET),this._terminal.setgCharset(3,r.DEFAULT_CHARSET);break;case 3:this._terminal.savedCols=this._terminal.cols,this._terminal.resize(132,this._terminal.rows);break;case 6:this._terminal.originMode=!0;break;case 7:this._terminal.wraparoundMode=!0;break;case 12:break;case 66:this._terminal.log("Serial port requested application keypad."),this._terminal.applicationKeypad=!0,this._terminal.viewport.syncScrollArea();break;case 9:case 1e3:case 1002:case 1003:this._terminal.x10Mouse=9===e[0],this._terminal.vt200Mouse=1e3===e[0],this._terminal.normalMouse=e[0]>1e3,this._terminal.mouseEvents=!0,this._terminal.element.classList.add("enable-mouse-events"),this._terminal.selectionManager.disable(),this._terminal.log("Binding to mouse events.");break;case 1004:this._terminal.sendFocus=!0;break;case 1005:this._terminal.utfMouse=!0;break;case 1006:this._terminal.sgrMouse=!0;break;case 1015:this._terminal.urxvtMouse=!0;break;case 25:this._terminal.cursorHidden=!1;break;case 1049:case 47:case 1047:this._terminal.buffers.activateAltBuffer(),this._terminal.viewport.syncScrollArea(),this._terminal.showCursor();break;case 2004:this._terminal.bracketedPasteMode=!0}}else switch(e[0]){case 4:this._terminal.insertMode=!0}},f.prototype.resetMode=function(e,t){if(e.length>1)for(var r=0;r<e.length;r++)this.resetMode([e[r]]);else if(t){if("?"===t)switch(e[0]){case 1:this._terminal.applicationCursor=!1;break;case 3:132===this._terminal.cols&&this._terminal.savedCols&&this._terminal.resize(this._terminal.savedCols,this._terminal.rows),delete this._terminal.savedCols;break;case 6:this._terminal.originMode=!1;break;case 7:this._terminal.wraparoundMode=!1;break;case 12:break;case 66:this._terminal.log("Switching back to normal keypad."),this._terminal.applicationKeypad=!1,this._terminal.viewport.syncScrollArea();break;case 9:case 1e3:case 1002:case 1003:this._terminal.x10Mouse=!1,this._terminal.vt200Mouse=!1,this._terminal.normalMouse=!1,this._terminal.mouseEvents=!1,this._terminal.element.classList.remove("enable-mouse-events"),this._terminal.selectionManager.enable();break;case 1004:this._terminal.sendFocus=!1;break;case 1005:this._terminal.utfMouse=!1;break;case 1006:this._terminal.sgrMouse=!1;break;case 1015:this._terminal.urxvtMouse=!1;break;case 25:this._terminal.cursorHidden=!0;break;case 1049:case 47:case 1047:this._terminal.buffers.activateNormalBuffer(),this._terminal.refresh(0,this._terminal.rows-1),this._terminal.viewport.syncScrollArea(),this._terminal.showCursor();break;case 2004:this._terminal.bracketedPasteMode=!1}}else switch(e[0]){case 4:this._terminal.insertMode=!1}},f.prototype.charAttributes=function(e){if(1!==e.length||0!==e[0]){for(var t,r=e.length,n=this._terminal.curAttr>>18,a=this._terminal.curAttr>>9&511,l=511&this._terminal.curAttr,o=0;o<r;o++)(t=e[o])>=30&&t<=37?a=t-30:t>=40&&t<=47?l=t-40:t>=90&&t<=97?a=(t+=8)-90:t>=100&&t<=107?l=(t+=8)-100:0===t?(n=i.DEFAULT_ATTR>>18,a=i.DEFAULT_ATTR>>9&511,l=511&i.DEFAULT_ATTR):1===t?n|=s.FLAGS.BOLD:3===t?n|=s.FLAGS.ITALIC:4===t?n|=s.FLAGS.UNDERLINE:5===t?n|=s.FLAGS.BLINK:7===t?n|=s.FLAGS.INVERSE:8===t?n|=s.FLAGS.INVISIBLE:2===t?n|=s.FLAGS.DIM:22===t?(n&=~s.FLAGS.BOLD,n&=~s.FLAGS.DIM):23===t?n&=~s.FLAGS.ITALIC:24===t?n&=~s.FLAGS.UNDERLINE:25===t?n&=~s.FLAGS.BLINK:27===t?n&=~s.FLAGS.INVERSE:28===t?n&=~s.FLAGS.INVISIBLE:39===t?a=i.DEFAULT_ATTR>>9&511:49===t?l=511&i.DEFAULT_ATTR:38===t?2===e[o+1]?(o+=2,-1===(a=this._terminal.matchColor(255&e[o],255&e[o+1],255&e[o+2]))&&(a=511),o+=2):5===e[o+1]&&(a=t=255&e[o+=2]):48===t?2===e[o+1]?(o+=2,-1===(l=this._terminal.matchColor(255&e[o],255&e[o+1],255&e[o+2]))&&(l=511),o+=2):5===e[o+1]&&(l=t=255&e[o+=2]):100===t?(a=i.DEFAULT_ATTR>>9&511,l=511&i.DEFAULT_ATTR):this._terminal.error("Unknown SGR attribute: %d.",t);this._terminal.curAttr=n<<18|a<<9|l}else this._terminal.curAttr=i.DEFAULT_ATTR},f.prototype.deviceStatus=function(e,r){if(r){if("?"===r)switch(e[0]){case 6:i=this._terminal.buffer.y+1,s=this._terminal.buffer.x+1;this._terminal.emit("data",t.C0.ESC+"[?"+i+";"+s+"R")}}else switch(e[0]){case 5:this._terminal.emit("data",t.C0.ESC+"[0n");break;case 6:var i=this._terminal.buffer.y+1,s=this._terminal.buffer.x+1;this._terminal.emit("data",t.C0.ESC+"["+i+";"+s+"R")}},f.prototype.softReset=function(e,t){"!"===t&&(this._terminal.cursorHidden=!1,this._terminal.insertMode=!1,this._terminal.originMode=!1,this._terminal.wraparoundMode=!0,this._terminal.applicationKeypad=!1,this._terminal.viewport.syncScrollArea(),this._terminal.applicationCursor=!1,this._terminal.buffer.scrollTop=0,this._terminal.buffer.scrollBottom=this._terminal.rows-1,this._terminal.curAttr=i.DEFAULT_ATTR,this._terminal.buffer.x=this._terminal.buffer.y=0,this._terminal.charset=null,this._terminal.glevel=0,this._terminal.charsets=[null])},f.prototype.setCursorStyle=function(e,t){if(" "===t){var r=e[0]<1?1:e[0];switch(r){case 1:case 2:this._terminal.setOption("cursorStyle","block");break;case 3:case 4:this._terminal.setOption("cursorStyle","underline");break;case 5:case 6:this._terminal.setOption("cursorStyle","bar")}var i=r%2==1;this._terminal.setOption("cursorBlink",i)}},f.prototype.setScrollRegion=function(e,t){t||(this._terminal.buffer.scrollTop=(e[0]||1)-1,this._terminal.buffer.scrollBottom=(e[1]&&e[1]<=this._terminal.rows?e[1]:this._terminal.rows)-1,this._terminal.buffer.x=0,this._terminal.buffer.y=0)},f.prototype.saveCursor=function(e){this._terminal.buffer.savedX=this._terminal.buffer.x,this._terminal.buffer.savedY=this._terminal.buffer.y,this._terminal.savedCurAttr=this._terminal.curAttr},f.prototype.restoreCursor=function(e){this._terminal.buffer.x=this._terminal.buffer.savedX||0,this._terminal.buffer.y=this._terminal.buffer.savedY||0,this._terminal.curAttr=this._terminal.savedCurAttr||i.DEFAULT_ATTR},f.prototype.setTitle=function(e){this._terminal.handleTitle(e)},f.prototype.nextLine=function(){this._terminal.buffer.x=0,this.index()},f.prototype.keypadApplicationMode=function(){this._terminal.log("Serial port requested application keypad."),this._terminal.applicationKeypad=!0,this._terminal.viewport&&this._terminal.viewport.syncScrollArea()},f.prototype.keypadNumericMode=function(){this._terminal.log("Switching back to normal keypad."),this._terminal.applicationKeypad=!1,this._terminal.viewport&&this._terminal.viewport.syncScrollArea()},f.prototype.selectDefaultCharset=function(){this._terminal.setgLevel(0),this._terminal.setgCharset(0,r.DEFAULT_CHARSET)},f.prototype.selectCharset=function(e){if(2!==e.length)return this.selectDefaultCharset();"/"!==e[0]&&this._terminal.setgCharset(u[e[0]],r.CHARSETS[e[1]]||r.DEFAULT_CHARSET)},f.prototype.index=function(){this._terminal.index()},f.prototype.tabSet=function(){this._terminal.tabSet()},f.prototype.reverseIndex=function(){this._terminal.reverseIndex()},f.prototype.reset=function(){this._parser.reset(),this._terminal.reset()},f.prototype.setgLevel=function(e){this._terminal.setgLevel(e)},f}(l.Disposable);exports.InputHandler=f;
},{"./common/data/EscapeSequences":"xnQp","./core/data/Charsets":"6f5g","./Buffer":"nJkY","./renderer/Types":"lZiw","./CharWidth":"6Lzu","./EscapeSequenceParser":"k6J0","./common/Lifecycle":"VtE8","./BufferLine":"dDZ9"}],"LQXW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.INVERTED_DEFAULT_COLOR=-1,exports.DIM_OPACITY=.5;
},{}],"3JPA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(){this.cache=[]}return e.prototype.resize=function(e,t){for(var h=0;h<e;h++){this.cache.length<=h&&this.cache.push([]);for(var c=this.cache[h].length;c<t;c++)this.cache[h].push(null);this.cache[h].length=t}this.cache.length=e},e.prototype.clear=function(){for(var e=0;e<this.cache.length;e++)for(var t=0;t<this.cache[e].length;t++)this.cache[e][t]=null},e}();exports.GridCache=e;
},{}],"spzq":[function(require,module,exports) {
"use strict";function o(o,e,n,t){var r={foreground:t.foreground,background:t.background,cursor:null,cursorAccent:null,selection:null,ansi:t.ansi.slice(0,16)};return{type:n.options.experimentalCharAtlas,devicePixelRatio:window.devicePixelRatio,scaledCharWidth:o,scaledCharHeight:e,fontFamily:n.options.fontFamily,fontSize:n.options.fontSize,fontWeight:n.options.fontWeight,fontWeightBold:n.options.fontWeightBold,allowTransparency:n.options.allowTransparency,colors:r}}function e(o,e){for(var n=0;n<o.colors.ansi.length;n++)if(o.colors.ansi[n].rgba!==e.colors.ansi[n].rgba)return!1;return o.type===e.type&&o.devicePixelRatio===e.devicePixelRatio&&o.fontFamily===e.fontFamily&&o.fontSize===e.fontSize&&o.fontWeight===e.fontWeight&&o.fontWeightBold===e.fontWeightBold&&o.allowTransparency===e.allowTransparency&&o.scaledCharWidth===e.scaledCharWidth&&o.scaledCharHeight===e.scaledCharHeight&&o.colors.foreground===e.colors.foreground&&o.colors.background===e.colors.background}Object.defineProperty(exports,"__esModule",{value:!0}),exports.generateConfig=o,exports.configEquals=e;
},{}],"5e5Z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(){this._didWarmUp=!1}return t.prototype.dispose=function(){},t.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},t.prototype._doWarmUp=function(){},t.prototype.beginFrame=function(){},t}();exports.default=t;
},{}],"9RWO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var s=i("#ffffff"),r=i("#000000"),o=i("#ffffff"),t=i("#000000"),e={css:"rgba(255, 255, 255, 0.3)",rgba:4294967159};function i(s){return{css:s,rgba:parseInt(s.slice(1),16)<<8|255}}function a(s){var r=s.toString(16);return r.length<2?"0"+r:r}exports.DEFAULT_ANSI_COLORS=function(){for(var s=[i("#2e3436"),i("#cc0000"),i("#4e9a06"),i("#c4a000"),i("#3465a4"),i("#75507b"),i("#06989a"),i("#d3d7cf"),i("#555753"),i("#ef2929"),i("#8ae234"),i("#fce94f"),i("#729fcf"),i("#ad7fa8"),i("#34e2e2"),i("#eeeeec")],r=[0,95,135,175,215,255],o=0;o<216;o++){var t=r[o/36%6|0],e=r[o/6%6|0],l=r[o%6];s.push({css:"#"+a(t)+a(e)+a(l),rgba:(t<<24|e<<16|l<<8|255)>>>0})}for(o=0;o<24;o++){var c=8+10*o,n=a(c);s.push({css:"#"+n+n+n,rgba:(c<<24|c<<16|c<<8|255)>>>0})}return s}();var l=function(){function i(i,a){this.allowTransparency=a;var l=i.createElement("canvas");l.width=1,l.height=1,this._ctx=l.getContext("2d"),this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this.colors={foreground:s,background:r,cursor:o,cursorAccent:t,selection:e,ansi:exports.DEFAULT_ANSI_COLORS.slice()}}return i.prototype.setTheme=function(i){this.colors.foreground=this._parseColor(i.foreground,s),this.colors.background=this._parseColor(i.background,r),this.colors.cursor=this._parseColor(i.cursor,o,!0),this.colors.cursorAccent=this._parseColor(i.cursorAccent,t,!0),this.colors.selection=this._parseColor(i.selection,e,!0),this.colors.ansi[0]=this._parseColor(i.black,exports.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(i.red,exports.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(i.green,exports.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(i.yellow,exports.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(i.blue,exports.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(i.magenta,exports.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(i.cyan,exports.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(i.white,exports.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(i.brightBlack,exports.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(i.brightRed,exports.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(i.brightGreen,exports.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(i.brightYellow,exports.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(i.brightBlue,exports.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(i.brightMagenta,exports.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(i.brightCyan,exports.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(i.brightWhite,exports.DEFAULT_ANSI_COLORS[15])},i.prototype._parseColor=function(s,r,o){if(void 0===o&&(o=this.allowTransparency),!s)return r;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=s,"string"!=typeof this._ctx.fillStyle)return console.warn("Color: "+s+" is invalid using fallback "+r.css),r;this._ctx.fillRect(0,0,1,1);var t=this._ctx.getImageData(0,0,1,1).data;return o||255===t[3]?{css:s,rgba:(t[0]<<24|t[1]<<16|t[2]<<8|t[3])>>>0}:(console.warn("Color: "+s+" is using transparency, but allowTransparency is false. Using fallback "+r.css+"."),r)},i}();exports.ColorManager=l;
},{}],"Uj/q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CHAR_ATLAS_CELL_SPACING=1;
},{}],"/tmL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e="undefined"==typeof navigator,i=e?"node":navigator.userAgent,n=e?"node":navigator.platform;function o(e,i){return e.indexOf(i)>=0}exports.isFirefox=!!~i.indexOf("Firefox"),exports.isSafari=/^((?!chrome|android).)*safari/i.test(i),exports.isMSIE=!!~i.indexOf("MSIE")||!!~i.indexOf("Trident"),exports.isMac=o(["Macintosh","MacIntel","MacPPC","Mac68K"],n),exports.isIpad="iPad"===n,exports.isIphone="iPhone"===n,exports.isMSWindows=o(["Windows","Win16","Win32","WinCE"],n),exports.isLinux=n.indexOf("Linux")>=0;
},{}],"jdPj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./Types"),r=require("../utils/Browser");function t(t,i,n){var l=n.scaledCharWidth+e.CHAR_ATLAS_CELL_SPACING,s=n.scaledCharHeight+e.CHAR_ATLAS_CELL_SPACING,f=i(255*l,34*s),c=f.getContext("2d",{alpha:n.allowTransparency});c.fillStyle=n.colors.background.css,c.fillRect(0,0,f.width,f.height),c.save(),c.fillStyle=n.colors.foreground.css,c.font=o(n.fontWeight,n),c.textBaseline="top";for(var g=0;g<256;g++)c.save(),c.beginPath(),c.rect(g*l,0,l,s),c.clip(),c.fillText(String.fromCharCode(g),g*l,0),c.restore();c.save(),c.font=o(n.fontWeightBold,n);for(g=0;g<256;g++)c.save(),c.beginPath(),c.rect(g*l,s,l,s),c.clip(),c.fillText(String.fromCharCode(g),g*l,s),c.restore();c.restore(),c.font=o(n.fontWeight,n);for(var h=0;h<16;h++){var d=(h+2)*s;for(g=0;g<256;g++)c.save(),c.beginPath(),c.rect(g*l,d,l,s),c.clip(),c.fillStyle=n.colors.ansi[h].css,c.fillText(String.fromCharCode(g),g*l,d),c.restore()}c.font=o(n.fontWeightBold,n);for(h=0;h<16;h++)for(d=(h+2+16)*s,g=0;g<256;g++)c.save(),c.beginPath(),c.rect(g*l,d,l,s),c.clip(),c.fillStyle=n.colors.ansi[h].css,c.fillText(String.fromCharCode(g),g*l,d),c.restore();if(c.restore(),!("createImageBitmap"in t)||r.isFirefox||r.isSafari)return f instanceof HTMLCanvasElement?f:new Promise(function(e){return e(f.transferToImageBitmap())});var C=c.getImageData(0,0,f.width,f.height);return a(C,n.colors.background),t.createImageBitmap(C)}function a(e,r){for(var t=!0,a=r.rgba>>>24,o=r.rgba>>>16&255,i=r.rgba>>>8&255,n=0;n<e.data.length;n+=4)e.data[n]===a&&e.data[n+1]===o&&e.data[n+2]===i?e.data[n+3]=0:t=!1;return t}function o(e,r){return e+" "+r.fontSize*r.devicePixelRatio+"px "+r.fontFamily}exports.generateStaticCharAtlasTexture=t,exports.clearColor=a;
},{"./Types":"Uj/q","../utils/Browser":"/tmL"}],"3zpl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e){this.capacity=e,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return e.prototype._unlinkNode=function(e){var t=e.prev,l=e.next;e===this._head&&(this._head=l),e===this._tail&&(this._tail=t),null!==t&&(t.next=l),null!==l&&(l.prev=t)},e.prototype._appendNode=function(e){var t=this._tail;null!==t&&(t.next=e),e.prev=t,e.next=null,this._tail=e,null===this._head&&(this._head=e)},e.prototype.prealloc=function(e){for(var t=this._nodePool,l=0;l<e;l++)t.push({prev:null,next:null,key:null,value:null})},e.prototype.get=function(e){var t=this._map[e];return void 0!==t?(this._unlinkNode(t),this._appendNode(t),t.value):null},e.prototype.peekValue=function(e){var t=this._map[e];return void 0!==t?t.value:null},e.prototype.peek=function(){var e=this._head;return null===e?null:e.value},e.prototype.set=function(e,t){var l=this._map[e];if(void 0!==l)l=this._map[e],this._unlinkNode(l),l.value=t;else if(this.size>=this.capacity)l=this._head,this._unlinkNode(l),delete this._map[l.key],l.key=e,l.value=t,this._map[e]=l;else{var i=this._nodePool;i.length>0?((l=i.pop()).key=e,l.value=t):l={prev:null,next:null,key:e,value:t},this._map[e]=l,this.size++}this._appendNode(l)},e}();exports.default=e;
},{}],"p5c+":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(i,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])})(i,o)};return function(i,o){function e(){this.constructor=i}t(i,o),i.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}(),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var o=require("./Types"),e=i(require("./BaseCharAtlas")),a=require("../ColorManager"),r=require("../../shared/atlas/CharAtlasGenerator"),n=i(require("./LRUMap")),h=require("../../shared/utils/Browser"),s=1024,c=1024,_={css:"rgba(0, 0, 0, 0)",rgba:0},p=100,l=100;function g(t){return t.code<<21|t.bg<<12|t.fg<<3|(t.bold?0:4)+(t.dim?0:2)+(t.italic?0:1)}var u=function(i){function e(t,o){var e=i.call(this)||this;e._config=o,e._drawToCacheCount=0,e._glyphsWaitingOnBitmap=[],e._bitmapCommitTimeout=null,e._bitmap=null,e._cacheCanvas=t.createElement("canvas"),e._cacheCanvas.width=s,e._cacheCanvas.height=c,e._cacheCtx=e._cacheCanvas.getContext("2d",{alpha:!0});var a=t.createElement("canvas");a.width=e._config.scaledCharWidth,a.height=e._config.scaledCharHeight,e._tmpCtx=a.getContext("2d",{alpha:e._config.allowTransparency}),e._width=Math.floor(s/e._config.scaledCharWidth),e._height=Math.floor(c/e._config.scaledCharHeight);var r=e._width*e._height;return e._cacheMap=new n.default(r),e._cacheMap.prealloc(r),e}return t(e,i),e.prototype.dispose=function(){null!==this._bitmapCommitTimeout&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},e.prototype.beginFrame=function(){this._drawToCacheCount=0},e.prototype.draw=function(t,i,o,e){if(32===i.code)return!0;var a=g(i),r=this._cacheMap.get(a);if(null!=r)return this._drawFromCache(t,r,o,e),!0;if(this._canCache(i)&&this._drawToCacheCount<p){var n=void 0;n=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var h=this._drawToCache(i,n);return this._cacheMap.set(a,h),this._drawFromCache(t,h,o,e),!0}return!1},e.prototype._canCache=function(t){return t.code<256},e.prototype._toCoordinateX=function(t){return t%this._width*this._config.scaledCharWidth},e.prototype._toCoordinateY=function(t){return Math.floor(t/this._width)*this._config.scaledCharHeight},e.prototype._drawFromCache=function(t,i,o,e){if(!i.isEmpty){var a=this._toCoordinateX(i.index),r=this._toCoordinateY(i.index);t.drawImage(i.inBitmap?this._bitmap:this._cacheCanvas,a,r,this._config.scaledCharWidth,this._config.scaledCharHeight,o,e,this._config.scaledCharWidth,this._config.scaledCharHeight)}},e.prototype._getColorFromAnsiIndex=function(t){return t<this._config.colors.ansi.length?this._config.colors.ansi[t]:a.DEFAULT_ANSI_COLORS[t]},e.prototype._getBackgroundColor=function(t){return this._config.allowTransparency?_:t.bg===o.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:t.bg<256?this._getColorFromAnsiIndex(t.bg):this._config.colors.background},e.prototype._getForegroundColor=function(t){return t.fg===o.INVERTED_DEFAULT_COLOR?this._config.colors.background:t.fg<256?this._getColorFromAnsiIndex(t.fg):this._config.colors.foreground},e.prototype._drawToCache=function(t,i){this._drawToCacheCount++,this._tmpCtx.save();var e=this._getBackgroundColor(t);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=e.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var a=t.bold?this._config.fontWeightBold:this._config.fontWeight,n=t.italic?"italic":"";this._tmpCtx.font=n+" "+a+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline="top",this._tmpCtx.fillStyle=this._getForegroundColor(t).css,t.dim&&(this._tmpCtx.globalAlpha=o.DIM_OPACITY),this._tmpCtx.fillText(t.chars,0,0),this._tmpCtx.restore();var h=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),s=!1;this._config.allowTransparency||(s=r.clearColor(h,e));var c=this._toCoordinateX(i),_=this._toCoordinateY(i);this._cacheCtx.putImageData(h,c,_);var p={index:i,isEmpty:s,inBitmap:!1};return this._addGlyphToBitmap(p),p},e.prototype._addGlyphToBitmap=function(t){var i=this;"createImageBitmap"in window&&!h.isFirefox&&!h.isSafari&&(this._glyphsWaitingOnBitmap.push(t),null===this._bitmapCommitTimeout&&(this._bitmapCommitTimeout=window.setTimeout(function(){return i._generateBitmap()},l)))},e.prototype._generateBitmap=function(){var t=this,i=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(o){t._bitmap=o;for(var e=0;e<i.length;e++){i[e].inBitmap=!0}}),this._bitmapCommitTimeout=null},e}(e.default);exports.default=u;
},{"./Types":"LQXW","./BaseCharAtlas":"5e5Z","../ColorManager":"9RWO","../../shared/atlas/CharAtlasGenerator":"jdPj","./LRUMap":"3zpl","../../shared/utils/Browser":"/tmL"}],"zngU":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function n(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var e=r(require("./BaseCharAtlas")),n=function(r){function e(t,e){return r.call(this)||this}return t(e,r),e.prototype.draw=function(t,r,e,n){return!1},e}(e.default);exports.default=n;
},{"./BaseCharAtlas":"5e5Z"}],"gJee":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./Types"),n=require("../../shared/atlas/Types"),a=require("../../shared/atlas/CharAtlasGenerator"),i=e(require("./BaseCharAtlas")),o=function(e){function i(t,r){var n=e.call(this)||this;return n._document=t,n._config=r,n._canvasFactory=function(t,e){var r=n._document.createElement("canvas");return r.width=t,r.height=e,r},n}return t(i,e),i.prototype._doWarmUp=function(){var t=this,e=a.generateStaticCharAtlasTexture(window,this._canvasFactory,this._config);e instanceof HTMLCanvasElement?this._texture=e:e.then(function(e){t._texture=e})},i.prototype._isCached=function(t,e){var r=t.code<256,n=t.fg<16,a=t.fg>=256,i=t.bg>=256;return r&&(n||a)&&i&&!t.italic},i.prototype.draw=function(t,e,a,i){if(null===this._texture||void 0===this._texture)return!1;var o=0;if(e.fg<256?o=2+e.fg+(e.bold?16:0):e.bold&&(o=1),!this._isCached(e,o))return!1;t.save();var s=this._config.scaledCharWidth+n.CHAR_ATLAS_CELL_SPACING,c=this._config.scaledCharHeight+n.CHAR_ATLAS_CELL_SPACING;return e.dim&&(t.globalAlpha=r.DIM_OPACITY),t.drawImage(this._texture,e.code*s,o*c,s,this._config.scaledCharHeight,a,i,s,this._config.scaledCharHeight),t.restore(),!0},i}(i.default);exports.default=o;
},{"./Types":"LQXW","../../shared/atlas/Types":"Uj/q","../../shared/atlas/CharAtlasGenerator":"jdPj","./BaseCharAtlas":"5e5Z"}],"U7kw":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./CharAtlasUtils"),a=e(require("./DynamicCharAtlas")),t=e(require("./NoneCharAtlas")),n=e(require("./StaticCharAtlas")),i={none:t.default,static:n.default,dynamic:a.default},o=[];function l(e,a,t,n){for(var l=r.generateConfig(t,n,e,a),s=0;s<o.length;s++){var u=(f=o[s]).ownedBy.indexOf(e);if(u>=0){if(r.configEquals(f.config,l))return f.atlas;1===f.ownedBy.length?o.splice(s,1):f.ownedBy.splice(u,1);break}}for(s=0;s<o.length;s++){var f=o[s];if(r.configEquals(f.config,l))return f.ownedBy.push(e),f.atlas}var c={atlas:new i[e.options.experimentalCharAtlas](document,l),config:l,ownedBy:[e]};return o.push(c),c.atlas}function s(e){for(var r=0;r<o.length;r++){var a=o[r].ownedBy.indexOf(e);if(-1!==a){1===o[r].ownedBy.length?o.splice(r,1):o[r].ownedBy.splice(a,1);break}}}exports.acquireCharAtlas=l,exports.removeTerminalFromCache=s;
},{"./CharAtlasUtils":"spzq","./DynamicCharAtlas":"p5c+","./NoneCharAtlas":"zngU","./StaticCharAtlas":"gJee"}],"SM14":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./atlas/Types"),i=require("./atlas/CharAtlasCache"),e=require("../Buffer"),s=function(){function s(t,i,e,s,h){this._container=t,this._alpha=s,this._colors=h,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+i+"-layer"),this._canvas.style.zIndex=e.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return s.prototype.dispose=function(){this._container.removeChild(this._canvas),this._charAtlas&&this._charAtlas.dispose()},s.prototype._initCanvas=function(){this._ctx=this._canvas.getContext("2d",{alpha:this._alpha}),this._alpha||this.clearAll()},s.prototype.onOptionsChanged=function(t){},s.prototype.onBlur=function(t){},s.prototype.onFocus=function(t){},s.prototype.onCursorMove=function(t){},s.prototype.onGridChanged=function(t,i,e){},s.prototype.onSelectionChanged=function(t,i,e,s){void 0===s&&(s=!1)},s.prototype.onThemeChanged=function(t,i){this._refreshCharAtlas(t,i)},s.prototype.setTransparency=function(t,i){if(i!==this._alpha){var e=this._canvas;this._alpha=i,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,e),this._refreshCharAtlas(t,this._colors),this.onGridChanged(t,0,t.rows-1)}},s.prototype._refreshCharAtlas=function(t,e){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=i.acquireCharAtlas(t,e,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},s.prototype.resize=function(t,i){this._scaledCellWidth=i.scaledCellWidth,this._scaledCellHeight=i.scaledCellHeight,this._scaledCharWidth=i.scaledCharWidth,this._scaledCharHeight=i.scaledCharHeight,this._scaledCharLeft=i.scaledCharLeft,this._scaledCharTop=i.scaledCharTop,this._canvas.width=i.scaledCanvasWidth,this._canvas.height=i.scaledCanvasHeight,this._canvas.style.width=i.canvasWidth+"px",this._canvas.style.height=i.canvasHeight+"px",this._alpha||this.clearAll(),this._refreshCharAtlas(t,this._colors)},s.prototype.fillCells=function(t,i,e,s){this._ctx.fillRect(t*this._scaledCellWidth,i*this._scaledCellHeight,e*this._scaledCellWidth,s*this._scaledCellHeight)},s.prototype.fillBottomLineAtCells=function(t,i,e){void 0===e&&(e=1),this._ctx.fillRect(t*this._scaledCellWidth,(i+1)*this._scaledCellHeight-window.devicePixelRatio-1,e*this._scaledCellWidth,window.devicePixelRatio)},s.prototype.fillLeftLineAtCell=function(t,i){this._ctx.fillRect(t*this._scaledCellWidth,i*this._scaledCellHeight,window.devicePixelRatio,this._scaledCellHeight)},s.prototype.strokeRectAtCell=function(t,i,e,s){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(t*this._scaledCellWidth+window.devicePixelRatio/2,i*this._scaledCellHeight+window.devicePixelRatio/2,e*this._scaledCellWidth-window.devicePixelRatio,s*this._scaledCellHeight-window.devicePixelRatio)},s.prototype.clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},s.prototype.clearCells=function(t,i,e,s){this._alpha?this._ctx.clearRect(t*this._scaledCellWidth,i*this._scaledCellHeight,e*this._scaledCellWidth,s*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(t*this._scaledCellWidth,i*this._scaledCellHeight,e*this._scaledCellWidth,s*this._scaledCellHeight))},s.prototype.fillCharTrueColor=function(t,i,s,h){this._ctx.font=this._getFont(t,!1,!1),this._ctx.textBaseline="top",this._clipRow(t,h),this._ctx.fillText(i[e.CHAR_DATA_CHAR_INDEX],s*this._scaledCellWidth+this._scaledCharLeft,h*this._scaledCellHeight+this._scaledCharTop)},s.prototype.drawChars=function(i,e,s,h,l,a,c,o,n,r,d){c+=i.options.drawBoldTextInBrightColors&&n&&c<8&&c!==t.INVERTED_DEFAULT_COLOR?8:0,this._currentGlyphIdentifier.chars=e,this._currentGlyphIdentifier.code=s,this._currentGlyphIdentifier.bg=o,this._currentGlyphIdentifier.fg=c,this._currentGlyphIdentifier.bold=n&&i.options.enableBold,this._currentGlyphIdentifier.dim=r,this._currentGlyphIdentifier.italic=d,this._charAtlas&&this._charAtlas.draw(this._ctx,this._currentGlyphIdentifier,l*this._scaledCellWidth+this._scaledCharLeft,a*this._scaledCellHeight+this._scaledCharTop)||this._drawUncachedChars(i,e,h,c,l,a,n&&i.options.enableBold,r,d)},s.prototype._drawUncachedChars=function(i,e,s,h,l,a,c,o,n){this._ctx.save(),this._ctx.font=this._getFont(i,c,n),this._ctx.textBaseline="top",h===t.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:this._ctx.fillStyle=h<256?this._colors.ansi[h].css:this._colors.foreground.css,this._clipRow(i,a),o&&(this._ctx.globalAlpha=t.DIM_OPACITY),this._ctx.fillText(e,l*this._scaledCellWidth+this._scaledCharLeft,a*this._scaledCellHeight+this._scaledCharTop),this._ctx.restore()},s.prototype._clipRow=function(t,i){this._ctx.beginPath(),this._ctx.rect(0,i*this._scaledCellHeight,t.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},s.prototype._getFont=function(t,i,e){return(e?"italic":"")+" "+(i?t.options.fontWeightBold:t.options.fontWeight)+" "+t.options.fontSize*window.devicePixelRatio+"px "+t.options.fontFamily},s}();exports.BaseRenderLayer=s;
},{"./atlas/Types":"LQXW","./atlas/CharAtlasCache":"U7kw","../Buffer":"nJkY"}],"TXoM":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function a(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}}();Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../Buffer"),e=require("./Types"),a=require("./atlas/Types"),s=require("./GridCache"),i=require("./BaseRenderLayer"),o=function(i){function o(t,r,e,a,o){var c=i.call(this,t,"text",r,o,e)||this;return c._characterOverlapCache={},c._state=new s.GridCache,c._characterJoinerRegistry=a,c}return t(o,i),o.prototype.resize=function(t,r){i.prototype.resize.call(this,t,r);var e=this._getFont(t,!1,!1);this._characterWidth===r.scaledCharWidth&&this._characterFont===e||(this._characterWidth=r.scaledCharWidth,this._characterFont=e,this._characterOverlapCache={}),this._state.clear(),this._state.resize(t.cols,t.rows)},o.prototype.reset=function(t){this._state.clear(),this.clearAll()},o.prototype._forEachCell=function(t,s,i,o,c){for(var n=s;n<=i;n++)for(var l=n+t.buffer.ydisp,_=t.buffer.lines.get(l),h=o?o.getJoinedCharacters(l):[],f=0;f<t.cols;f++){var u=_.get(f),p=u[r.CHAR_DATA_CODE_INDEX],A=u[r.CHAR_DATA_CHAR_INDEX],C=u[r.CHAR_DATA_ATTR_INDEX],d=u[r.CHAR_DATA_WIDTH_INDEX],D=!1,E=f;if(0!==d){if(h.length>0&&f===h[0][0]){D=!0;var y=h.shift();A=t.buffer.translateBufferLineToString(l,!0,y[0],y[1]),d=y[1]-y[0],p=1/0,E=y[1]-1}!D&&this._isOverlapping(u)&&E<_.length-1&&_.get(E+1)[r.CHAR_DATA_CODE_INDEX]===r.NULL_CELL_CODE&&(d=2);var v=C>>18,T=511&C,L=C>>9&511;if(v&e.FLAGS.INVERSE){var O=T;T=L,256===(L=O)&&(L=a.INVERTED_DEFAULT_COLOR),257===T&&(T=a.INVERTED_DEFAULT_COLOR)}c(p,A,d,f,n,L,T,v),f=E}}},o.prototype._drawBackground=function(t,r,e){var s=this,i=this._ctx,o=t.cols,c=0,n=0,l=null;i.save(),this._forEachCell(t,r,e,null,function(t,r,e,_,h,f,u,p){var A=null;u===a.INVERTED_DEFAULT_COLOR?A=s._colors.foreground.css:u<256&&(A=s._colors.ansi[u].css),null===l&&(c=_,n=h),h!==n?(i.fillStyle=l,s.fillCells(c,n,o-c,1),c=_,n=h):l!==A&&(i.fillStyle=l,s.fillCells(c,n,_-c,1),c=_,n=h),l=A}),null!==l&&(i.fillStyle=l,this.fillCells(c,n,o-c,1)),i.restore()},o.prototype._drawForeground=function(t,r,s){var i=this;this._forEachCell(t,r,s,this._characterJoinerRegistry,function(r,s,o,c,n,l,_,h){h&e.FLAGS.INVISIBLE||(h&e.FLAGS.UNDERLINE&&(i._ctx.save(),l===a.INVERTED_DEFAULT_COLOR?i._ctx.fillStyle=i._colors.background.css:i._ctx.fillStyle=l<256?i._colors.ansi[l].css:i._colors.foreground.css,i.fillBottomLineAtCells(c,n,o),i._ctx.restore()),i.drawChars(t,s,r,o,c,n,l,_,!!(h&e.FLAGS.BOLD),!!(h&e.FLAGS.DIM),!!(h&e.FLAGS.ITALIC)))})},o.prototype.onGridChanged=function(t,r,e){0!==this._state.cache.length&&(this._charAtlas&&this._charAtlas.beginFrame(),this.clearCells(0,r,t.cols,e-r+1),this._drawBackground(t,r,e),this._drawForeground(t,r,e))},o.prototype.onOptionsChanged=function(t){this.setTransparency(t,t.options.allowTransparency)},o.prototype._isOverlapping=function(t){if(1!==t[r.CHAR_DATA_WIDTH_INDEX])return!1;if(t[r.CHAR_DATA_CODE_INDEX]<256)return!1;var e=t[r.CHAR_DATA_CHAR_INDEX];if(this._characterOverlapCache.hasOwnProperty(e))return this._characterOverlapCache[e];this._ctx.save(),this._ctx.font=this._characterFont;var a=Math.floor(this._ctx.measureText(e).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[e]=a,a},o}(i.BaseRenderLayer);exports.TextRenderLayer=o;
},{"../Buffer":"nJkY","./Types":"lZiw","./atlas/Types":"LQXW","./GridCache":"3JPA","./BaseRenderLayer":"SM14"}],"xczP":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,s){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s])})(e,s)};return function(e,s){function r(){this.constructor=e}t(e,s),e.prototype=null===s?Object.create(s):(r.prototype=s.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./BaseRenderLayer"),s=function(e){function s(t,s,r){var i=e.call(this,t,"selection",s,!0,r)||this;return i._clearState(),i}return t(s,e),s.prototype._clearState=function(){this._state={start:null,end:null,columnSelectMode:null,ydisp:null}},s.prototype.resize=function(t,s){e.prototype.resize.call(this,t,s),this._clearState()},s.prototype.reset=function(t){this._state.start&&this._state.end&&(this._clearState(),this.clearAll())},s.prototype.onSelectionChanged=function(t,e,s,r){if(this._didStateChange(e,s,r,t.buffer.ydisp)&&(this.clearAll(),e&&s)){var i=e[1]-t.buffer.ydisp,o=s[1]-t.buffer.ydisp,n=Math.max(i,0),a=Math.min(o,t.rows-1);if(!(n>=t.rows||a<0)){if(this._ctx.fillStyle=this._colors.selection.css,r){var l=e[0],c=s[0]-l,u=a-n+1;this.fillCells(l,n,c,u)}else{l=i===n?e[0]:0;var h=n===a?s[0]:t.cols;this.fillCells(l,n,h-l,1);var f=Math.max(a-n-1,0);if(this.fillCells(0,n+1,t.cols,f),n!==a){var p=o===a?s[0]:t.cols;this.fillCells(0,a,p,1)}}this._state.start=[e[0],e[1]],this._state.end=[s[0],s[1]],this._state.columnSelectMode=r,this._state.ydisp=t.buffer.ydisp}}},s.prototype._didStateChange=function(t,e,s,r){return!this._areCoordinatesEqual(t,this._state.start)||!this._areCoordinatesEqual(e,this._state.end)||s!==this._state.columnSelectMode||r!==this._state.ydisp},s.prototype._areCoordinatesEqual=function(t,e){return!(!t||!e)&&(t[0]===e[0]&&t[1]===e[1])},s}(e.BaseRenderLayer);exports.SelectionRenderLayer=s;
},{"./BaseRenderLayer":"SM14"}],"W3ei":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../Buffer"),r=require("./BaseRenderLayer"),i=600,s=function(r){function i(t,e,i){var s=r.call(this,t,"cursor",e,!0,i)||this;return s._state={x:null,y:null,isFocused:null,style:null,width:null},s._cursorRenderers={bar:s._renderBarCursor.bind(s),block:s._renderBlockCursor.bind(s),underline:s._renderUnderlineCursor.bind(s)},s}return t(i,r),i.prototype.resize=function(t,e){r.prototype.resize.call(this,t,e),this._state={x:null,y:null,isFocused:null,style:null,width:null}},i.prototype.reset=function(t){this._clearCursor(),this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=null,this.onOptionsChanged(t))},i.prototype.onBlur=function(t){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.pause(),t.refresh(t.buffer.y,t.buffer.y)},i.prototype.onFocus=function(t){this._cursorBlinkStateManager?this._cursorBlinkStateManager.resume(t):t.refresh(t.buffer.y,t.buffer.y)},i.prototype.onOptionsChanged=function(t){var e=this;t.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new n(t,function(){e._render(t,!0)})):(this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=null),t.refresh(t.buffer.y,t.buffer.y))},i.prototype.onCursorMove=function(t){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.restartBlinkAnimation(t)},i.prototype.onGridChanged=function(t,e,r){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(t,!1):this._cursorBlinkStateManager.restartBlinkAnimation(t)},i.prototype._render=function(t,r){if(t.cursorState&&!t.cursorHidden){var i=t.buffer.ybase+t.buffer.y,s=i-t.buffer.ydisp;if(s<0||s>=t.rows)this._clearCursor();else{var n=t.buffer.lines.get(i).get(t.buffer.x);if(n){if(!t.isFocused)return this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._renderBlurCursor(t,t.buffer.x,s,n),this._ctx.restore(),this._state.x=t.buffer.x,this._state.y=s,this._state.isFocused=!1,this._state.style=t.options.cursorStyle,void(this._state.width=n[e.CHAR_DATA_WIDTH_INDEX]);if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===t.buffer.x&&this._state.y===s&&this._state.isFocused===t.isFocused&&this._state.style===t.options.cursorStyle&&this._state.width===n[e.CHAR_DATA_WIDTH_INDEX])return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[t.options.cursorStyle||"block"](t,t.buffer.x,s,n),this._ctx.restore(),this._state.x=t.buffer.x,this._state.y=s,this._state.isFocused=!1,this._state.style=t.options.cursorStyle,this._state.width=n[e.CHAR_DATA_WIDTH_INDEX]}else this._clearCursor()}}}else this._clearCursor()},i.prototype._clearCursor=function(){this._state&&(this.clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:null,y:null,isFocused:null,style:null,width:null})},i.prototype._renderBarCursor=function(t,e,r,i){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this.fillLeftLineAtCell(e,r),this._ctx.restore()},i.prototype._renderBlockCursor=function(t,r,i,s){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this.fillCells(r,i,s[e.CHAR_DATA_WIDTH_INDEX],1),this._ctx.fillStyle=this._colors.cursorAccent.css,this.fillCharTrueColor(t,s,r,i),this._ctx.restore()},i.prototype._renderUnderlineCursor=function(t,e,r,i){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this.fillBottomLineAtCells(e,r),this._ctx.restore()},i.prototype._renderBlurCursor=function(t,r,i,s){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this.strokeRectAtCell(r,i,s[e.CHAR_DATA_WIDTH_INDEX],1),this._ctx.restore()},i}(r.BaseRenderLayer);exports.CursorRenderLayer=s;var n=function(){function t(t,e){this._renderCallback=e,this.isCursorVisible=!0,t.isFocused&&this._restartInterval()}return Object.defineProperty(t.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=null),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=null),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=null)},t.prototype.restartBlinkAnimation=function(t){var e=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){e._renderCallback(),e._animationFrame=null})))},t.prototype._restartInterval=function(t){var e=this;void 0===t&&(t=i),this._blinkInterval&&window.clearInterval(this._blinkInterval),this._blinkStartTimeout=setTimeout(function(){if(e._animationTimeRestarted){var t=i-(Date.now()-e._animationTimeRestarted);if(e._animationTimeRestarted=null,t>0)return void e._restartInterval(t)}e.isCursorVisible=!1,e._animationFrame=window.requestAnimationFrame(function(){e._renderCallback(),e._animationFrame=null}),e._blinkInterval=setInterval(function(){if(e._animationTimeRestarted){var t=i-(Date.now()-e._animationTimeRestarted);return e._animationTimeRestarted=null,void e._restartInterval(t)}e.isCursorVisible=!e.isCursorVisible,e._animationFrame=window.requestAnimationFrame(function(){e._renderCallback(),e._animationFrame=null})},i)},t)},t.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=null),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=null),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=null)},t.prototype.resume=function(t){this._animationTimeRestarted=null,this._restartInterval(),this.restartBlinkAnimation(t)},t}();
},{"../Buffer":"nJkY","./BaseRenderLayer":"SM14"}],"PsFh":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,s){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s])})(e,s)};return function(e,s){function i(){this.constructor=e}t(e,s),e.prototype=null===s?Object.create(s):(i.prototype=s.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../Types"),s=require("./BaseRenderLayer"),i=require("./atlas/Types"),r=function(s){function r(t,i,r,n){var o=s.call(this,t,"link",i,!0,r)||this;return o._state=null,n.linkifier.on(e.LinkHoverEventTypes.HOVER,function(t){return o._onLinkHover(t)}),n.linkifier.on(e.LinkHoverEventTypes.LEAVE,function(t){return o._onLinkLeave(t)}),o}return t(r,s),r.prototype.resize=function(t,e){s.prototype.resize.call(this,t,e),this._state=null},r.prototype.reset=function(t){this._clearCurrentLink()},r.prototype._clearCurrentLink=function(){if(this._state){this.clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var t=this._state.y2-this._state.y1-1;t>0&&this.clearCells(0,this._state.y1+1,this._state.cols,t),this.clearCells(0,this._state.y2,this._state.x2,1),this._state=null}},r.prototype._onLinkHover=function(t){if(t.fg===i.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:t.fg<256?this._ctx.fillStyle=this._colors.ansi[t.fg].css:this._ctx.fillStyle=this._colors.foreground.css,t.y1===t.y2)this.fillBottomLineAtCells(t.x1,t.y1,t.x2-t.x1);else{this.fillBottomLineAtCells(t.x1,t.y1,t.cols-t.x1);for(var e=t.y1+1;e<t.y2;e++)this.fillBottomLineAtCells(0,e,t.cols);this.fillBottomLineAtCells(0,t.y2,t.x2)}this._state=t},r.prototype._onLinkLeave=function(t){this._clearCurrentLink()},r}(s.BaseRenderLayer);exports.LinkRenderLayer=r;
},{"../Types":"4kff","./BaseRenderLayer":"SM14","./atlas/Types":"LQXW"}],"JM9Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,i){this._terminal=t,this._callback=i,this._animationFrame=null}return t.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=null)},t.prototype.refresh=function(t,i){var n=this;t=null!=t?t:0,i=null!=i?i:this._terminal.rows-1;var r=void 0!==this._rowStart&&null!==this._rowStart,a=void 0!==this._rowEnd&&null!==this._rowEnd;this._rowStart=r?Math.min(this._rowStart,t):t,this._rowEnd=a?Math.max(this._rowEnd,i):i,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return n._innerRefresh()}))},t.prototype._innerRefresh=function(){this._rowStart=Math.max(this._rowStart,0),this._rowEnd=Math.min(this._rowEnd,this._terminal.rows-1),this._callback(this._rowStart,this._rowEnd),this._rowStart=null,this._rowEnd=null,this._animationFrame=null},t}();exports.RenderDebouncer=t;
},{}],"9pHa":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../common/Lifecycle"),i=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t(i,e),i.prototype.setListener=function(t){var e=this;this._listener&&this.clearListener(),this._listener=t,this._outerListener=function(){e._listener(window.devicePixelRatio,e._currentDevicePixelRatio),e._updateDpr()},this._updateDpr()},i.prototype.dispose=function(){e.prototype.dispose.call(this),this.clearListener()},i.prototype._updateDpr=function(){this._resolutionMediaMatchList&&this._resolutionMediaMatchList.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener)},i.prototype.clearListener=function(){this._listener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._listener=null,this._outerListener=null)},i}(e.Disposable);exports.ScreenDprMonitor=i;
},{"../common/Lifecycle":"VtE8"}],"+hXO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../Buffer"),e=function(){function e(r){this._terminal=r,this._characterJoiners=[],this._nextCharacterJoinerId=0}return e.prototype.registerCharacterJoiner=function(r){var e={id:this._nextCharacterJoinerId++,handler:r};return this._characterJoiners.push(e),e.id},e.prototype.deregisterCharacterJoiner=function(r){for(var e=0;e<this._characterJoiners.length;e++)if(this._characterJoiners[e].id===r)return this._characterJoiners.splice(e,1),!0;return!1},e.prototype.getJoinedCharacters=function(e){if(0===this._characterJoiners.length)return[];var t=this._terminal.buffer.lines.get(e);if(0===t.length)return[];for(var i=[],n=this._terminal.buffer.translateBufferLineToString(e,!0),a=0,s=0,h=0,o=t.get(0)[r.CHAR_DATA_ATTR_INDEX]>>9,_=0;_<this._terminal.cols;_++){var c=t.get(_),f=c[r.CHAR_DATA_CHAR_INDEX],l=c[r.CHAR_DATA_WIDTH_INDEX],g=c[r.CHAR_DATA_ATTR_INDEX]>>9;if(0!==l){if(g!==o){if(_-a>1)for(var u=this._getJoinedRanges(n,h,s,t,a),A=0;A<u.length;A++)i.push(u[A]);a=_,h=s,o=g}s+=f.length}}if(this._terminal.cols-a>1)for(u=this._getJoinedRanges(n,h,s,t,a),A=0;A<u.length;A++)i.push(u[A]);return i},e.prototype._getJoinedRanges=function(r,t,i,n,a){for(var s=r.substring(t,i),h=this._characterJoiners[0].handler(s),o=1;o<this._characterJoiners.length;o++)for(var _=this._characterJoiners[o].handler(s),c=0;c<_.length;c++)e._mergeRanges(h,_[c]);return this._stringRangesToCellRanges(h,n,a),h},e.prototype._stringRangesToCellRanges=function(e,t,i){var n=0,a=!1,s=0,h=e[n];if(h){for(var o=i;o<this._terminal.cols;o++){var _=t.get(o),c=_[r.CHAR_DATA_WIDTH_INDEX],f=_[r.CHAR_DATA_CHAR_INDEX].length;if(0!==c){if(!a&&h[0]<=s&&(h[0]=o,a=!0),h[1]<=s){if(h[1]=o,!(h=e[++n]))break;h[0]<=s?(h[0]=o,a=!0):a=!1}s+=f}}h&&(h[1]=this._terminal.cols)}},e._mergeRanges=function(r,e){for(var t=!1,i=0;i<r.length;i++){var n=r[i];if(t){if(e[1]<=n[0])return r[i-1][1]=e[1],r;if(e[1]<=n[1])return r[i-1][1]=Math.max(e[1],n[1]),r.splice(i,1),t=!1,r;r.splice(i,1),i--}else{if(e[1]<=n[0])return r.splice(i,0,e),r;if(e[1]<=n[1])return n[0]=Math.min(e[0],n[0]),r;e[0]<n[1]&&(n[0]=Math.min(e[0],n[0]),t=!0)}}return t?r[r.length-1][1]=e[1]:r.push(e),r},e}();exports.CharacterJoinerRegistry=e;
},{"../Buffer":"nJkY"}],"gvu2":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(i,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])})(i,n)};return function(i,n){function t(){this.constructor=i}e(i,n),i.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}}();Object.defineProperty(exports,"__esModule",{value:!0});var i=require("./TextRenderLayer"),n=require("./SelectionRenderLayer"),t=require("./CursorRenderLayer"),r=require("./ColorManager"),s=require("./LinkRenderLayer"),o=require("../common/EventEmitter"),a=require("../ui/RenderDebouncer"),h=require("../ui/ScreenDprMonitor"),l=require("../renderer/CharacterJoinerRegistry"),c=function(o){function c(e,c){var d=o.call(this)||this;d._terminal=e,d._isPaused=!1,d._needsFullRefresh=!1;var u=d._terminal.options.allowTransparency;if(d.colorManager=new r.ColorManager(document,u),d._characterJoinerRegistry=new l.CharacterJoinerRegistry(e),c&&d.colorManager.setTheme(c),d._renderLayers=[new i.TextRenderLayer(d._terminal.screenElement,0,d.colorManager.colors,d._characterJoinerRegistry,u),new n.SelectionRenderLayer(d._terminal.screenElement,1,d.colorManager.colors),new s.LinkRenderLayer(d._terminal.screenElement,2,d.colorManager.colors,d._terminal),new t.CursorRenderLayer(d._terminal.screenElement,3,d.colorManager.colors)],d.dimensions={scaledCharWidth:null,scaledCharHeight:null,scaledCellWidth:null,scaledCellHeight:null,scaledCharLeft:null,scaledCharTop:null,scaledCanvasWidth:null,scaledCanvasHeight:null,canvasWidth:null,canvasHeight:null,actualCellWidth:null,actualCellHeight:null},d._devicePixelRatio=window.devicePixelRatio,d._updateDimensions(),d.onOptionsChanged(),d._renderDebouncer=new a.RenderDebouncer(d._terminal,d._renderRows.bind(d)),d._screenDprMonitor=new h.ScreenDprMonitor,d._screenDprMonitor.setListener(function(){return d.onWindowResize(window.devicePixelRatio)}),d.register(d._screenDprMonitor),"IntersectionObserver"in window){var _=new IntersectionObserver(function(e){return d.onIntersectionChange(e[0])},{threshold:0});_.observe(d._terminal.element),d.register({dispose:function(){return _.disconnect()}})}return d}return e(c,o),c.prototype.dispose=function(){o.prototype.dispose.call(this),this._renderLayers.forEach(function(e){return e.dispose()})},c.prototype.onIntersectionChange=function(e){this._isPaused=0===e.intersectionRatio,!this._isPaused&&this._needsFullRefresh&&this._terminal.refresh(0,this._terminal.rows-1)},c.prototype.onWindowResize=function(e){this._devicePixelRatio!==e&&(this._devicePixelRatio=e,this.onResize(this._terminal.cols,this._terminal.rows))},c.prototype.setTheme=function(e){var i=this;return this.colorManager.setTheme(e),this._renderLayers.forEach(function(e){e.onThemeChanged(i._terminal,i.colorManager.colors),e.reset(i._terminal)}),this._isPaused?this._needsFullRefresh=!0:this._terminal.refresh(0,this._terminal.rows-1),this.colorManager.colors},c.prototype.onResize=function(e,i){var n=this;this._updateDimensions(),this._renderLayers.forEach(function(e){return e.resize(n._terminal,n.dimensions)}),this._isPaused?this._needsFullRefresh=!0:this._terminal.refresh(0,this._terminal.rows-1),this._terminal.screenElement.style.width=this.dimensions.canvasWidth+"px",this._terminal.screenElement.style.height=this.dimensions.canvasHeight+"px",this.emit("resize",{width:this.dimensions.canvasWidth,height:this.dimensions.canvasHeight})},c.prototype.onCharSizeChanged=function(){this.onResize(this._terminal.cols,this._terminal.rows)},c.prototype.onBlur=function(){var e=this;this._runOperation(function(i){return i.onBlur(e._terminal)})},c.prototype.onFocus=function(){var e=this;this._runOperation(function(i){return i.onFocus(e._terminal)})},c.prototype.onSelectionChanged=function(e,i,n){var t=this;void 0===n&&(n=!1),this._runOperation(function(r){return r.onSelectionChanged(t._terminal,e,i,n)})},c.prototype.onCursorMove=function(){var e=this;this._runOperation(function(i){return i.onCursorMove(e._terminal)})},c.prototype.onOptionsChanged=function(){var e=this;this.colorManager.allowTransparency=this._terminal.options.allowTransparency,this._runOperation(function(i){return i.onOptionsChanged(e._terminal)})},c.prototype.clear=function(){var e=this;this._runOperation(function(i){return i.reset(e._terminal)})},c.prototype._runOperation=function(e){this._isPaused?this._needsFullRefresh=!0:this._renderLayers.forEach(function(i){return e(i)})},c.prototype.refreshRows=function(e,i){this._isPaused?this._needsFullRefresh=!0:this._renderDebouncer.refresh(e,i)},c.prototype._renderRows=function(e,i){var n=this;this._renderLayers.forEach(function(t){return t.onGridChanged(n._terminal,e,i)}),this._terminal.emit("refresh",{start:e,end:i})},c.prototype._updateDimensions=function(){this._terminal.charMeasure.width&&this._terminal.charMeasure.height&&(this.dimensions.scaledCharWidth=Math.floor(this._terminal.charMeasure.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._terminal.charMeasure.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._terminal.options.lineHeight),this.dimensions.scaledCharTop=1===this._terminal.options.lineHeight?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._terminal.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._terminal.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._terminal.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._terminal.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._terminal.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._terminal.cols)},c.prototype.registerCharacterJoiner=function(e){return this._characterJoinerRegistry.registerCharacterJoiner(e)},c.prototype.deregisterCharacterJoiner=function(e){return this._characterJoinerRegistry.deregisterCharacterJoiner(e)},c}(o.EventEmitter);exports.Renderer=c;
},{"./TextRenderLayer":"TXoM","./SelectionRenderLayer":"xczP","./CursorRenderLayer":"W3ei","./ColorManager":"9RWO","./LinkRenderLayer":"PsFh","../common/EventEmitter":"lW8c","../ui/RenderDebouncer":"JM9Q","../ui/ScreenDprMonitor":"9pHa","../renderer/CharacterJoinerRegistry":"+hXO"}],"w6zZ":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../common/Lifecycle"),o=require("./Lifecycle"),n=500,i=function(e){function i(t){var n=e.call(this)||this;return n._terminal=t,n._zones=[],n._areZonesActive=!1,n._tooltipTimeout=null,n._currentZone=null,n._lastHoverCoords=[null,null],n.register(o.addDisposableDomListener(n._terminal.element,"mousedown",function(t){return n._onMouseDown(t)})),n._mouseMoveListener=function(t){return n._onMouseMove(t)},n._clickListener=function(t){return n._onClick(t)},n}return t(i,e),i.prototype.dispose=function(){e.prototype.dispose.call(this),this._deactivate()},i.prototype.add=function(t){this._zones.push(t),1===this._zones.length&&this._activate()},i.prototype.clearAll=function(t,e){if(0!==this._zones.length){e||(t=0,e=this._terminal.rows-1);for(var o=0;o<this._zones.length;o++){var n=this._zones[o];(n.y1>t&&n.y1<=e+1||n.y2>t&&n.y2<=e+1||n.y1<t&&n.y2>e+1)&&(this._currentZone&&this._currentZone===n&&(this._currentZone.leaveCallback(),this._currentZone=null),this._zones.splice(o--,1))}0===this._zones.length&&this._deactivate()}},i.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._terminal.element.addEventListener("mousemove",this._mouseMoveListener),this._terminal.element.addEventListener("click",this._clickListener))},i.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._terminal.element.removeEventListener("mousemove",this._mouseMoveListener),this._terminal.element.removeEventListener("click",this._clickListener))},i.prototype._onMouseMove=function(t){this._lastHoverCoords[0]===t.pageX&&this._lastHoverCoords[1]===t.pageY||(this._onHover(t),this._lastHoverCoords=[t.pageX,t.pageY])},i.prototype._onHover=function(t){var e=this,o=this._findZoneEventAt(t);o!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=null,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),o&&(this._currentZone=o,o.hoverCallback&&o.hoverCallback(t),this._tooltipTimeout=setTimeout(function(){return e._onTooltip(t)},n)))},i.prototype._onTooltip=function(t){this._tooltipTimeout=null;var e=this._findZoneEventAt(t);e&&e.tooltipCallback&&e.tooltipCallback(t)},i.prototype._onMouseDown=function(t){if(this._areZonesActive){var e=this._findZoneEventAt(t);e&&e.willLinkActivate(t)&&(t.preventDefault(),t.stopImmediatePropagation())}},i.prototype._onClick=function(t){var e=this._findZoneEventAt(t);e&&(e.clickCallback(t),t.preventDefault(),t.stopImmediatePropagation())},i.prototype._findZoneEventAt=function(t){var e=this._terminal.mouseHelper.getCoords(t,this._terminal.screenElement,this._terminal.charMeasure,this._terminal.options.lineHeight,this._terminal.cols,this._terminal.rows);if(!e)return null;for(var o=e[0],n=e[1],i=0;i<this._zones.length;i++){var r=this._zones[i];if(r.y1===r.y2){if(n===r.y1&&o>=r.x1&&o<r.x2)return r}else if(n===r.y1&&o>=r.x1||n===r.y2&&o<r.x2||n>r.y1&&n<r.y2)return r}return null},i}(e.Disposable);exports.MouseZoneManager=i;var r=function(){return function(t,e,o,n,i,r,s,l,a){this.x1=t,this.y1=e,this.x2=o,this.y2=n,this.clickCallback=i,this.hoverCallback=r,this.tooltipCallback=s,this.leaveCallback=l,this.willLinkActivate=a}}();exports.MouseZone=r;
},{"../common/Lifecycle":"VtE8","./Lifecycle":"0SNy"}],"ijp2":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./Types"),i=require("./ui/MouseZoneManager"),r=require("./common/EventEmitter"),n=require("./Buffer"),o=require("./CharWidth"),a=function(r){function a(t){var e=r.call(this)||this;return e._terminal=t,e._linkMatchers=[],e._nextLinkMatcherId=0,e._rowsToLinkify={start:null,end:null},e}return t(a,r),a.prototype.attachToDom=function(t){this._mouseZoneManager=t},a.prototype.linkifyRows=function(t,e){var i=this;this._mouseZoneManager&&(null===this._rowsToLinkify.start?(this._rowsToLinkify.start=t,this._rowsToLinkify.end=e):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,t),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,e)),this._mouseZoneManager.clearAll(t,e),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return i._linkifyRows()},a.TIME_BEFORE_LINKIFY))},a.prototype._linkifyRows=function(){this._rowsTimeoutId=null;var t=this._terminal.buffer,e=t.ydisp+this._rowsToLinkify.start;if(!(e>=t.lines.length)){for(var i=t.ydisp+Math.min(this._rowsToLinkify.end,this._terminal.rows)+1,r=Math.ceil(a.OVERSCAN_CHAR_LIMIT/this._terminal.cols),n=this._terminal.buffer.iterator(!1,e,i,r,r);n.hasNext();)for(var o=n.next(),s=0;s<this._linkMatchers.length;s++)this._doLinkifyRow(o.range.first,o.content,this._linkMatchers[s]);this._rowsToLinkify.start=null,this._rowsToLinkify.end=null}},a.prototype.registerLinkMatcher=function(t,e,i){if(void 0===i&&(i={}),!e)throw new Error("handler must be defined");var r={id:this._nextLinkMatcherId++,regex:t,handler:e,matchIndex:i.matchIndex,validationCallback:i.validationCallback,hoverTooltipCallback:i.tooltipCallback,hoverLeaveCallback:i.leaveCallback,willLinkActivate:i.willLinkActivate,priority:i.priority||0};return this._addLinkMatcherToList(r),r.id},a.prototype._addLinkMatcherToList=function(t){if(0!==this._linkMatchers.length){for(var e=this._linkMatchers.length-1;e>=0;e--)if(t.priority<=this._linkMatchers[e].priority)return void this._linkMatchers.splice(e+1,0,t);this._linkMatchers.splice(0,0,t)}else this._linkMatchers.push(t)},a.prototype.deregisterLinkMatcher=function(t){for(var e=0;e<this._linkMatchers.length;e++)if(this._linkMatchers[e].id===t)return this._linkMatchers.splice(e,1),!0;return!1},a.prototype._doLinkifyRow=function(t,e,i){for(var r,o=this,a=new RegExp(i.regex.source,i.regex.flags+"g"),s=-1,l=function(){var l=r["number"!=typeof i.matchIndex?0:i.matchIndex];if(!l){if(h._terminal.debug)throw console.log({match:r,matcher:i}),new Error("match found without corresponding matchIndex");return"break"}s=e.indexOf(l,s+1),a.lastIndex=s+l.length;var c,_=h._terminal.buffer.stringIndexToBufferIndex(t,s),f=h._terminal.buffer.lines.get(_[0]).get(_[1]);if(f){var u=f[n.CHAR_DATA_ATTR_INDEX];c=u>>9&511}i.validationCallback?i.validationCallback(l,function(t){o._rowsTimeoutId||t&&o._addLink(_[1],_[0]-o._terminal.buffer.ydisp,l,i,c)}):h._addLink(_[1],_[0]-h._terminal.buffer.ydisp,l,i,c)},h=this;null!==(r=a.exec(e));){if("break"===l())break}},a.prototype._addLink=function(t,r,n,a,s){var l=this,h=o.getStringCellWidth(n),c=t%this._terminal.cols,_=r+Math.floor(t/this._terminal.cols),f=(c+h)%this._terminal.cols,u=_+Math.floor((c+h)/this._terminal.cols);0===f&&(f=this._terminal.cols,u--),this._mouseZoneManager.add(new i.MouseZone(c+1,_+1,f+1,u+1,function(t){if(a.handler)return a.handler(t,n);window.open(n,"_blank")},function(t){l.emit(e.LinkHoverEventTypes.HOVER,l._createLinkHoverEvent(c,_,f,u,s)),l._terminal.element.classList.add("xterm-cursor-pointer")},function(t){l.emit(e.LinkHoverEventTypes.TOOLTIP,l._createLinkHoverEvent(c,_,f,u,s)),a.hoverTooltipCallback&&a.hoverTooltipCallback(t,n)},function(){l.emit(e.LinkHoverEventTypes.LEAVE,l._createLinkHoverEvent(c,_,f,u,s)),l._terminal.element.classList.remove("xterm-cursor-pointer"),a.hoverLeaveCallback&&a.hoverLeaveCallback()},function(t){return!a.willLinkActivate||a.willLinkActivate(t,n)}))},a.prototype._createLinkHoverEvent=function(t,e,i,r,n){return{x1:t,y1:e,x2:i,y2:r,cols:this._terminal.cols,fg:n}},a.TIME_BEFORE_LINKIFY=200,a.OVERSCAN_CHAR_LIMIT=2e3,a}(r.EventEmitter);exports.Linkifier=a;
},{"./Types":"4kff","./ui/MouseZoneManager":"w6zZ","./common/EventEmitter":"lW8c","./Buffer":"nJkY","./CharWidth":"6Lzu"}],"ueEb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e){this._renderer=e}return e.getCoordsRelativeToElement=function(e,t){if(null===e.pageX||void 0===e.pageX)return null;for(var r=t,o=e.pageX,n=e.pageY;t;)o-=t.offsetLeft,n-=t.offsetTop,t=t.offsetParent;for(t=r;t&&t!==t.ownerDocument.body;)o+=t.scrollLeft,n+=t.scrollTop,t=t.parentElement;return[o,n]},e.prototype.getCoords=function(t,r,o,n,i,l,a){if(!o.width||!o.height)return null;var s=e.getCoordsRelativeToElement(t,r);return s?(s[0]=Math.ceil((s[0]+(a?this._renderer.dimensions.actualCellWidth/2:0))/this._renderer.dimensions.actualCellWidth),s[1]=Math.ceil(s[1]/this._renderer.dimensions.actualCellHeight),s[0]=Math.min(Math.max(s[0],1),i+(a?1:0)),s[1]=Math.min(Math.max(s[1],1),l),s):null},e.prototype.getRawByteCoords=function(e,t,r,o,n,i){var l=this.getCoords(e,t,r,o,n,i),a=l[0],s=l[1];return{x:a+=32,y:s+=32}},e}();exports.MouseHelper=e;
},{}],"GmvH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t){this._terminal=t,this.clearSelection()}return t.prototype.clearSelection=function(){this.selectionStart=null,this.selectionEnd=null,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(t.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._terminal.cols,this._terminal.buffer.ybase+this._terminal.rows-1];if(!this.selectionStart)return null;if(!this.selectionEnd||this.areSelectionValuesReversed()){var t=this.selectionStart[0]+this.selectionStartLength;return t>this._terminal.cols?[t%this._terminal.cols,this.selectionStart[1]+Math.floor(t/this._terminal.cols)]:[t,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd},enumerable:!0,configurable:!0}),t.prototype.areSelectionValuesReversed=function(){var t=this.selectionStart,e=this.selectionEnd;return!(!t||!e)&&(t[1]>e[1]||t[1]===e[1]&&t[0]>e[0])},t.prototype.onTrim=function(t){return this.selectionStart&&(this.selectionStart[1]-=t),this.selectionEnd&&(this.selectionEnd[1]-=t),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},t}();exports.SelectionModel=t;
},{}],"uYIN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,e=require("../common/data/EscapeSequences");!function(t){t.UP="A",t.DOWN="B",t.RIGHT="C",t.LEFT="D"}(t||(t={}));var o=function(){function o(t,e){var o;this._mouseEvent=t,this._terminal=e,this._lines=this._terminal.buffer.lines,this._startCol=this._terminal.buffer.x,this._startRow=this._terminal.buffer.y;var r=this._terminal.mouseHelper.getCoords(this._mouseEvent,this._terminal.element,this._terminal.charMeasure,this._terminal.options.lineHeight,this._terminal.cols,this._terminal.rows,!1);r&&(o=r.map(function(t){return t-1}),this._endCol=o[0],this._endRow=o[1])}return o.prototype.move=function(){this._mouseEvent.altKey&&void 0!==this._endCol&&void 0!==this._endRow&&this._terminal.handler(this._arrowSequences())},o.prototype._arrowSequences=function(){return this._terminal.buffer.hasScrollback?this._moveHorizontallyOnly():this._resetStartingRow()+this._moveToRequestedRow()+this._moveToRequestedCol()},o.prototype._resetStartingRow=function(){return 0===this._moveToRequestedRow().length?"":r(this._bufferLine(this._startCol,this._startRow,this._startCol,this._startRow-this._wrappedRowsForRow(this._startRow),!1).length,this._sequence(t.LEFT))},o.prototype._moveToRequestedRow=function(){var t=this._startRow-this._wrappedRowsForRow(this._startRow),e=this._endRow-this._wrappedRowsForRow(this._endRow);return r(Math.abs(t-e)-this._wrappedRowsCount(),this._sequence(this._verticalDirection()))},o.prototype._moveToRequestedCol=function(){var e;e=this._moveToRequestedRow().length>0?this._endRow-this._wrappedRowsForRow(this._endRow):this._startRow;var o=this._endRow,i=this._horizontalDirection();return r(this._bufferLine(this._startCol,e,this._endCol,o,i===t.RIGHT).length,this._sequence(i))},o.prototype._moveHorizontallyOnly=function(){var t=this._horizontalDirection();return r(Math.abs(this._startCol-this._endCol),this._sequence(t))},o.prototype._wrappedRowsCount=function(){for(var e=0,o=this._startRow-this._wrappedRowsForRow(this._startRow),r=this._endRow-this._wrappedRowsForRow(this._endRow),i=0;i<Math.abs(o-r);i++){var s=this._verticalDirection()===t.UP?-1:1;this._lines.get(o+s*i).isWrapped&&e++}return e},o.prototype._wrappedRowsForRow=function(t){for(var e=0,o=this._lines.get(t).isWrapped;o&&t>=0&&t<this._terminal.rows;)e++,t--,o=this._lines.get(t).isWrapped;return e},o.prototype._horizontalDirection=function(){var e;return e=this._moveToRequestedRow().length>0?this._endRow-this._wrappedRowsForRow(this._endRow):this._startRow,this._startCol<this._endCol&&e<=this._endRow||this._startCol>=this._endCol&&e<this._endRow?t.RIGHT:t.LEFT},o.prototype._verticalDirection=function(){return this._startRow>this._endRow?t.UP:t.DOWN},o.prototype._bufferLine=function(t,e,o,r,i){for(var s=t,n=e,h="";s!==o||n!==r;)s+=i?1:-1,i&&s>this._terminal.cols-1?(h+=this._terminal.buffer.translateBufferLineToString(n,!1,t,s),s=0,t=0,n++):!i&&s<0&&(h+=this._terminal.buffer.translateBufferLineToString(n,!1,0,t+1),t=s=this._terminal.cols-1,n--);return h+this._terminal.buffer.translateBufferLineToString(n,!1,t,s)},o.prototype._sequence=function(t){var o=this._terminal.applicationCursor?"O":"[";return e.C0.ESC+o+t},o}();function r(t,e){t=Math.floor(t);for(var o="",r=0;r<t;r++)o+=e;return o}exports.AltClickHandler=o;
},{"../common/data/EscapeSequences":"xnQp"}],"TOt/":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),t=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(exports,"__esModule",{value:!0});var i,n=require("./utils/MouseHelper"),o=t(require("./shared/utils/Browser")),r=require("./common/EventEmitter"),s=require("./SelectionModel"),l=require("./Buffer"),h=require("./handlers/AltClickHandler"),_=50,a=15,c=50,u=500,f=" ()[]{}'\"",m=String.fromCharCode(160),d=new RegExp(m,"g");!function(e){e[e.NORMAL=0]="NORMAL",e[e.WORD=1]="WORD",e[e.LINE=2]="LINE",e[e.COLUMN=3]="COLUMN"}(i=exports.SelectionMode||(exports.SelectionMode={}));var p=function(t){function r(e,n){var o=t.call(this)||this;return o._terminal=e,o._charMeasure=n,o._enabled=!0,o._initListeners(),o.enable(),o._model=new s.SelectionModel(e),o._activeSelectionMode=i.NORMAL,o}return e(r,t),r.prototype.dispose=function(){t.prototype.dispose.call(this),this._removeMouseDownListeners()},Object.defineProperty(r.prototype,"_buffer",{get:function(){return this._terminal.buffers.active},enumerable:!0,configurable:!0}),r.prototype._initListeners=function(){var e=this;this._mouseMoveListener=function(t){return e._onMouseMove(t)},this._mouseUpListener=function(t){return e._onMouseUp(t)},this._trimListener=function(t){return e._onTrim(t)},this.initBuffersListeners()},r.prototype.initBuffersListeners=function(){var e=this;this._terminal.buffer.lines.on("trim",this._trimListener),this._terminal.buffers.on("activate",function(t){return e._onBufferActivate(t)})},r.prototype.disable=function(){this.clearSelection(),this._enabled=!1},r.prototype.enable=function(){this._enabled=!0},Object.defineProperty(r.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"hasSelection",{get:function(){var e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;return!(!e||!t)&&(e[0]!==t[0]||e[1]!==t[1])},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"selectionText",{get:function(){var e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;if(!e||!t)return"";var n=[];if(this._activeSelectionMode===i.COLUMN){if(e[0]===t[0])return"";for(var r=e[1];r<=t[1];r++){var s=this._buffer.translateBufferLineToString(r,!0,e[0],t[0]);n.push(s)}}else{var l=e[1]===t[1]?t[0]:null;n.push(this._buffer.translateBufferLineToString(e[1],!0,e[0],l));for(r=e[1]+1;r<=t[1]-1;r++){var h=this._buffer.lines.get(r);s=this._buffer.translateBufferLineToString(r,!0);h.isWrapped?n[n.length-1]+=s:n.push(s)}if(e[1]!==t[1]){h=this._buffer.lines.get(t[1]),s=this._buffer.translateBufferLineToString(t[1],!0,0,t[0]);h.isWrapped?n[n.length-1]+=s:n.push(s)}}return n.map(function(e){return e.replace(d," ")}).join(o.isMSWindows?"\r\n":"\n")},enumerable:!0,configurable:!0}),r.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh()},r.prototype.refresh=function(e){var t=this;(this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return t._refresh()})),o.isLinux&&e)&&(this.selectionText.length&&this.emit("newselection",this.selectionText))},r.prototype._refresh=function(){this._refreshAnimationFrame=null,this.emit("refresh",{start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===i.COLUMN})},r.prototype.isClickInSelection=function(e){var t=this._getMouseBufferCoords(e),i=this._model.finalSelectionStart,n=this._model.finalSelectionEnd;return!(!i||!n)&&(t[1]>i[1]&&t[1]<n[1]||i[1]===n[1]&&t[1]===i[1]&&t[0]>i[0]&&t[0]<n[0]||i[1]<n[1]&&t[1]===n[1]&&t[0]<n[0])},r.prototype.selectWordAtCursor=function(e){var t=this._getMouseBufferCoords(e);t&&(this._selectWordAt(t,!1),this._model.selectionEnd=null,this.refresh(!0))},r.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._terminal.emit("selection")},r.prototype.selectLines=function(e,t){this._model.clearSelection(),e=Math.max(e,0),t=Math.min(t,this._terminal.buffer.lines.length-1),this._model.selectionStart=[0,e],this._model.selectionEnd=[this._terminal.cols,t],this.refresh(),this._terminal.emit("selection")},r.prototype._onTrim=function(e){this._model.onTrim(e)&&this.refresh()},r.prototype._getMouseBufferCoords=function(e){var t=this._terminal.mouseHelper.getCoords(e,this._terminal.screenElement,this._charMeasure,this._terminal.options.lineHeight,this._terminal.cols,this._terminal.rows,!0);return t?(t[0]--,t[1]--,t[1]+=this._terminal.buffer.ydisp,t):null},r.prototype._getMouseEventScrollAmount=function(e){var t=n.MouseHelper.getCoordsRelativeToElement(e,this._terminal.screenElement)[1],i=this._terminal.rows*Math.ceil(this._charMeasure.height*this._terminal.options.lineHeight);return t>=0&&t<=i?0:(t>i&&(t-=i),t=Math.min(Math.max(t,-_),_),(t/=_)/Math.abs(t)+Math.round(t*(a-1)))},r.prototype.shouldForceSelection=function(e){return o.isMac?e.altKey&&this._terminal.options.macOptionClickForcesSelection:e.shiftKey},r.prototype.onMouseDown=function(e){if(this._mouseDownTimeStamp=e.timeStamp,(2!==e.button||!this.hasSelection)&&0===e.button){if(!this._enabled){if(!this.shouldForceSelection(e))return;e.stopPropagation()}e.preventDefault(),this._dragScrollAmount=0,this._enabled&&e.shiftKey?this._onIncrementalClick(e):1===e.detail?this._onSingleClick(e):2===e.detail?this._onDoubleClick(e):3===e.detail&&this._onTripleClick(e),this._addMouseDownListeners(),this.refresh(!0)}},r.prototype._addMouseDownListeners=function(){var e=this;this._terminal.element.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._terminal.element.ownerDocument.addEventListener("mouseup",this._mouseUpListener),this._dragScrollIntervalTimer=setInterval(function(){return e._dragScroll()},c)},r.prototype._removeMouseDownListeners=function(){this._terminal.element.ownerDocument&&(this._terminal.element.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._terminal.element.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=null},r.prototype._onIncrementalClick=function(e){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(e))},r.prototype._onSingleClick=function(e){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(e)?i.COLUMN:i.NORMAL,this._model.selectionStart=this._getMouseBufferCoords(e),this._model.selectionStart){this._model.selectionEnd=null;var t=this._buffer.lines.get(this._model.selectionStart[1]);if(t)if(!(t.length>=this._model.selectionStart[0]))0===t.get(this._model.selectionStart[0])[l.CHAR_DATA_WIDTH_INDEX]&&this._model.selectionStart[0]++}},r.prototype._onDoubleClick=function(e){var t=this._getMouseBufferCoords(e);t&&(this._activeSelectionMode=i.WORD,this._selectWordAt(t,!0))},r.prototype._onTripleClick=function(e){var t=this._getMouseBufferCoords(e);t&&(this._activeSelectionMode=i.LINE,this._selectLineAt(t[1]))},r.prototype.shouldColumnSelect=function(e){return e.altKey&&!(o.isMac&&this._terminal.options.macOptionClickForcesSelection)},r.prototype._onMouseMove=function(e){e.stopImmediatePropagation();var t=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(e),this._model.selectionEnd){if(this._activeSelectionMode===i.LINE?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._terminal.cols:this._activeSelectionMode===i.WORD&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(e),this._activeSelectionMode!==i.COLUMN&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._terminal.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0)),this._model.selectionEnd[1]<this._buffer.lines.length){var n=this._buffer.lines.get(this._model.selectionEnd[1]).get(this._model.selectionEnd[0]);n&&0===n[l.CHAR_DATA_WIDTH_INDEX]&&this._model.selectionEnd[0]++}t&&t[0]===this._model.selectionEnd[0]&&t[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)},r.prototype._dragScroll=function(){this._dragScrollAmount&&(this._terminal.scrollLines(this._dragScrollAmount,!1),this._dragScrollAmount>0?(this._activeSelectionMode!==i.COLUMN&&(this._model.selectionEnd[0]=this._terminal.cols),this._model.selectionEnd[1]=Math.min(this._terminal.buffer.ydisp+this._terminal.rows,this._terminal.buffer.lines.length-1)):(this._activeSelectionMode!==i.COLUMN&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=this._terminal.buffer.ydisp),this.refresh())},r.prototype._onMouseUp=function(e){var t=e.timeStamp-this._mouseDownTimeStamp;this._removeMouseDownListeners(),this.selectionText.length<=1&&t<u?new h.AltClickHandler(e,this._terminal).move():this.hasSelection&&this._terminal.emit("selection")},r.prototype._onBufferActivate=function(e){this.clearSelection(),e.inactiveBuffer.lines.off("trim",this._trimListener),e.activeBuffer.lines.on("trim",this._trimListener)},r.prototype._convertViewportColToCharacterIndex=function(e,t){for(var i=t[0],n=0;t[0]>=n;n++){var o=e.get(n);0===o[l.CHAR_DATA_WIDTH_INDEX]?i--:o[l.CHAR_DATA_CHAR_INDEX].length>1&&t[0]!==n&&(i+=o[l.CHAR_DATA_CHAR_INDEX].length-1)}return i},r.prototype.setSelection=function(e,t,i){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[e,t],this._model.selectionStartLength=i,this.refresh()},r.prototype._getWordAt=function(e,t,i,n){if(void 0===i&&(i=!0),void 0===n&&(n=!0),e[0]>=this._terminal.cols)return null;var o=this._buffer.lines.get(e[1]);if(!o)return null;var r=this._buffer.translateBufferLineToString(e[1],!1),s=this._convertViewportColToCharacterIndex(o,e),h=s,_=e[0]-s,a=0,c=0,u=0,f=0;if(" "===r.charAt(s)){for(;s>0&&" "===r.charAt(s-1);)s--;for(;h<r.length&&" "===r.charAt(h+1);)h++}else{var m=e[0],d=e[0];for(0===o.get(m)[l.CHAR_DATA_WIDTH_INDEX]&&(a++,m--),2===o.get(d)[l.CHAR_DATA_WIDTH_INDEX]&&(c++,d++),o.get(d)[l.CHAR_DATA_CHAR_INDEX].length>1&&(f+=o.get(d)[l.CHAR_DATA_CHAR_INDEX].length-1,h+=o.get(d)[l.CHAR_DATA_CHAR_INDEX].length-1);m>0&&s>0&&!this._isCharWordSeparator(o.get(m-1));){0===(p=o.get(m-1))[l.CHAR_DATA_WIDTH_INDEX]?(a++,m--):p[l.CHAR_DATA_CHAR_INDEX].length>1&&(u+=p[l.CHAR_DATA_CHAR_INDEX].length-1,s-=p[l.CHAR_DATA_CHAR_INDEX].length-1),s--,m--}for(;d<o.length&&h+1<r.length&&!this._isCharWordSeparator(o.get(d+1));){var p;2===(p=o.get(d+1))[l.CHAR_DATA_WIDTH_INDEX]?(c++,d++):p[l.CHAR_DATA_CHAR_INDEX].length>1&&(f+=p[l.CHAR_DATA_CHAR_INDEX].length-1,h+=p[l.CHAR_DATA_CHAR_INDEX].length-1),h++,d++}}h++;var A=s+_-a+u,g=Math.min(this._terminal.cols,h-s+a+c-u-f);if(!t&&""===r.slice(s,h).trim())return null;if(i&&0===A&&32!==o.get(0)[l.CHAR_DATA_CODE_INDEX]){var v=this._buffer.lines.get(e[1]-1);if(v&&o.isWrapped&&32!==v.get(this._terminal.cols-1)[l.CHAR_DATA_CODE_INDEX]){var S=this._getWordAt([this._terminal.cols-1,e[1]-1],!1,!0,!1);if(S){var C=this._terminal.cols-S.start;A-=C,g+=C}}}if(n&&A+g===this._terminal.cols&&32!==o.get(this._terminal.cols-1)[l.CHAR_DATA_CODE_INDEX]){var D=this._buffer.lines.get(e[1]+1);if(D&&D.isWrapped&&32!==D.get(0)[l.CHAR_DATA_CODE_INDEX]){var E=this._getWordAt([0,e[1]+1],!1,!1,!0);E&&(g+=E.length)}}return{start:A,length:g}},r.prototype._selectWordAt=function(e,t){var i=this._getWordAt(e,t);if(i){for(;i.start<0;)i.start+=this._terminal.cols,e[1]--;this._model.selectionStart=[i.start,e[1]],this._model.selectionStartLength=i.length}},r.prototype._selectToWordAt=function(e){var t=this._getWordAt(e,!0);if(t){for(var i=e[1];t.start<0;)t.start+=this._terminal.cols,i--;if(!this._model.areSelectionValuesReversed())for(;t.start+t.length>this._terminal.cols;)t.length-=this._terminal.cols,i++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?t.start:t.start+t.length,i]}},r.prototype._isCharWordSeparator=function(e){return 0!==e[l.CHAR_DATA_WIDTH_INDEX]&&f.indexOf(e[l.CHAR_DATA_CHAR_INDEX])>=0},r.prototype._selectLineAt=function(e){var t=this._buffer.getWrappedRangeForLine(e);this._model.selectionStart=[0,t.first],this._model.selectionEnd=[this._terminal.cols,t.last],this._model.selectionStartLength=0},r}(r.EventEmitter);exports.SelectionManager=p;
},{"./utils/MouseHelper":"ueEb","./shared/utils/Browser":"/tmL","./common/EventEmitter":"lW8c","./SelectionModel":"GmvH","./Buffer":"nJkY","./handlers/AltClickHandler":"uYIN"}],"fEPo":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../common/EventEmitter"),n=function(t){function n(e,n){var r=t.call(this)||this;return r._document=e,r._parentElement=n,r._measureElement=r._document.createElement("span"),r._measureElement.classList.add("xterm-char-measure-element"),r._measureElement.textContent="W",r._measureElement.setAttribute("aria-hidden","true"),r._parentElement.appendChild(r._measureElement),r}return e(n,t),Object.defineProperty(n.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),n.prototype.measure=function(e){this._measureElement.style.fontFamily=e.fontFamily,this._measureElement.style.fontSize=e.fontSize+"px";var t=this._measureElement.getBoundingClientRect();0!==t.width&&0!==t.height&&(this._width===t.width&&this._height===t.height||(this._width=t.width,this._height=Math.ceil(t.height),this.emit("charsizechanged")))},n}(t.EventEmitter);exports.CharMeasure=n;
},{"../common/EventEmitter":"lW8c"}],"LZis":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.blankLine="Blank line",exports.promptLabel="Terminal input",exports.tooMuchOutput="Too much output to announce, navigate to rows manually to read";
},{}],"nSfh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clone=function(r,e){if(void 0===e&&(e=5),"object"!=typeof r)return r;if(null===r)return null;var t=Array.isArray(r)?[]:{};for(var o in r)t[o]=e<=1?r[o]:exports.clone(r[o],e-1);return t};
},{}],"OPxE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_BELL_SOUND="data:audio/wav;base64,UklGRigBAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQBAADpAFgCwAMlBZoG/wdmCcoKRAypDQ8PbRDBEQQTOxRtFYcWlBePGIUZXhoiG88bcBz7HHIdzh0WHlMeZx51HmkeUx4WHs8dah0AHXwc3hs9G4saxRnyGBIYGBcQFv8U4RPAEoYRQBACD70NWwwHC6gJOwjWBloF7gOBAhABkf8b/qv8R/ve+Xf4Ife79W/0JfPZ8Z/wde9N7ijtE+wU6xvqM+lb6H7nw+YX5mrlxuQz5Mzje+Ma49fioeKD4nXiYeJy4pHitOL04j/jn+MN5IPkFOWs5U3mDefM55/ogOl36m7rdOyE7abuyu8D8Unyj/Pg9D/2qfcb+Yn6/vuK/Qj/lAAlAg==";var e=function(){function e(e){this._terminal=e}return e.prototype.playBellSound=function(){var e=window.AudioContext||window.webkitAudioContext;if(!this._audioContext&&e&&(this._audioContext=new e),this._audioContext){var t=this._audioContext.createBufferSource(),o=this._audioContext;this._audioContext.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._terminal.options.bellSound)),function(e){t.buffer=e,t.connect(o.destination),t.start(0)})}else console.warn("Sorry, but the Web Audio API is not supported by your browser. Please, consider upgrading to the latest version")},e.prototype._base64ToArrayBuffer=function(e){for(var t=window.atob(e),o=t.length,n=new Uint8Array(o),i=0;i<o;i++)n[i]=t.charCodeAt(i);return n.buffer},e.prototype._removeMimeType=function(e){return e.split(",")[1]},e}();exports.SoundManager=e;
},{}],"zPBq":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),t=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};Object.defineProperty(exports,"__esModule",{value:!0});var i,n=t(require("./Strings")),r=require("./shared/utils/Browser"),s=require("./ui/RenderDebouncer"),o=require("./ui/Lifecycle"),a=require("./common/Lifecycle"),l=20;!function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM"}(i||(i={}));var _=function(t){function a(e){var n=t.call(this)||this;n._terminal=e,n._liveRegionLineCount=0,n._charsToConsume=[],n._accessibilityTreeRoot=document.createElement("div"),n._accessibilityTreeRoot.classList.add("xterm-accessibility"),n._rowContainer=document.createElement("div"),n._rowContainer.classList.add("xterm-accessibility-tree"),n._rowElements=[];for(var r=0;r<n._terminal.rows;r++)n._rowElements[r]=n._createAccessibilityTreeNode(),n._rowContainer.appendChild(n._rowElements[r]);return n._topBoundaryFocusListener=function(e){return n._onBoundaryFocus(e,i.TOP)},n._bottomBoundaryFocusListener=function(e){return n._onBoundaryFocus(e,i.BOTTOM)},n._rowElements[0].addEventListener("focus",n._topBoundaryFocusListener),n._rowElements[n._rowElements.length-1].addEventListener("focus",n._bottomBoundaryFocusListener),n._refreshRowsDimensions(),n._accessibilityTreeRoot.appendChild(n._rowContainer),n._renderRowsDebouncer=new s.RenderDebouncer(n._terminal,n._renderRows.bind(n)),n._refreshRows(),n._liveRegion=document.createElement("div"),n._liveRegion.classList.add("live-region"),n._liveRegion.setAttribute("aria-live","assertive"),n._accessibilityTreeRoot.appendChild(n._liveRegion),n._terminal.element.insertAdjacentElement("afterbegin",n._accessibilityTreeRoot),n.register(n._renderRowsDebouncer),n.register(n._terminal.addDisposableListener("resize",function(e){return n._onResize(e.rows)})),n.register(n._terminal.addDisposableListener("refresh",function(e){return n._refreshRows(e.start,e.end)})),n.register(n._terminal.addDisposableListener("scroll",function(e){return n._refreshRows()})),n.register(n._terminal.addDisposableListener("a11y.char",function(e){return n._onChar(e)})),n.register(n._terminal.addDisposableListener("linefeed",function(){return n._onChar("\n")})),n.register(n._terminal.addDisposableListener("a11y.tab",function(e){return n._onTab(e)})),n.register(n._terminal.addDisposableListener("key",function(e){return n._onKey(e)})),n.register(n._terminal.addDisposableListener("blur",function(){return n._clearLiveRegion()})),n.register(n._terminal.addDisposableListener("dprchange",function(){return n._refreshRowsDimensions()})),n.register(n._terminal.renderer.addDisposableListener("resize",function(){return n._refreshRowsDimensions()})),n.register(o.addDisposableDomListener(window,"resize",function(){return n._refreshRowsDimensions()})),n}return e(a,t),a.prototype.dispose=function(){t.prototype.dispose.call(this),this._terminal.element.removeChild(this._accessibilityTreeRoot),this._rowElements.length=0},a.prototype._onBoundaryFocus=function(e,t){var n=e.target,r=this._rowElements[t===i.TOP?1:this._rowElements.length-2];if(n.getAttribute("aria-posinset")!==(t===i.TOP?"1":""+this._terminal.buffer.lines.length)&&e.relatedTarget===r){var s,o;if(t===i.TOP?(s=n,o=this._rowElements.pop(),this._rowContainer.removeChild(o)):(s=this._rowElements.shift(),o=n,this._rowContainer.removeChild(s)),s.removeEventListener("focus",this._topBoundaryFocusListener),o.removeEventListener("focus",this._bottomBoundaryFocusListener),t===i.TOP){var a=this._createAccessibilityTreeNode();this._rowElements.unshift(a),this._rowContainer.insertAdjacentElement("afterbegin",a)}else{a=this._createAccessibilityTreeNode();this._rowElements.push(a),this._rowContainer.appendChild(a)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(t===i.TOP?-1:1),this._rowElements[t===i.TOP?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}},a.prototype._onResize=function(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var t=this._rowContainer.children.length;t<this._terminal.rows;t++)this._rowElements[t]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[t]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},a.prototype._createAccessibilityTreeNode=function(){var e=document.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e},a.prototype._onTab=function(e){for(var t=0;t<e;t++)this._onChar(" ")},a.prototype._onChar=function(e){var t=this;if(this._liveRegionLineCount<l+1){if(this._charsToConsume.length>0)this._charsToConsume.shift()!==e&&this._announceCharacter(e);else this._announceCharacter(e);"\n"===e&&(this._liveRegionLineCount++,this._liveRegionLineCount===l+1&&(this._liveRegion.textContent+=n.tooMuchOutput)),r.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){t._accessibilityTreeRoot.appendChild(t._liveRegion)},0)}},a.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,r.isMac&&this._liveRegion.parentNode&&this._accessibilityTreeRoot.removeChild(this._liveRegion)},a.prototype._onKey=function(e){this._clearLiveRegion(),this._charsToConsume.push(e)},a.prototype._refreshRows=function(e,t){this._renderRowsDebouncer.refresh(e,t)},a.prototype._renderRows=function(e,t){for(var i=this._terminal.buffer,r=i.lines.length.toString(),s=e;s<=t;s++){var o=i.translateBufferLineToString(i.ydisp+s,!0),a=(i.ydisp+s+1).toString(),l=this._rowElements[s];l.textContent=0===o.length?n.blankLine:o,l.setAttribute("aria-posinset",a),l.setAttribute("aria-setsize",r)}},a.prototype._refreshRowsDimensions=function(){if(this._terminal.renderer.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e])}},a.prototype._refreshRowDimensions=function(e){e.style.height=this._terminal.renderer.dimensions.actualCellHeight+"px"},a.prototype._announceCharacter=function(e){" "===e?this._liveRegion.innerHTML+="&nbsp;":this._liveRegion.textContent+=e},a}(a.Disposable);exports.AccessibilityManager=_;
},{"./Strings":"LZis","./shared/utils/Browser":"/tmL","./ui/RenderDebouncer":"JM9Q","./ui/Lifecycle":"0SNy","./common/Lifecycle":"VtE8"}],"7dSu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../Buffer"),t=require("../Types");exports.BOLD_CLASS="xterm-bold",exports.ITALIC_CLASS="xterm-italic",exports.CURSOR_CLASS="xterm-cursor",exports.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",exports.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",exports.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var r=function(){function r(e){this._document=e}return r.prototype.createRow=function(r,s,S,a,L,_){for(var o=this._document.createDocumentFragment(),A=0,C=0;C<r.length;C++)if(!(A>=_)){var c=r.get(C),d=c[e.CHAR_DATA_CHAR_INDEX],i=c[e.CHAR_DATA_ATTR_INDEX],R=c[e.CHAR_DATA_WIDTH_INDEX];if(0!==R){var n=this._document.createElement("span");R>1&&(n.style.width=L*R+"px");var x=i>>18,p=511&i,u=i>>9&511;if(s&&C===a)switch(n.classList.add(exports.CURSOR_CLASS),S){case"bar":n.classList.add(exports.CURSOR_STYLE_BAR_CLASS);break;case"underline":n.classList.add(exports.CURSOR_STYLE_UNDERLINE_CLASS);break;default:n.classList.add(exports.CURSOR_STYLE_BLOCK_CLASS)}if(x&t.FLAGS.INVERSE){var l=p;p=u,256===(u=l)&&(u=0),257===p&&(p=15)}x&t.FLAGS.BOLD&&(u<8&&(u+=8),n.classList.add(exports.BOLD_CLASS)),x&t.FLAGS.ITALIC&&n.classList.add(exports.ITALIC_CLASS),n.textContent=d,257!==u&&n.classList.add("xterm-fg-"+u),256!==p&&n.classList.add("xterm-bg-"+p),o.appendChild(n),A+=R}}return o},r}();exports.DomRendererRowFactory=r;
},{"../../Buffer":"nJkY","../Types":"lZiw"}],"sQSM":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../Types"),i=require("../../common/EventEmitter"),n=require("../ColorManager"),r=require("../../ui/RenderDebouncer"),s=require("./DomRendererRowFactory"),o="xterm-dom-renderer-owner-",l="xterm-rows",a="xterm-fg-",h="xterm-bg-",c="xterm-focus",m="xterm-selection",d=1,_=function(i){function _(e,a){var h=i.call(this)||this;h._terminal=e,h._terminalClass=d++,h._rowElements=[];var c=h._terminal.options.allowTransparency;return h.colorManager=new n.ColorManager(document,c),h.setTheme(a),h._rowContainer=document.createElement("div"),h._rowContainer.classList.add(l),h._rowContainer.style.lineHeight="normal",h._rowContainer.setAttribute("aria-hidden","true"),h._refreshRowElements(h._terminal.cols,h._terminal.rows),h._selectionContainer=document.createElement("div"),h._selectionContainer.classList.add(m),h._selectionContainer.setAttribute("aria-hidden","true"),h.dimensions={scaledCharWidth:null,scaledCharHeight:null,scaledCellWidth:null,scaledCellHeight:null,scaledCharLeft:null,scaledCharTop:null,scaledCanvasWidth:null,scaledCanvasHeight:null,canvasWidth:null,canvasHeight:null,actualCellWidth:null,actualCellHeight:null},h._updateDimensions(),h._renderDebouncer=new r.RenderDebouncer(h._terminal,h._renderRows.bind(h)),h._rowFactory=new s.DomRendererRowFactory(document),h._terminal.element.classList.add(o+h._terminalClass),h._terminal.screenElement.appendChild(h._rowContainer),h._terminal.screenElement.appendChild(h._selectionContainer),h._terminal.linkifier.on(t.LinkHoverEventTypes.HOVER,function(e){return h._onLinkHover(e)}),h._terminal.linkifier.on(t.LinkHoverEventTypes.LEAVE,function(e){return h._onLinkLeave(e)}),h}return e(_,i),_.prototype.dispose=function(){this._terminal.element.classList.remove(o+this._terminalClass),this._terminal.screenElement.removeChild(this._rowContainer),this._terminal.screenElement.removeChild(this._selectionContainer),this._terminal.screenElement.removeChild(this._themeStyleElement),this._terminal.screenElement.removeChild(this._dimensionsStyleElement),i.prototype.dispose.call(this)},_.prototype._updateDimensions=function(){var e=this;this.dimensions.scaledCharWidth=this._terminal.charMeasure.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=this._terminal.charMeasure.height*window.devicePixelRatio,this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth,this.dimensions.scaledCellHeight=this.dimensions.scaledCharHeight,this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._terminal.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._terminal.rows,this.dimensions.canvasWidth=this._terminal.charMeasure.width*this._terminal.cols,this.dimensions.canvasHeight=this._terminal.charMeasure.height*this._terminal.rows,this.dimensions.actualCellWidth=this._terminal.charMeasure.width,this.dimensions.actualCellHeight=this._terminal.charMeasure.height,this._rowElements.forEach(function(t){t.style.width=e.dimensions.canvasWidth+"px",t.style.height=e._terminal.charMeasure.height+"px"}),this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._terminal.screenElement.appendChild(this._dimensionsStyleElement));var t=this._terminalSelector+" ."+l+" span { display: inline-block; height: 100%; vertical-align: top; width: "+this._terminal.charMeasure.width+"px}";this._dimensionsStyleElement.innerHTML=t,this._selectionContainer.style.height=this._terminal._viewportElement.style.height,this._rowContainer.style.width=this.dimensions.canvasWidth+"px",this._rowContainer.style.height=this.dimensions.canvasHeight+"px"},_.prototype.setTheme=function(e){var t=this;e&&this.colorManager.setTheme(e),this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._terminal.screenElement.appendChild(this._themeStyleElement));var i=this._terminalSelector+" ."+l+" { color: "+this.colorManager.colors.foreground.css+"; background-color: "+this.colorManager.colors.background.css+"; font-family: "+this._terminal.getOption("fontFamily")+"; font-size: "+this._terminal.getOption("fontSize")+"px;}";return i+=this._terminalSelector+" span:not(."+s.BOLD_CLASS+") { font-weight: "+this._terminal.options.fontWeight+";}"+this._terminalSelector+" span."+s.BOLD_CLASS+" { font-weight: "+this._terminal.options.fontWeightBold+";}"+this._terminalSelector+" span."+s.ITALIC_CLASS+" { font-style: italic;}",i+=this._terminalSelector+" ."+l+":not(."+c+") ."+s.CURSOR_CLASS+" { outline: 1px solid "+this.colorManager.colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" ."+l+"."+c+" ."+s.CURSOR_CLASS+"."+s.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this.colorManager.colors.cursor.css+"; color: "+this.colorManager.colors.cursorAccent.css+";}"+this._terminalSelector+" ."+l+"."+c+" ."+s.CURSOR_CLASS+"."+s.CURSOR_STYLE_BAR_CLASS+" { box-shadow: 1px 0 0 "+this.colorManager.colors.cursor.css+" inset;}"+this._terminalSelector+" ."+l+"."+c+" ."+s.CURSOR_CLASS+"."+s.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this.colorManager.colors.cursor.css+" inset;}",i+=this._terminalSelector+" ."+m+" { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" ."+m+" div { position: absolute; background-color: "+this.colorManager.colors.selection.css+";}",this.colorManager.colors.ansi.forEach(function(e,n){i+=t._terminalSelector+" ."+a+n+" { color: "+e.css+"; }"+t._terminalSelector+" ."+h+n+" { background-color: "+e.css+"; }"}),this._themeStyleElement.innerHTML=i,this.colorManager.colors},_.prototype.onWindowResize=function(e){this._updateDimensions()},_.prototype._refreshRowElements=function(e,t){for(var i=this._rowElements.length;i<=t;i++){var n=document.createElement("div");this._rowContainer.appendChild(n),this._rowElements.push(n)}for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop())},_.prototype.onResize=function(e,t){this._refreshRowElements(e,t),this._updateDimensions()},_.prototype.onCharSizeChanged=function(){this._updateDimensions()},_.prototype.onBlur=function(){this._rowContainer.classList.remove(c)},_.prototype.onFocus=function(){this._rowContainer.classList.add(c)},_.prototype.onSelectionChanged=function(e,t,i){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(e&&t){var n=e[1]-this._terminal.buffer.ydisp,r=t[1]-this._terminal.buffer.ydisp,s=Math.max(n,0),o=Math.min(r,this._terminal.rows-1);if(!(s>=this._terminal.rows||o<0)){var l=document.createDocumentFragment();if(i)l.appendChild(this._createSelectionElement(s,e[0],t[0],o-s+1));else{var a=n===s?e[0]:0,h=s===o?t[0]:this._terminal.cols;l.appendChild(this._createSelectionElement(s,a,h));var c=o-s-1;if(l.appendChild(this._createSelectionElement(s+1,0,this._terminal.cols,c)),s!==o){var m=r===o?t[0]:this._terminal.cols;l.appendChild(this._createSelectionElement(o,0,m))}}this._selectionContainer.appendChild(l)}}},_.prototype._createSelectionElement=function(e,t,i,n){void 0===n&&(n=1);var r=document.createElement("div");return r.style.height=n*this._terminal.charMeasure.height+"px",r.style.top=e*this._terminal.charMeasure.height+"px",r.style.left=t*this._terminal.charMeasure.width+"px",r.style.width=this._terminal.charMeasure.width*(i-t)+"px",r},_.prototype.onCursorMove=function(){},_.prototype.onOptionsChanged=function(){this._updateDimensions(),this.setTheme(void 0),this._terminal.refresh(0,this._terminal.rows-1)},_.prototype.clear=function(){this._rowElements.forEach(function(e){return e.innerHTML=""})},_.prototype.refreshRows=function(e,t){this._renderDebouncer.refresh(e,t)},_.prototype._renderRows=function(e,t){for(var i=this._terminal,n=i.buffer.ybase+i.buffer.y,r=this._terminal.buffer.x,s=e;s<=t;s++){var o=this._rowElements[s];o.innerHTML="";var l=s+i.buffer.ydisp,a=i.buffer.lines.get(l),h=i.options.cursorStyle;o.appendChild(this._rowFactory.createRow(a,l===n,h,r,i.charMeasure.width,i.cols))}this._terminal.emit("refresh",{start:e,end:t})},Object.defineProperty(_.prototype,"_terminalSelector",{get:function(){return"."+o+this._terminalClass},enumerable:!0,configurable:!0}),_.prototype.registerCharacterJoiner=function(e){return-1},_.prototype.deregisterCharacterJoiner=function(e){return!1},_.prototype._onLinkHover=function(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!0)},_.prototype._onLinkLeave=function(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!1)},_.prototype._setCellUnderline=function(e,t,i,n,r,s){for(;e!==t||i!==n;){this._rowElements[i].children[e].style.textDecoration=s?"underline":"none",0===(e=(e+1)%r)&&i++}},_}(i.EventEmitter);exports.DomRenderer=_;
},{"../../Types":"4kff","../../common/EventEmitter":"lW8c","../ColorManager":"9RWO","../../ui/RenderDebouncer":"JM9Q","./DomRendererRowFactory":"7dSu"}],"PCbn":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),function(e){e[e.SEND_KEY=0]="SEND_KEY",e[e.SELECT_ALL=1]="SELECT_ALL",e[e.PAGE_UP=2]="PAGE_UP",e[e.PAGE_DOWN=3]="PAGE_DOWN"}(e=exports.KeyboardResultType||(exports.KeyboardResultType={}));
},{}],"mtWM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../Types"),C=require("../../common/data/EscapeSequences"),y={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};function k(k,a,r,S){var E={type:e.KeyboardResultType.SEND_KEY,cancel:!1,key:void 0},t=(k.shiftKey?1:0)|(k.altKey?2:0)|(k.ctrlKey?4:0)|(k.metaKey?8:0);switch(k.keyCode){case 0:"UIKeyInputUpArrow"===k.key?E.key=a?C.C0.ESC+"OA":C.C0.ESC+"[A":"UIKeyInputLeftArrow"===k.key?E.key=a?C.C0.ESC+"OD":C.C0.ESC+"[D":"UIKeyInputRightArrow"===k.key?E.key=a?C.C0.ESC+"OC":C.C0.ESC+"[C":"UIKeyInputDownArrow"===k.key&&(E.key=a?C.C0.ESC+"OB":C.C0.ESC+"[B");break;case 8:if(k.shiftKey){E.key=C.C0.BS;break}if(k.altKey){E.key=C.C0.ESC+C.C0.DEL;break}E.key=C.C0.DEL;break;case 9:if(k.shiftKey){E.key=C.C0.ESC+"[Z";break}E.key=C.C0.HT,E.cancel=!0;break;case 13:E.key=C.C0.CR,E.cancel=!0;break;case 27:E.key=C.C0.ESC,E.cancel=!0;break;case 37:t?(E.key=C.C0.ESC+"[1;"+(t+1)+"D",E.key===C.C0.ESC+"[1;3D"&&(E.key=r?C.C0.ESC+"b":C.C0.ESC+"[1;5D")):E.key=a?C.C0.ESC+"OD":C.C0.ESC+"[D";break;case 39:t?(E.key=C.C0.ESC+"[1;"+(t+1)+"C",E.key===C.C0.ESC+"[1;3C"&&(E.key=r?C.C0.ESC+"f":C.C0.ESC+"[1;5C")):E.key=a?C.C0.ESC+"OC":C.C0.ESC+"[C";break;case 38:t?(E.key=C.C0.ESC+"[1;"+(t+1)+"A",E.key===C.C0.ESC+"[1;3A"&&(E.key=C.C0.ESC+"[1;5A")):E.key=a?C.C0.ESC+"OA":C.C0.ESC+"[A";break;case 40:t?(E.key=C.C0.ESC+"[1;"+(t+1)+"B",E.key===C.C0.ESC+"[1;3B"&&(E.key=C.C0.ESC+"[1;5B")):E.key=a?C.C0.ESC+"OB":C.C0.ESC+"[B";break;case 45:k.shiftKey||k.ctrlKey||(E.key=C.C0.ESC+"[2~");break;case 46:E.key=t?C.C0.ESC+"[3;"+(t+1)+"~":C.C0.ESC+"[3~";break;case 36:E.key=t?C.C0.ESC+"[1;"+(t+1)+"H":a?C.C0.ESC+"OH":C.C0.ESC+"[H";break;case 35:E.key=t?C.C0.ESC+"[1;"+(t+1)+"F":a?C.C0.ESC+"OF":C.C0.ESC+"[F";break;case 33:k.shiftKey?E.type=e.KeyboardResultType.PAGE_UP:E.key=C.C0.ESC+"[5~";break;case 34:k.shiftKey?E.type=e.KeyboardResultType.PAGE_DOWN:E.key=C.C0.ESC+"[6~";break;case 112:E.key=t?C.C0.ESC+"[1;"+(t+1)+"P":C.C0.ESC+"OP";break;case 113:E.key=t?C.C0.ESC+"[1;"+(t+1)+"Q":C.C0.ESC+"OQ";break;case 114:E.key=t?C.C0.ESC+"[1;"+(t+1)+"R":C.C0.ESC+"OR";break;case 115:E.key=t?C.C0.ESC+"[1;"+(t+1)+"S":C.C0.ESC+"OS";break;case 116:E.key=t?C.C0.ESC+"[15;"+(t+1)+"~":C.C0.ESC+"[15~";break;case 117:E.key=t?C.C0.ESC+"[17;"+(t+1)+"~":C.C0.ESC+"[17~";break;case 118:E.key=t?C.C0.ESC+"[18;"+(t+1)+"~":C.C0.ESC+"[18~";break;case 119:E.key=t?C.C0.ESC+"[19;"+(t+1)+"~":C.C0.ESC+"[19~";break;case 120:E.key=t?C.C0.ESC+"[20;"+(t+1)+"~":C.C0.ESC+"[20~";break;case 121:E.key=t?C.C0.ESC+"[21;"+(t+1)+"~":C.C0.ESC+"[21~";break;case 122:E.key=t?C.C0.ESC+"[23;"+(t+1)+"~":C.C0.ESC+"[23~";break;case 123:E.key=t?C.C0.ESC+"[24;"+(t+1)+"~":C.C0.ESC+"[24~";break;default:if(!k.ctrlKey||k.shiftKey||k.altKey||k.metaKey)if(r&&!S||!k.altKey||k.metaKey)r&&!k.altKey&&!k.ctrlKey&&k.metaKey&&65===k.keyCode&&(E.type=e.KeyboardResultType.SELECT_ALL);else{var o=y[k.keyCode],s=o&&o[k.shiftKey?1:0];if(s)E.key=C.C0.ESC+s;else if(k.keyCode>=65&&k.keyCode<=90){var c=k.ctrlKey?k.keyCode-64:k.keyCode+32;E.key=C.C0.ESC+String.fromCharCode(c)}}else k.keyCode>=65&&k.keyCode<=90?E.key=String.fromCharCode(k.keyCode-64):32===k.keyCode?E.key=String.fromCharCode(0):k.keyCode>=51&&k.keyCode<=55?E.key=String.fromCharCode(k.keyCode-51+27):56===k.keyCode?E.key=String.fromCharCode(127):219===k.keyCode?E.key=String.fromCharCode(27):220===k.keyCode?E.key=String.fromCharCode(28):221===k.keyCode&&(E.key=String.fromCharCode(29))}return E}exports.evaluateKeyboardEvent=k;
},{"../Types":"PCbn","../../common/data/EscapeSequences":"xnQp"}],"Ns+I":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),t=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./BufferSet"),i=require("./Buffer"),s=require("./CompositionHelper"),o=require("./common/EventEmitter"),n=require("./Viewport"),a=require("./handlers/Clipboard"),h=require("./common/data/EscapeSequences"),l=require("./InputHandler"),u=require("./renderer/Renderer"),c=require("./Linkifier"),f=require("./SelectionManager"),p=require("./ui/CharMeasure"),d=t(require("./shared/utils/Browser")),m=require("./ui/Lifecycle"),b=t(require("./Strings")),y=require("./utils/MouseHelper"),g=require("./utils/Clone"),_=require("./SoundManager"),w=require("./renderer/ColorManager"),v=require("./ui/MouseZoneManager"),M=require("./AccessibilityManager"),L=require("./ui/ScreenDprMonitor"),C=require("./renderer/atlas/CharAtlasCache"),S=require("./renderer/dom/DomRenderer"),x=require("./core/input/Keyboard"),D=require("./core/Types"),E=require("./BufferLine"),k="undefined"!=typeof window?window.document:null,T=5,A=300,B=["cols","rows"],H={cols:80,rows:24,convertEol:!1,termName:"xterm",cursorBlink:!1,cursorStyle:"block",bellSound:_.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,enableBold:!0,experimentalCharAtlas:"static",fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,letterSpacing:0,scrollback:1e3,screenKeys:!1,screenReaderMode:!1,debug:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,cancelEvents:!1,disableStdin:!1,useFlowControl:!1,allowTransparency:!1,tabStopWidth:8,theme:null,rightClickSelectsWord:d.isMac,rendererType:"canvas"},R=function(t){function o(e){void 0===e&&(e={});var r=t.call(this)||this;return r.browser=d,r.options=g.clone(e),r._setup(),r}return e(o,t),o.prototype.dispose=function(){t.prototype.dispose.call(this),this._customKeyEventHandler=null,C.removeTerminalFromCache(this),this.handler=function(){},this.write=function(){},this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)},o.prototype.destroy=function(){this.dispose()},o.prototype._setup=function(){var e=this;Object.keys(H).forEach(function(t){null!==e.options[t]&&void 0!==e.options[t]||(e.options[t]=H[t])}),this._parent=k?k.body:null,this.cols=this.options.cols,this.rows=this.options.rows,this.options.handler&&this.on("data",this.options.handler),this.cursorState=0,this.cursorHidden=!1,this._customKeyEventHandler=null,this.applicationKeypad=!1,this.applicationCursor=!1,this.originMode=!1,this.insertMode=!1,this.wraparoundMode=!0,this.bracketedPasteMode=!1,this.charset=null,this.gcharset=null,this.glevel=0,this.charsets=[null],this.curAttr=i.DEFAULT_ATTR,this.params=[],this.currentParam=0,this.writeBuffer=[],this._writeInProgress=!1,this._xoffSentToCatchUp=!1,this._userScrolling=!1,this._inputHandler=new l.InputHandler(this),this.register(this._inputHandler),this.renderer=this.renderer||null,this.selectionManager=this.selectionManager||null,this.linkifier=this.linkifier||new c.Linkifier(this),this._mouseZoneManager=this._mouseZoneManager||null,this.soundManager=this.soundManager||new _.SoundManager(this),this.buffers=new r.BufferSet(this),this.selectionManager&&(this.selectionManager.clearSelection(),this.selectionManager.initBuffersListeners())},Object.defineProperty(o.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!0,configurable:!0}),o.prototype.eraseAttr=function(){return-512&i.DEFAULT_ATTR|511&this.curAttr},o.prototype.focus=function(){this.textarea&&this.textarea.focus()},Object.defineProperty(o.prototype,"isFocused",{get:function(){return k.activeElement===this.textarea},enumerable:!0,configurable:!0}),o.prototype.getOption=function(e){if(!(e in H))throw new Error('No option with key "'+e+'"');return this.options[e]},o.prototype.setOption=function(e,t){if(!(e in H))throw new Error('No option with key "'+e+'"');if(-1!==B.indexOf(e)&&console.error('Option "'+e+'" can only be set in the constructor'),this.options[e]!==t){switch(e){case"bellStyle":t||(t="none");break;case"cursorStyle":t||(t="block");break;case"fontWeight":t||(t="normal");break;case"fontWeightBold":t||(t="bold");break;case"lineHeight":if(t<1)return void console.warn(e+" cannot be less than 1, value: "+t);case"rendererType":t||(t="canvas");break;case"tabStopWidth":if(t<1)return void console.warn(e+" cannot be less than 1, value: "+t);break;case"theme":if(this.renderer)return void this._setTheme(t);break;case"scrollback":if((t=Math.min(t,i.MAX_BUFFER_SIZE))<0)return void console.warn(e+" cannot be less than 0, value: "+t);if(this.options[e]!==t){var r=this.rows+t;if(this.buffer.lines.length>r){var s=this.buffer.lines.length-r,o=this.buffer.ydisp-s<0;this.buffer.lines.trimStart(s),this.buffer.ybase=Math.max(this.buffer.ybase-s,0),this.buffer.ydisp=Math.max(this.buffer.ydisp-s,0),o&&this.refresh(0,this.rows-1)}}}switch(this.options[e]=t,e){case"fontFamily":case"fontSize":this.renderer&&(this.renderer.clear(),this.charMeasure.measure(this.options));break;case"drawBoldTextInBrightColors":case"experimentalCharAtlas":case"enableBold":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":this.renderer&&(this.renderer.clear(),this.renderer.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));case"rendererType":this.renderer&&(this.unregister(this.renderer),this.renderer.dispose(),this.renderer=null),this._setupRenderer(),this.renderer.onCharSizeChanged(),this._theme&&this.renderer.setTheme(this._theme);break;case"scrollback":this.buffers.resize(this.cols,this.rows),this.viewport&&this.viewport.syncScrollArea();break;case"screenReaderMode":t?this._accessibilityManager||(this._accessibilityManager=new M.AccessibilityManager(this)):this._accessibilityManager&&(this._accessibilityManager.dispose(),this._accessibilityManager=null);break;case"tabStopWidth":this.buffers.setupTabStops()}this.renderer&&this.renderer.onOptionsChanged()}},o.prototype._onTextAreaFocus=function(e){this.sendFocus&&this.handler(h.C0.ESC+"[I"),this.updateCursorStyle(e),this.element.classList.add("focus"),this.showCursor(),this.emit("focus")},o.prototype.blur=function(){return this.textarea.blur()},o.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.sendFocus&&this.handler(h.C0.ESC+"[O"),this.element.classList.remove("focus"),this.emit("blur")},o.prototype._initGlobal=function(){var e=this;this._bindKeys(),this.register(m.addDisposableDomListener(this.element,"copy",function(t){e.hasSelection()&&a.copyHandler(t,e,e.selectionManager)}));var t=function(t){return a.pasteHandler(t,e)};this.register(m.addDisposableDomListener(this.textarea,"paste",t)),this.register(m.addDisposableDomListener(this.element,"paste",t)),d.isFirefox?this.register(m.addDisposableDomListener(this.element,"mousedown",function(t){2===t.button&&a.rightClickHandler(t,e.textarea,e.selectionManager,e.options.rightClickSelectsWord)})):this.register(m.addDisposableDomListener(this.element,"contextmenu",function(t){a.rightClickHandler(t,e.textarea,e.selectionManager,e.options.rightClickSelectsWord)})),d.isLinux&&this.register(m.addDisposableDomListener(this.element,"auxclick",function(t){1===t.button&&a.moveTextAreaUnderMouseCursor(t,e.textarea)}))},o.prototype._bindKeys=function(){var e=this,t=this;this.register(m.addDisposableDomListener(this.element,"keydown",function(e){k.activeElement===this&&t._keyDown(e)},!0)),this.register(m.addDisposableDomListener(this.element,"keypress",function(e){k.activeElement===this&&t._keyPress(e)},!0)),this.register(m.addDisposableDomListener(this.element,"keyup",function(r){K(r)||e.focus(),t._keyUp(r)},!0)),this.register(m.addDisposableDomListener(this.textarea,"keydown",function(t){return e._keyDown(t)},!0)),this.register(m.addDisposableDomListener(this.textarea,"keypress",function(t){return e._keyPress(t)},!0)),this.register(m.addDisposableDomListener(this.textarea,"compositionstart",function(){return e._compositionHelper.compositionstart()})),this.register(m.addDisposableDomListener(this.textarea,"compositionupdate",function(t){return e._compositionHelper.compositionupdate(t)})),this.register(m.addDisposableDomListener(this.textarea,"compositionend",function(){return e._compositionHelper.compositionend()})),this.register(this.addDisposableListener("refresh",function(){return e._compositionHelper.updateCompositionElements()})),this.register(this.addDisposableListener("refresh",function(t){return e._queueLinkification(t.start,t.end)}))},o.prototype.open=function(e){var t=this;if(this._parent=e||this._parent,!this._parent)throw new Error("Terminal requires a parent element.");this._context=this._parent.ownerDocument.defaultView,this._document=this._parent.ownerDocument,this._screenDprMonitor=new L.ScreenDprMonitor,this._screenDprMonitor.setListener(function(){return t.emit("dprchange",window.devicePixelRatio)}),this.register(this._screenDprMonitor),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),this._parent.appendChild(this.element);var r=k.createDocumentFragment();this._viewportElement=k.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),r.appendChild(this._viewportElement),this._viewportScrollArea=k.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=k.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=k.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),r.appendChild(this.screenElement),this._mouseZoneManager=new v.MouseZoneManager(this),this.register(this._mouseZoneManager),this.register(this.addDisposableListener("scroll",function(){return t._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this._mouseZoneManager),this.textarea=k.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",b.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register(m.addDisposableDomListener(this.textarea,"focus",function(e){return t._onTextAreaFocus(e)})),this.register(m.addDisposableDomListener(this.textarea,"blur",function(){return t._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea),this._compositionView=k.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=new s.CompositionHelper(this.textarea,this._compositionView,this),this._helperContainer.appendChild(this._compositionView),this.charMeasure=new p.CharMeasure(k,this._helperContainer),this.element.appendChild(r),this._setupRenderer(),this._theme=this.options.theme,this.options.theme=null,this.viewport=new n.Viewport(this,this._viewportElement,this._viewportScrollArea,this.charMeasure),this.viewport.onThemeChanged(this.renderer.colorManager.colors),this.register(this.viewport),this.register(this.addDisposableListener("cursormove",function(){return t.renderer.onCursorMove()})),this.register(this.addDisposableListener("resize",function(){return t.renderer.onResize(t.cols,t.rows)})),this.register(this.addDisposableListener("blur",function(){return t.renderer.onBlur()})),this.register(this.addDisposableListener("focus",function(){return t.renderer.onFocus()})),this.register(this.addDisposableListener("dprchange",function(){return t.renderer.onWindowResize(window.devicePixelRatio)})),this.register(m.addDisposableDomListener(window,"resize",function(){return t.renderer.onWindowResize(window.devicePixelRatio)})),this.register(this.charMeasure.addDisposableListener("charsizechanged",function(){return t.renderer.onCharSizeChanged()})),this.register(this.renderer.addDisposableListener("resize",function(e){return t.viewport.syncScrollArea()})),this.selectionManager=new f.SelectionManager(this,this.charMeasure),this.register(m.addDisposableDomListener(this.element,"mousedown",function(e){return t.selectionManager.onMouseDown(e)})),this.register(this.selectionManager.addDisposableListener("refresh",function(e){return t.renderer.onSelectionChanged(e.start,e.end,e.columnSelectMode)})),this.register(this.selectionManager.addDisposableListener("newselection",function(e){t.textarea.value=e,t.textarea.focus(),t.textarea.select()})),this.register(this.addDisposableListener("scroll",function(){t.viewport.syncScrollArea(),t.selectionManager.refresh()})),this.register(m.addDisposableDomListener(this._viewportElement,"scroll",function(){return t.selectionManager.refresh()})),this.mouseHelper=new y.MouseHelper(this.renderer),this.options.screenReaderMode&&(this._accessibilityManager=new M.AccessibilityManager(this)),this.charMeasure.measure(this.options),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},o.prototype._setupRenderer=function(){switch(this.options.rendererType){case"canvas":this.renderer=new u.Renderer(this,this.options.theme);break;case"dom":this.renderer=new S.DomRenderer(this,this.options.theme);break;default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}this.register(this.renderer)},o.prototype._setTheme=function(e){this._theme=e;var t=this.renderer.setTheme(e);this.viewport&&this.viewport.onThemeChanged(t)},o.prototype.bindMouse=function(){var e=this,t=this.element,r=this,i=32;function s(e){var t,s;if(t=function(e){var t,i,s,o,n;switch(e.overrideType||e.type){case"mousedown":t=null!==e.button&&void 0!==e.button?+e.button:null!==e.which&&void 0!==e.which?e.which-1:null,d.isMSIE&&(t=1===t?0:4===t?1:t);break;case"mouseup":t=3;break;case"DOMMouseScroll":t=e.detail<0?64:65;break;case"wheel":t=e.wheelDeltaY>0?64:65}i=e.shiftKey?4:0,s=e.metaKey?8:0,o=e.ctrlKey?16:0,n=i|s|o,r.vt200Mouse?n&=o:r.normalMouse||(n=0);return t=32+(n<<2)+t}(e),s=r.mouseHelper.getRawByteCoords(e,r.screenElement,r.charMeasure,r.options.lineHeight,r.cols,r.rows))switch(n(t,s),e.overrideType||e.type){case"mousedown":i=t;break;case"mouseup":i=32}}function o(e,t){if(r.utfMouse){if(2047===t)return void e.push(0);t<127?e.push(t):(t>2047&&(t=2047),e.push(192|t>>6),e.push(128|63&t))}else{if(255===t)return void e.push(0);t>127&&(t=127),e.push(t)}}function n(e,t){if(r._vt300Mouse){e&=3,t.x-=32,t.y-=32;var i=h.C0.ESC+"[24";if(0===e)i+="1";else if(1===e)i+="3";else if(2===e)i+="5";else{if(3===e)return;i+="0"}return i+="~["+t.x+","+t.y+"]\r",void r.handler(i)}if(r._decLocator)return e&=3,t.x-=32,t.y-=32,0===e?e=2:1===e?e=4:2===e?e=6:3===e&&(e=3),void r.handler(h.C0.ESC+"["+e+";"+(3===e?4:0)+";"+t.y+";"+t.x+";"+t.page||"0&w");if(r.urxvtMouse)return t.x-=32,t.y-=32,t.x++,t.y++,void r.handler(h.C0.ESC+"["+e+";"+t.x+";"+t.y+"M");if(r.sgrMouse)return t.x-=32,t.y-=32,void r.handler(h.C0.ESC+"[<"+((3==(3&e)?-4&e:e)-32)+";"+t.x+";"+t.y+(3==(3&e)?"m":"M"));var s=[];o(s,e),o(s,t.x),o(s,t.y),r.handler(h.C0.ESC+"[M"+String.fromCharCode.apply(String,s))}this.register(m.addDisposableDomListener(t,"mousedown",function(t){if(t.preventDefault(),e.focus(),e.mouseEvents&&!e.selectionManager.shouldForceSelection(t)){if(s(t),e.vt200Mouse)return t.overrideType="mouseup",s(t),e.cancel(t);var o;e.normalMouse&&(o=function(t){var s,o,a;e.normalMouse&&(s=t,o=i,(a=r.mouseHelper.getRawByteCoords(s,r.screenElement,r.charMeasure,r.options.lineHeight,r.cols,r.rows))&&n(o+=32,a))},e._document.addEventListener("mousemove",o));var a=function(t){return e.normalMouse&&!e.x10Mouse&&s(t),o&&(e._document.removeEventListener("mousemove",o),o=null),e._document.removeEventListener("mouseup",a),e.cancel(t)};return e._document.addEventListener("mouseup",a),e.cancel(t)}})),this.register(m.addDisposableDomListener(t,"wheel",function(t){if(e.mouseEvents)e.x10Mouse||e._vt300Mouse||e._decLocator||(s(t),t.preventDefault());else if(!e.buffer.hasScrollback){var r=e.viewport.getLinesScrolled(t);if(0===r)return;for(var i=h.C0.ESC+(e.applicationCursor?"O":"[")+(t.deltaY<0?"A":"B"),o="",n=0;n<Math.abs(r);n++)o+=i;e.handler(o)}})),this.register(m.addDisposableDomListener(t,"wheel",function(t){if(!e.mouseEvents)return e.viewport.onWheel(t),e.cancel(t)})),this.register(m.addDisposableDomListener(t,"touchstart",function(t){if(!e.mouseEvents)return e.viewport.onTouchStart(t),e.cancel(t)})),this.register(m.addDisposableDomListener(t,"touchmove",function(t){if(!e.mouseEvents)return e.viewport.onTouchMove(t),e.cancel(t)}))},o.prototype.refresh=function(e,t){this.renderer&&this.renderer.refreshRows(e,t)},o.prototype._queueLinkification=function(e,t){this.linkifier&&this.linkifier.linkifyRows(e,t)},o.prototype.updateCursorStyle=function(e){this.selectionManager&&this.selectionManager.shouldColumnSelect(e)?this.element.classList.add("xterm-cursor-crosshair"):this.element.classList.remove("xterm-cursor-crosshair")},o.prototype.showCursor=function(){this.cursorState||(this.cursorState=1,this.refresh(this.buffer.y,this.buffer.y))},o.prototype.scroll=function(e){var t=E.BufferLine.blankLine(this.cols,i.DEFAULT_ATTR,e),r=this.buffer.ybase+this.buffer.scrollTop,s=this.buffer.ybase+this.buffer.scrollBottom;if(0===this.buffer.scrollTop){var o=this.buffer.lines.length===this.buffer.lines.maxLength;s===this.buffer.lines.length-1?this.buffer.lines.push(t):this.buffer.lines.splice(s+1,0,t),o?this._userScrolling&&(this.buffer.ydisp=Math.max(this.buffer.ydisp-1,0)):(this.buffer.ybase++,this._userScrolling||this.buffer.ydisp++)}else{var n=s-r+1;this.buffer.lines.shiftElements(r+1,n-1,-1),this.buffer.lines.set(s,t)}this._userScrolling||(this.buffer.ydisp=this.buffer.ybase),this.updateRange(this.buffer.scrollTop),this.updateRange(this.buffer.scrollBottom),this.emit("scroll",this.buffer.ydisp)},o.prototype.scrollLines=function(e,t){if(e<0){if(0===this.buffer.ydisp)return;this._userScrolling=!0}else e+this.buffer.ydisp>=this.buffer.ybase&&(this._userScrolling=!1);var r=this.buffer.ydisp;this.buffer.ydisp=Math.max(Math.min(this.buffer.ydisp+e,this.buffer.ybase),0),r!==this.buffer.ydisp&&(t||this.emit("scroll",this.buffer.ydisp),this.refresh(0,this.rows-1))},o.prototype.scrollPages=function(e){this.scrollLines(e*(this.rows-1))},o.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},o.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},o.prototype.scrollToLine=function(e){var t=e-this.buffer.ydisp;0!==t&&this.scrollLines(t)},o.prototype.write=function(e){var t=this;this._isDisposed||e&&(this.writeBuffer.push(e),this.options.useFlowControl&&!this._xoffSentToCatchUp&&this.writeBuffer.length>=T&&(this.handler(h.C0.DC3),this._xoffSentToCatchUp=!0),!this._writeInProgress&&this.writeBuffer.length>0&&(this._writeInProgress=!0,setTimeout(function(){t._innerWrite()})))},o.prototype._innerWrite=function(){var e=this;this._isDisposed&&(this.writeBuffer=[]);for(var t=this.writeBuffer.splice(0,A);t.length>0;){var r=t.shift();this._xoffSentToCatchUp&&0===t.length&&0===this.writeBuffer.length&&(this.handler(h.C0.DC1),this._xoffSentToCatchUp=!1),this._refreshStart=this.buffer.y,this._refreshEnd=this.buffer.y,this._inputHandler.parse(r),this.updateRange(this.buffer.y),this.refresh(this._refreshStart,this._refreshEnd)}this.writeBuffer.length>0?setTimeout(function(){return e._innerWrite()},0):this._writeInProgress=!1},o.prototype.writeln=function(e){this.write(e+"\r\n")},o.prototype.attachCustomKeyEventHandler=function(e){this._customKeyEventHandler=e},o.prototype.registerLinkMatcher=function(e,t,r){var i=this.linkifier.registerLinkMatcher(e,t,r);return this.refresh(0,this.rows-1),i},o.prototype.deregisterLinkMatcher=function(e){this.linkifier.deregisterLinkMatcher(e)&&this.refresh(0,this.rows-1)},o.prototype.registerCharacterJoiner=function(e){var t=this.renderer.registerCharacterJoiner(e);return this.refresh(0,this.rows-1),t},o.prototype.deregisterCharacterJoiner=function(e){this.renderer.deregisterCharacterJoiner(e)&&this.refresh(0,this.rows-1)},Object.defineProperty(o.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!0,configurable:!0}),o.prototype.addMarker=function(e){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+e)},o.prototype.hasSelection=function(){return!!this.selectionManager&&this.selectionManager.hasSelection},o.prototype.getSelection=function(){return this.selectionManager?this.selectionManager.selectionText:""},o.prototype.clearSelection=function(){this.selectionManager&&this.selectionManager.clearSelection()},o.prototype.selectAll=function(){this.selectionManager&&this.selectionManager.selectAll()},o.prototype.selectLines=function(e,t){this.selectionManager&&this.selectionManager.selectLines(e,t)},o.prototype._keyDown=function(e){if(this._customKeyEventHandler&&!1===this._customKeyEventHandler(e))return!1;if(!this._compositionHelper.keydown(e))return this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;var t=x.evaluateKeyboardEvent(e,this.applicationCursor,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(e),t.type===D.KeyboardResultType.PAGE_DOWN||t.type===D.KeyboardResultType.PAGE_UP){var r=this.rows-1;return this.scrollLines(t.type===D.KeyboardResultType.PAGE_UP?-r:r),this.cancel(e,!0)}return t.type===D.KeyboardResultType.SELECT_ALL&&this.selectAll(),!!this._isThirdLevelShift(this.browser,e)||(t.cancel&&this.cancel(e,!0),!t.key||(this.emit("keydown",e),this.emit("key",t.key,e),this.showCursor(),this.handler(t.key),this.cancel(e,!0)))},o.prototype._isThirdLevelShift=function(e,t){var r=e.isMac&&!this.options.macOptionIsMeta&&t.altKey&&!t.ctrlKey&&!t.metaKey||e.isMSWindows&&t.altKey&&t.ctrlKey&&!t.metaKey;return"keypress"===t.type?r:r&&(!t.keyCode||t.keyCode>47)},o.prototype.setgLevel=function(e){this.glevel=e,this.charset=this.charsets[e]},o.prototype.setgCharset=function(e,t){this.charsets[e]=t,this.glevel===e&&(this.charset=t)},o.prototype._keyUp=function(e){this.updateCursorStyle(e)},o.prototype._keyPress=function(e){var t;if(this._customKeyEventHandler&&!1===this._customKeyEventHandler(e))return!1;if(this.cancel(e),e.charCode)t=e.charCode;else if(null===e.which||void 0===e.which)t=e.keyCode;else{if(0===e.which||0===e.charCode)return!1;t=e.which}return!(!t||(e.altKey||e.ctrlKey||e.metaKey)&&!this._isThirdLevelShift(this.browser,e))&&(t=String.fromCharCode(t),this.emit("keypress",t,e),this.emit("key",t,e),this.showCursor(),this.handler(t),!0)},o.prototype.bell=function(){var e=this;this.emit("bell"),this._soundBell()&&this.soundManager.playBellSound(),this._visualBell()&&(this.element.classList.add("visual-bell-active"),clearTimeout(this._visualBellTimer),this._visualBellTimer=window.setTimeout(function(){e.element.classList.remove("visual-bell-active")},200))},o.prototype.log=function(e,t){this.options.debug&&this._context.console&&this._context.console.log&&this._context.console.log(e,t)},o.prototype.error=function(e,t){this.options.debug&&this._context.console&&this._context.console.error&&this._context.console.error(e,t)},o.prototype.resize=function(e,t){isNaN(e)||isNaN(t)||(e!==this.cols||t!==this.rows?(e<1&&(e=1),t<1&&(t=1),this.buffers.resize(e,t),this.cols=e,this.rows=t,this.buffers.setupTabStops(this.cols),this.charMeasure&&this.charMeasure.measure(this.options),this.refresh(0,this.rows-1),this.emit("resize",{cols:e,rows:t})):!this.charMeasure||this.charMeasure.width&&this.charMeasure.height||this.charMeasure.measure(this.options))},o.prototype.updateRange=function(e){e<this._refreshStart&&(this._refreshStart=e),e>this._refreshEnd&&(this._refreshEnd=e)},o.prototype.maxRange=function(){this._refreshStart=0,this._refreshEnd=this.rows-1},o.prototype.clear=function(){if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var e=1;e<this.rows;e++)this.buffer.lines.push(E.BufferLine.blankLine(this.cols,i.DEFAULT_ATTR));this.refresh(0,this.rows-1),this.emit("scroll",this.buffer.ydisp)}},o.prototype.ch=function(e){return e?[this.eraseAttr(),i.NULL_CELL_CHAR,i.NULL_CELL_WIDTH,i.NULL_CELL_CODE]:[i.DEFAULT_ATTR,i.NULL_CELL_CHAR,i.NULL_CELL_WIDTH,i.NULL_CELL_CODE]},o.prototype.is=function(e){return 0===(this.options.termName+"").indexOf(e)},o.prototype.handler=function(e){this.options.disableStdin||(this.selectionManager&&this.selectionManager.hasSelection&&this.selectionManager.clearSelection(),this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),this.emit("data",e))},o.prototype.handleTitle=function(e){this.emit("title",e)},o.prototype.index=function(){this.buffer.y++,this.buffer.y>this.buffer.scrollBottom&&(this.buffer.y--,this.scroll()),this.buffer.x>=this.cols&&this.buffer.x--},o.prototype.reverseIndex=function(){if(this.buffer.y===this.buffer.scrollTop){var e=this.buffer.scrollBottom-this.buffer.scrollTop;this.buffer.lines.shiftElements(this.buffer.y+this.buffer.ybase,e,1),this.buffer.lines.set(this.buffer.y+this.buffer.ybase,E.BufferLine.blankLine(this.cols,this.eraseAttr())),this.updateRange(this.buffer.scrollTop),this.updateRange(this.buffer.scrollBottom)}else this.buffer.y--},o.prototype.reset=function(){this.options.rows=this.rows,this.options.cols=this.cols;var e=this._customKeyEventHandler,t=this._inputHandler,r=this.cursorState;this._setup(),this._customKeyEventHandler=e,this._inputHandler=t,this.cursorState=r,this.refresh(0,this.rows-1),this.viewport&&this.viewport.syncScrollArea()},o.prototype.tabSet=function(){this.buffer.tabs[this.buffer.x]=!0},o.prototype.cancel=function(e,t){if(this.options.cancelEvents||t)return e.preventDefault(),e.stopPropagation(),!1},o.prototype.matchColor=function(e,t,r){var i=e<<16|t<<8|r;if(null!==O[i]&&void 0!==O[i])return O[i];for(var s,o,n=1/0,a=-1,h=0;h<w.DEFAULT_ANSI_COLORS.length;h++){if(0===(o=q(e,t,r,(s=w.DEFAULT_ANSI_COLORS[h].rgba)>>>24,s>>>16&255,s>>>8&255))){a=h;break}o<n&&(n=o,a=h)}return O[i]=a},o.prototype._visualBell=function(){return!1},o.prototype._soundBell=function(){return"sound"===this.options.bellStyle},o}(o.EventEmitter);function K(e){return 16===e.keyCode||17===e.keyCode||18===e.keyCode}exports.Terminal=R;var O={};function q(e,t,r,i,s,o){return Math.pow(30*(e-i),2)+Math.pow(59*(t-s),2)+Math.pow(11*(r-o),2)}
},{"./BufferSet":"cxFs","./Buffer":"nJkY","./CompositionHelper":"ZmpO","./common/EventEmitter":"lW8c","./Viewport":"8hXU","./handlers/Clipboard":"3c3X","./common/data/EscapeSequences":"xnQp","./InputHandler":"uvkR","./renderer/Renderer":"gvu2","./Linkifier":"ijp2","./SelectionManager":"TOt/","./ui/CharMeasure":"fEPo","./shared/utils/Browser":"/tmL","./ui/Lifecycle":"0SNy","./Strings":"LZis","./utils/MouseHelper":"ueEb","./utils/Clone":"nSfh","./SoundManager":"OPxE","./renderer/ColorManager":"9RWO","./ui/MouseZoneManager":"w6zZ","./AccessibilityManager":"zPBq","./ui/ScreenDprMonitor":"9pHa","./renderer/atlas/CharAtlasCache":"U7kw","./renderer/dom/DomRenderer":"sQSM","./core/input/Keyboard":"mtWM","./core/Types":"PCbn","./BufferLine":"dDZ9"}],"nilJ":[function(require,module,exports) {
"use strict";var e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t};Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../Terminal"),o=e(require("../Strings")),r=function(){function e(e){this._core=new t.Terminal(e)}return Object.defineProperty(e.prototype,"element",{get:function(){return this._core.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return this._core.rows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cols",{get:function(){return this._core.cols},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"markers",{get:function(){return this._core.markers},enumerable:!0,configurable:!0}),e.prototype.blur=function(){this._core.blur()},e.prototype.focus=function(){this._core.focus()},e.prototype.on=function(e,t){this._core.on(e,t)},e.prototype.off=function(e,t){this._core.off(e,t)},e.prototype.emit=function(e,t){this._core.emit(e,t)},e.prototype.addDisposableListener=function(e,t){return this._core.addDisposableListener(e,t)},e.prototype.resize=function(e,t){this._core.resize(e,t)},e.prototype.writeln=function(e){this._core.writeln(e)},e.prototype.open=function(e){this._core.open(e)},e.prototype.attachCustomKeyEventHandler=function(e){this._core.attachCustomKeyEventHandler(e)},e.prototype.registerLinkMatcher=function(e,t,o){return this._core.registerLinkMatcher(e,t,o)},e.prototype.deregisterLinkMatcher=function(e){this._core.deregisterLinkMatcher(e)},e.prototype.registerCharacterJoiner=function(e){return this._core.registerCharacterJoiner(e)},e.prototype.deregisterCharacterJoiner=function(e){this._core.deregisterCharacterJoiner(e)},e.prototype.addMarker=function(e){return this._core.addMarker(e)},e.prototype.hasSelection=function(){return this._core.hasSelection()},e.prototype.getSelection=function(){return this._core.getSelection()},e.prototype.clearSelection=function(){this._core.clearSelection()},e.prototype.selectAll=function(){this._core.selectAll()},e.prototype.selectLines=function(e,t){this._core.selectLines(e,t)},e.prototype.dispose=function(){this._core.dispose()},e.prototype.destroy=function(){this._core.destroy()},e.prototype.scrollLines=function(e){this._core.scrollLines(e)},e.prototype.scrollPages=function(e){this._core.scrollPages(e)},e.prototype.scrollToTop=function(){this._core.scrollToTop()},e.prototype.scrollToBottom=function(){this._core.scrollToBottom()},e.prototype.scrollToLine=function(e){this._core.scrollToLine(e)},e.prototype.clear=function(){this._core.clear()},e.prototype.write=function(e){this._core.write(e)},e.prototype.getOption=function(e){return this._core.getOption(e)},e.prototype.setOption=function(e,t){this._core.setOption(e,t)},e.prototype.refresh=function(e,t){this._core.refresh(e,t)},e.prototype.reset=function(){this._core.reset()},e.applyAddon=function(t){t.apply(e)},Object.defineProperty(e,"strings",{get:function(){return o},enumerable:!0,configurable:!0}),e}();exports.Terminal=r;
},{"../Terminal":"Ns+I","../Strings":"LZis"}],"xWgB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./public/Terminal");module.exports=e.Terminal;
},{"./public/Terminal":"nilJ"}],"pTUZ":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(t,n,r,a){var s,f=t;function i(e,t){a?f.__pushToBuffer(e||t):f.write(e||t)}r=void 0===r||r,f.__socket=n,f.__flushBuffer=function(){f.write(f.__attachSocketBuffer),f.__attachSocketBuffer=null},f.__pushToBuffer=function(e){f.__attachSocketBuffer?f.__attachSocketBuffer+=e:(f.__attachSocketBuffer=e,setTimeout(f.__flushBuffer,10))},f.__getMessage=function(t){if("object"===e(t.data))if(s||(s=new TextDecoder),t.data instanceof ArrayBuffer)i(s.decode(t.data));else{var o=new FileReader;o.addEventListener("load",function(){i(s.decode(o.result))}),o.readAsArrayBuffer(t.data)}else{if("string"!=typeof t.data)throw Error('Cannot handle "'+e(t.data)+'" websocket message.');i(t.data)}},f.__sendData=function(e){n.send(JSON.stringify(["stdin",e]))},f.__setSize=function(e){n.send(JSON.stringify(["set_size",e.rows,e.cols]))},n.addEventListener("message",f.__getMessage),r&&f.on("data",f.__sendData),f.on("resize",f.__setSize),n.addEventListener("close",function(){return o(f,n)}),n.addEventListener("error",function(){return o(f,n)})}function o(e,t){var o=e;o.off("data",o.__sendData),(t=void 0===t?o.__socket:t)&&t.removeEventListener("message",o.__getMessage),delete o.__socket}function n(e){e.prototype.terminadoAttach=function(e,o,n){return t(this,e,o,n)},e.prototype.terminadoDetach=function(e){return o(this,e)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.terminadoAttach=t,exports.terminadoDetach=o,exports.apply=n;
},{}],"CS9K":[function(require,module,exports) {
"use strict";function e(e,t){var l;l=void 0===t?e.element.classList.contains("fullscreen")?"remove":"add":t?"add":"remove",e.element.classList[l]("fullscreen")}function t(t){t.prototype.toggleFullScreen=function(t){e(this,t)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.toggleFullScreen=e,exports.apply=t;
},{}],"ISf0":[function(require,module,exports) {
"use strict";function e(e){if(!e.element.parentElement)return null;var t=window.getComputedStyle(e.element.parentElement),r=parseInt(t.getPropertyValue("height")),o=Math.max(0,parseInt(t.getPropertyValue("width"))),n=window.getComputedStyle(e.element),p=r-(parseInt(n.getPropertyValue("padding-top"))+parseInt(n.getPropertyValue("padding-bottom"))),l=o-(parseInt(n.getPropertyValue("padding-right"))+parseInt(n.getPropertyValue("padding-left")))-e._core.viewport.scrollBarWidth;return{cols:Math.floor(l/e._core.renderer.dimensions.actualCellWidth),rows:Math.floor(p/e._core.renderer.dimensions.actualCellHeight)}}function t(t){var r=e(t);r&&(t.rows===r.rows&&t.cols===r.cols||(t._core.renderer.clear(),t.resize(r.cols,r.rows)))}function r(r){r.prototype.proposeGeometry=function(){return e(this)},r.prototype.fit=function(){t(this)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.proposeGeometry=e,exports.fit=t,exports.apply=r;
},{}],"tbG5":[function(require,module,exports) {
"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function t(r,t){return Object.prototype.hasOwnProperty.call(r,t)}exports.assign=function(r){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var a in n)t(n,a)&&(r[a]=n[a])}}return r},exports.shrinkBuf=function(r,t){return r.length===t?r:r.subarray?r.subarray(0,t):(r.length=t,r)};var e={arraySet:function(r,t,e,n,a){if(t.subarray&&r.subarray)r.set(t.subarray(e,e+n),a);else for(var o=0;o<n;o++)r[a+o]=t[e+o]},flattenChunks:function(r){var t,e,n,a,o,s;for(n=0,t=0,e=r.length;t<e;t++)n+=r[t].length;for(s=new Uint8Array(n),a=0,t=0,e=r.length;t<e;t++)o=r[t],s.set(o,a),a+=o.length;return s}},n={arraySet:function(r,t,e,n,a){for(var o=0;o<n;o++)r[a+o]=t[e+o]},flattenChunks:function(r){return[].concat.apply([],r)}};exports.setTyped=function(r){r?(exports.Buf8=Uint8Array,exports.Buf16=Uint16Array,exports.Buf32=Int32Array,exports.assign(exports,e)):(exports.Buf8=Array,exports.Buf16=Array,exports.Buf32=Array,exports.assign(exports,n))},exports.setTyped(r);
},{}],"+sRJ":[function(require,module,exports) {
"use strict";var e=require("../utils/common"),t=4,n=0,_=1,r=2;function a(e){for(var t=e.length;--t>=0;)e[t]=0}var i=0,l=1,d=2,f=3,o=258,b=29,s=256,u=s+1+b,c=30,p=19,h=2*u+1,v=15,y=16,x=7,g=256,m=16,w=17,A=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],j=512,B=new Array(2*(u+2));a(B);var C=new Array(2*c);a(C);var D=new Array(j);a(D);var E=new Array(o-f+1);a(E);var F=new Array(b);a(F);var G,H,I,J=new Array(c);function K(e,t,n,_,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=_,this.max_length=r,this.has_stree=e&&e.length}function L(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function M(e){return e<256?D[e]:D[256+(e>>>7)]}function N(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function O(e,t,n){e.bi_valid>y-n?(e.bi_buf|=t<<e.bi_valid&65535,N(e,e.bi_buf),e.bi_buf=t>>y-e.bi_valid,e.bi_valid+=n-y):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function P(e,t,n){O(e,n[2*t],n[2*t+1])}function Q(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function R(e){16===e.bi_valid?(N(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function T(e,t){var n,_,r,a,i,l,d=t.dyn_tree,f=t.max_code,o=t.stat_desc.static_tree,b=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,u=t.stat_desc.extra_base,c=t.stat_desc.max_length,p=0;for(a=0;a<=v;a++)e.bl_count[a]=0;for(d[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<h;n++)(a=d[2*d[2*(_=e.heap[n])+1]+1]+1)>c&&(a=c,p++),d[2*_+1]=a,_>f||(e.bl_count[a]++,i=0,_>=u&&(i=s[_-u]),l=d[2*_],e.opt_len+=l*(a+i),b&&(e.static_len+=l*(o[2*_+1]+i)));if(0!==p){do{for(a=c-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[c]--,p-=2}while(p>0);for(a=c;0!==a;a--)for(_=e.bl_count[a];0!==_;)(r=e.heap[--n])>f||(d[2*r+1]!==a&&(e.opt_len+=(a-d[2*r+1])*d[2*r],d[2*r+1]=a),_--)}}function U(e,t,n){var _,r,a=new Array(v+1),i=0;for(_=1;_<=v;_++)a[_]=i=i+n[_-1]<<1;for(r=0;r<=t;r++){var l=e[2*r+1];0!==l&&(e[2*r]=Q(a[l]++,l))}}function V(){var e,t,n,_,r,a=new Array(v+1);for(n=0,_=0;_<b-1;_++)for(F[_]=n,e=0;e<1<<k[_];e++)E[n++]=_;for(E[n-1]=_,r=0,_=0;_<16;_++)for(J[_]=r,e=0;e<1<<q[_];e++)D[r++]=_;for(r>>=7;_<c;_++)for(J[_]=r<<7,e=0;e<1<<q[_]-7;e++)D[256+r++]=_;for(t=0;t<=v;t++)a[t]=0;for(e=0;e<=143;)B[2*e+1]=8,e++,a[8]++;for(;e<=255;)B[2*e+1]=9,e++,a[9]++;for(;e<=279;)B[2*e+1]=7,e++,a[7]++;for(;e<=287;)B[2*e+1]=8,e++,a[8]++;for(U(B,u+1,a),e=0;e<c;e++)C[2*e+1]=5,C[2*e]=Q(e,5);G=new K(B,k,s+1,u,v),H=new K(C,q,0,c,v),I=new K(new Array(0),z,0,p,x)}function W(e){var t;for(t=0;t<u;t++)e.dyn_ltree[2*t]=0;for(t=0;t<c;t++)e.dyn_dtree[2*t]=0;for(t=0;t<p;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*g]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function X(e){e.bi_valid>8?N(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function Y(t,n,_,r){X(t),r&&(N(t,_),N(t,~_)),e.arraySet(t.pending_buf,t.window,n,_,t.pending),t.pending+=_}function Z(e,t,n,_){var r=2*t,a=2*n;return e[r]<e[a]||e[r]===e[a]&&_[t]<=_[n]}function $(e,t,n){for(var _=e.heap[n],r=n<<1;r<=e.heap_len&&(r<e.heap_len&&Z(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!Z(t,_,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=_}function ee(e,t,n){var _,r,a,i,l=0;if(0!==e.last_lit)do{_=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],r=e.pending_buf[e.l_buf+l],l++,0===_?P(e,r,t):(P(e,(a=E[r])+s+1,t),0!==(i=k[a])&&O(e,r-=F[a],i),P(e,a=M(--_),n),0!==(i=q[a])&&O(e,_-=J[a],i))}while(l<e.last_lit);P(e,g,t)}function te(e,t){var n,_,r,a=t.dyn_tree,i=t.stat_desc.static_tree,l=t.stat_desc.has_stree,d=t.stat_desc.elems,f=-1;for(e.heap_len=0,e.heap_max=h,n=0;n<d;n++)0!==a[2*n]?(e.heap[++e.heap_len]=f=n,e.depth[n]=0):a[2*n+1]=0;for(;e.heap_len<2;)a[2*(r=e.heap[++e.heap_len]=f<2?++f:0)]=1,e.depth[r]=0,e.opt_len--,l&&(e.static_len-=i[2*r+1]);for(t.max_code=f,n=e.heap_len>>1;n>=1;n--)$(e,a,n);r=d;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],$(e,a,1),_=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=_,a[2*r]=a[2*n]+a[2*_],e.depth[r]=(e.depth[n]>=e.depth[_]?e.depth[n]:e.depth[_])+1,a[2*n+1]=a[2*_+1]=r,e.heap[1]=r++,$(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],T(e,t),U(a,f,e.bl_count)}function ne(e,t,n){var _,r,a=-1,i=t[1],l=0,d=7,f=4;for(0===i&&(d=138,f=3),t[2*(n+1)+1]=65535,_=0;_<=n;_++)r=i,i=t[2*(_+1)+1],++l<d&&r===i||(l<f?e.bl_tree[2*r]+=l:0!==r?(r!==a&&e.bl_tree[2*r]++,e.bl_tree[2*m]++):l<=10?e.bl_tree[2*w]++:e.bl_tree[2*A]++,l=0,a=r,0===i?(d=138,f=3):r===i?(d=6,f=3):(d=7,f=4))}function _e(e,t,n){var _,r,a=-1,i=t[1],l=0,d=7,f=4;for(0===i&&(d=138,f=3),_=0;_<=n;_++)if(r=i,i=t[2*(_+1)+1],!(++l<d&&r===i)){if(l<f)do{P(e,r,e.bl_tree)}while(0!=--l);else 0!==r?(r!==a&&(P(e,r,e.bl_tree),l--),P(e,m,e.bl_tree),O(e,l-3,2)):l<=10?(P(e,w,e.bl_tree),O(e,l-3,3)):(P(e,A,e.bl_tree),O(e,l-11,7));l=0,a=r,0===i?(d=138,f=3):r===i?(d=6,f=3):(d=7,f=4)}}function re(e){var t;for(ne(e,e.dyn_ltree,e.l_desc.max_code),ne(e,e.dyn_dtree,e.d_desc.max_code),te(e,e.bl_desc),t=p-1;t>=3&&0===e.bl_tree[2*S[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function ae(e,t,n,_){var r;for(O(e,t-257,5),O(e,n-1,5),O(e,_-4,4),r=0;r<_;r++)O(e,e.bl_tree[2*S[r]+1],3);_e(e,e.dyn_ltree,t-1),_e(e,e.dyn_dtree,n-1)}function ie(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return n;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return _;for(t=32;t<s;t++)if(0!==e.dyn_ltree[2*t])return _;return n}a(J);var le=!1;function de(e){le||(V(),le=!0),e.l_desc=new L(e.dyn_ltree,G),e.d_desc=new L(e.dyn_dtree,H),e.bl_desc=new L(e.bl_tree,I),e.bi_buf=0,e.bi_valid=0,W(e)}function fe(e,t,n,_){O(e,(i<<1)+(_?1:0),3),Y(e,t,n,!0)}function oe(e){O(e,l<<1,3),P(e,g,B),R(e)}function be(e,n,_,a){var i,f,o=0;e.level>0?(e.strm.data_type===r&&(e.strm.data_type=ie(e)),te(e,e.l_desc),te(e,e.d_desc),o=re(e),i=e.opt_len+3+7>>>3,(f=e.static_len+3+7>>>3)<=i&&(i=f)):i=f=_+5,_+4<=i&&-1!==n?fe(e,n,_,a):e.strategy===t||f===i?(O(e,(l<<1)+(a?1:0),3),ee(e,B,C)):(O(e,(d<<1)+(a?1:0),3),ae(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),ee(e,e.dyn_ltree,e.dyn_dtree)),W(e),a&&X(e)}function se(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(E[n]+s+1)]++,e.dyn_dtree[2*M(t)]++),e.last_lit===e.lit_bufsize-1}exports._tr_init=de,exports._tr_stored_block=fe,exports._tr_flush_block=be,exports._tr_tally=se,exports._tr_align=oe;
},{"../utils/common":"tbG5"}],"uxo6":[function(require,module,exports) {
"use strict";function e(e,r,o,t){for(var u=65535&e|0,i=e>>>16&65535|0,n=0;0!==o;){o-=n=o>2e3?2e3:o;do{i=i+(u=u+r[t++]|0)|0}while(--n);u%=65521,i%=65521}return u|i<<16|0}module.exports=e;
},{}],"X4kj":[function(require,module,exports) {
"use strict";function r(){for(var r,o=[],t=0;t<256;t++){r=t;for(var n=0;n<8;n++)r=1&r?3988292384^r>>>1:r>>>1;o[t]=r}return o}var o=r();function t(r,t,n,u){var a=o,e=u+n;r^=-1;for(var f=u;f<e;f++)r=r>>>8^a[255&(r^t[f])];return-1^r}module.exports=t;
},{}],"gMAY":[function(require,module,exports) {
"use strict";module.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};
},{}],"+BLB":[function(require,module,exports) {
"use strict";var t,a=require("../utils/common"),e=require("./trees"),s=require("./adler32"),i=require("./crc32"),r=require("./messages"),n=0,h=1,l=3,_=4,d=5,o=0,u=1,g=-2,f=-3,c=-5,p=-1,m=1,w=2,v=3,k=4,z=0,b=2,x=8,y=9,B=15,S=8,q=29,I=256,A=I+1+q,C=30,R=19,j=2*A+1,D=15,E=3,H=258,K=H+E+1,N=32,F=42,G=69,J=73,L=91,M=103,O=113,P=666,Q=1,T=2,U=3,V=4,W=3;function X(t,a){return t.msg=r[a],a}function Y(t){return(t<<1)-(t>4?9:0)}function Z(t){for(var a=t.length;--a>=0;)t[a]=0}function $(t){var e=t.state,s=e.pending;s>t.avail_out&&(s=t.avail_out),0!==s&&(a.arraySet(t.output,e.pending_buf,e.pending_out,s,t.next_out),t.next_out+=s,e.pending_out+=s,t.total_out+=s,t.avail_out-=s,e.pending-=s,0===e.pending&&(e.pending_out=0))}function tt(t,a){e._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,a),t.block_start=t.strstart,$(t.strm)}function at(t,a){t.pending_buf[t.pending++]=a}function et(t,a){t.pending_buf[t.pending++]=a>>>8&255,t.pending_buf[t.pending++]=255&a}function st(t,e,r,n){var h=t.avail_in;return h>n&&(h=n),0===h?0:(t.avail_in-=h,a.arraySet(e,t.input,t.next_in,h,r),1===t.state.wrap?t.adler=s(t.adler,e,h,r):2===t.state.wrap&&(t.adler=i(t.adler,e,h,r)),t.next_in+=h,t.total_in+=h,h)}function it(t,a){var e,s,i=t.max_chain_length,r=t.strstart,n=t.prev_length,h=t.nice_match,l=t.strstart>t.w_size-K?t.strstart-(t.w_size-K):0,_=t.window,d=t.w_mask,o=t.prev,u=t.strstart+H,g=_[r+n-1],f=_[r+n];t.prev_length>=t.good_match&&(i>>=2),h>t.lookahead&&(h=t.lookahead);do{if(_[(e=a)+n]===f&&_[e+n-1]===g&&_[e]===_[r]&&_[++e]===_[r+1]){r+=2,e++;do{}while(_[++r]===_[++e]&&_[++r]===_[++e]&&_[++r]===_[++e]&&_[++r]===_[++e]&&_[++r]===_[++e]&&_[++r]===_[++e]&&_[++r]===_[++e]&&_[++r]===_[++e]&&r<u);if(s=H-(u-r),r=u-H,s>n){if(t.match_start=a,n=s,s>=h)break;g=_[r+n-1],f=_[r+n]}}}while((a=o[a&d])>l&&0!=--i);return n<=t.lookahead?n:t.lookahead}function rt(t){var e,s,i,r,n,h=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=h+(h-K)){a.arraySet(t.window,t.window,h,h,0),t.match_start-=h,t.strstart-=h,t.block_start-=h,e=s=t.hash_size;do{i=t.head[--e],t.head[e]=i>=h?i-h:0}while(--s);e=s=h;do{i=t.prev[--e],t.prev[e]=i>=h?i-h:0}while(--s);r+=h}if(0===t.strm.avail_in)break;if(s=st(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=s,t.lookahead+t.insert>=E)for(n=t.strstart-t.insert,t.ins_h=t.window[n],t.ins_h=(t.ins_h<<t.hash_shift^t.window[n+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[n+E-1])&t.hash_mask,t.prev[n&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=n,n++,t.insert--,!(t.lookahead+t.insert<E)););}while(t.lookahead<K&&0!==t.strm.avail_in)}function nt(t,a){var e=65535;for(e>t.pending_buf_size-5&&(e=t.pending_buf_size-5);;){if(t.lookahead<=1){if(rt(t),0===t.lookahead&&a===n)return Q;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var s=t.block_start+e;if((0===t.strstart||t.strstart>=s)&&(t.lookahead=t.strstart-s,t.strstart=s,tt(t,!1),0===t.strm.avail_out))return Q;if(t.strstart-t.block_start>=t.w_size-K&&(tt(t,!1),0===t.strm.avail_out))return Q}return t.insert=0,a===_?(tt(t,!0),0===t.strm.avail_out?U:V):(t.strstart>t.block_start&&(tt(t,!1),t.strm.avail_out),Q)}function ht(t,a){for(var s,i;;){if(t.lookahead<K){if(rt(t),t.lookahead<K&&a===n)return Q;if(0===t.lookahead)break}if(s=0,t.lookahead>=E&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+E-1])&t.hash_mask,s=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==s&&t.strstart-s<=t.w_size-K&&(t.match_length=it(t,s)),t.match_length>=E)if(i=e._tr_tally(t,t.strstart-t.match_start,t.match_length-E),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=E){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+E-1])&t.hash_mask,s=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=e._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(tt(t,!1),0===t.strm.avail_out))return Q}return t.insert=t.strstart<E-1?t.strstart:E-1,a===_?(tt(t,!0),0===t.strm.avail_out?U:V):t.last_lit&&(tt(t,!1),0===t.strm.avail_out)?Q:T}function lt(t,a){for(var s,i,r;;){if(t.lookahead<K){if(rt(t),t.lookahead<K&&a===n)return Q;if(0===t.lookahead)break}if(s=0,t.lookahead>=E&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+E-1])&t.hash_mask,s=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=E-1,0!==s&&t.prev_length<t.max_lazy_match&&t.strstart-s<=t.w_size-K&&(t.match_length=it(t,s),t.match_length<=5&&(t.strategy===m||t.match_length===E&&t.strstart-t.match_start>4096)&&(t.match_length=E-1)),t.prev_length>=E&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-E,i=e._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-E),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+E-1])&t.hash_mask,s=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=E-1,t.strstart++,i&&(tt(t,!1),0===t.strm.avail_out))return Q}else if(t.match_available){if((i=e._tr_tally(t,0,t.window[t.strstart-1]))&&tt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return Q}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=e._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<E-1?t.strstart:E-1,a===_?(tt(t,!0),0===t.strm.avail_out?U:V):t.last_lit&&(tt(t,!1),0===t.strm.avail_out)?Q:T}function _t(t,a){for(var s,i,r,h,l=t.window;;){if(t.lookahead<=H){if(rt(t),t.lookahead<=H&&a===n)return Q;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=E&&t.strstart>0&&(i=l[r=t.strstart-1])===l[++r]&&i===l[++r]&&i===l[++r]){h=t.strstart+H;do{}while(i===l[++r]&&i===l[++r]&&i===l[++r]&&i===l[++r]&&i===l[++r]&&i===l[++r]&&i===l[++r]&&i===l[++r]&&r<h);t.match_length=H-(h-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=E?(s=e._tr_tally(t,1,t.match_length-E),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(s=e._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),s&&(tt(t,!1),0===t.strm.avail_out))return Q}return t.insert=0,a===_?(tt(t,!0),0===t.strm.avail_out?U:V):t.last_lit&&(tt(t,!1),0===t.strm.avail_out)?Q:T}function dt(t,a){for(var s;;){if(0===t.lookahead&&(rt(t),0===t.lookahead)){if(a===n)return Q;break}if(t.match_length=0,s=e._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,s&&(tt(t,!1),0===t.strm.avail_out))return Q}return t.insert=0,a===_?(tt(t,!0),0===t.strm.avail_out?U:V):t.last_lit&&(tt(t,!1),0===t.strm.avail_out)?Q:T}function ot(t,a,e,s,i){this.good_length=t,this.max_lazy=a,this.nice_length=e,this.max_chain=s,this.func=i}function ut(a){a.window_size=2*a.w_size,Z(a.head),a.max_lazy_match=t[a.level].max_lazy,a.good_match=t[a.level].good_length,a.nice_match=t[a.level].nice_length,a.max_chain_length=t[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=E-1,a.match_available=0,a.ins_h=0}function gt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*j),this.dyn_dtree=new a.Buf16(2*(2*C+1)),this.bl_tree=new a.Buf16(2*(2*R+1)),Z(this.dyn_ltree),Z(this.dyn_dtree),Z(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(D+1),this.heap=new a.Buf16(2*A+1),Z(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*A+1),Z(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ft(t){var a;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=b,(a=t.state).pending=0,a.pending_out=0,a.wrap<0&&(a.wrap=-a.wrap),a.status=a.wrap?F:O,t.adler=2===a.wrap?0:1,a.last_flush=n,e._tr_init(a),o):X(t,g)}function ct(t){var a=ft(t);return a===o&&ut(t.state),a}function pt(t,a){return t&&t.state?2!==t.state.wrap?g:(t.state.gzhead=a,o):g}function mt(t,e,s,i,r,n){if(!t)return g;var h=1;if(e===p&&(e=6),i<0?(h=0,i=-i):i>15&&(h=2,i-=16),r<1||r>y||s!==x||i<8||i>15||e<0||e>9||n<0||n>k)return X(t,g);8===i&&(i=9);var l=new gt;return t.state=l,l.strm=t,l.wrap=h,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=r+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+E-1)/E),l.window=new a.Buf8(2*l.w_size),l.head=new a.Buf16(l.hash_size),l.prev=new a.Buf16(l.w_size),l.lit_bufsize=1<<r+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new a.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=n,l.method=s,ct(t)}function wt(t,a){return mt(t,a,x,B,S,z)}function vt(a,s){var r,f,p,m;if(!a||!a.state||s>d||s<0)return a?X(a,g):g;if(f=a.state,!a.output||!a.input&&0!==a.avail_in||f.status===P&&s!==_)return X(a,0===a.avail_out?c:g);if(f.strm=a,r=f.last_flush,f.last_flush=s,f.status===F)if(2===f.wrap)a.adler=0,at(f,31),at(f,139),at(f,8),f.gzhead?(at(f,(f.gzhead.text?1:0)+(f.gzhead.hcrc?2:0)+(f.gzhead.extra?4:0)+(f.gzhead.name?8:0)+(f.gzhead.comment?16:0)),at(f,255&f.gzhead.time),at(f,f.gzhead.time>>8&255),at(f,f.gzhead.time>>16&255),at(f,f.gzhead.time>>24&255),at(f,9===f.level?2:f.strategy>=w||f.level<2?4:0),at(f,255&f.gzhead.os),f.gzhead.extra&&f.gzhead.extra.length&&(at(f,255&f.gzhead.extra.length),at(f,f.gzhead.extra.length>>8&255)),f.gzhead.hcrc&&(a.adler=i(a.adler,f.pending_buf,f.pending,0)),f.gzindex=0,f.status=G):(at(f,0),at(f,0),at(f,0),at(f,0),at(f,0),at(f,9===f.level?2:f.strategy>=w||f.level<2?4:0),at(f,W),f.status=O);else{var k=x+(f.w_bits-8<<4)<<8;k|=(f.strategy>=w||f.level<2?0:f.level<6?1:6===f.level?2:3)<<6,0!==f.strstart&&(k|=N),k+=31-k%31,f.status=O,et(f,k),0!==f.strstart&&(et(f,a.adler>>>16),et(f,65535&a.adler)),a.adler=1}if(f.status===G)if(f.gzhead.extra){for(p=f.pending;f.gzindex<(65535&f.gzhead.extra.length)&&(f.pending!==f.pending_buf_size||(f.gzhead.hcrc&&f.pending>p&&(a.adler=i(a.adler,f.pending_buf,f.pending-p,p)),$(a),p=f.pending,f.pending!==f.pending_buf_size));)at(f,255&f.gzhead.extra[f.gzindex]),f.gzindex++;f.gzhead.hcrc&&f.pending>p&&(a.adler=i(a.adler,f.pending_buf,f.pending-p,p)),f.gzindex===f.gzhead.extra.length&&(f.gzindex=0,f.status=J)}else f.status=J;if(f.status===J)if(f.gzhead.name){p=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>p&&(a.adler=i(a.adler,f.pending_buf,f.pending-p,p)),$(a),p=f.pending,f.pending===f.pending_buf_size)){m=1;break}m=f.gzindex<f.gzhead.name.length?255&f.gzhead.name.charCodeAt(f.gzindex++):0,at(f,m)}while(0!==m);f.gzhead.hcrc&&f.pending>p&&(a.adler=i(a.adler,f.pending_buf,f.pending-p,p)),0===m&&(f.gzindex=0,f.status=L)}else f.status=L;if(f.status===L)if(f.gzhead.comment){p=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>p&&(a.adler=i(a.adler,f.pending_buf,f.pending-p,p)),$(a),p=f.pending,f.pending===f.pending_buf_size)){m=1;break}m=f.gzindex<f.gzhead.comment.length?255&f.gzhead.comment.charCodeAt(f.gzindex++):0,at(f,m)}while(0!==m);f.gzhead.hcrc&&f.pending>p&&(a.adler=i(a.adler,f.pending_buf,f.pending-p,p)),0===m&&(f.status=M)}else f.status=M;if(f.status===M&&(f.gzhead.hcrc?(f.pending+2>f.pending_buf_size&&$(a),f.pending+2<=f.pending_buf_size&&(at(f,255&a.adler),at(f,a.adler>>8&255),a.adler=0,f.status=O)):f.status=O),0!==f.pending){if($(a),0===a.avail_out)return f.last_flush=-1,o}else if(0===a.avail_in&&Y(s)<=Y(r)&&s!==_)return X(a,c);if(f.status===P&&0!==a.avail_in)return X(a,c);if(0!==a.avail_in||0!==f.lookahead||s!==n&&f.status!==P){var z=f.strategy===w?dt(f,s):f.strategy===v?_t(f,s):t[f.level].func(f,s);if(z!==U&&z!==V||(f.status=P),z===Q||z===U)return 0===a.avail_out&&(f.last_flush=-1),o;if(z===T&&(s===h?e._tr_align(f):s!==d&&(e._tr_stored_block(f,0,0,!1),s===l&&(Z(f.head),0===f.lookahead&&(f.strstart=0,f.block_start=0,f.insert=0))),$(a),0===a.avail_out))return f.last_flush=-1,o}return s!==_?o:f.wrap<=0?u:(2===f.wrap?(at(f,255&a.adler),at(f,a.adler>>8&255),at(f,a.adler>>16&255),at(f,a.adler>>24&255),at(f,255&a.total_in),at(f,a.total_in>>8&255),at(f,a.total_in>>16&255),at(f,a.total_in>>24&255)):(et(f,a.adler>>>16),et(f,65535&a.adler)),$(a),f.wrap>0&&(f.wrap=-f.wrap),0!==f.pending?o:u)}function kt(t){var a;return t&&t.state?(a=t.state.status)!==F&&a!==G&&a!==J&&a!==L&&a!==M&&a!==O&&a!==P?X(t,g):(t.state=null,a===O?X(t,f):o):g}function zt(t,e){var i,r,n,h,l,_,d,u,f=e.length;if(!t||!t.state)return g;if(2===(h=(i=t.state).wrap)||1===h&&i.status!==F||i.lookahead)return g;for(1===h&&(t.adler=s(t.adler,e,f,0)),i.wrap=0,f>=i.w_size&&(0===h&&(Z(i.head),i.strstart=0,i.block_start=0,i.insert=0),u=new a.Buf8(i.w_size),a.arraySet(u,e,f-i.w_size,i.w_size,0),e=u,f=i.w_size),l=t.avail_in,_=t.next_in,d=t.input,t.avail_in=f,t.next_in=0,t.input=e,rt(i);i.lookahead>=E;){r=i.strstart,n=i.lookahead-(E-1);do{i.ins_h=(i.ins_h<<i.hash_shift^i.window[r+E-1])&i.hash_mask,i.prev[r&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=r,r++}while(--n);i.strstart=r,i.lookahead=E-1,rt(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=E-1,i.match_available=0,t.next_in=_,t.input=d,t.avail_in=l,i.wrap=h,o}t=[new ot(0,0,0,0,nt),new ot(4,4,8,4,ht),new ot(4,5,16,8,ht),new ot(4,6,32,32,ht),new ot(4,4,16,16,lt),new ot(8,16,32,32,lt),new ot(8,16,128,128,lt),new ot(8,32,128,256,lt),new ot(32,128,258,1024,lt),new ot(32,258,258,4096,lt)],exports.deflateInit=wt,exports.deflateInit2=mt,exports.deflateReset=ct,exports.deflateResetKeep=ft,exports.deflateSetHeader=pt,exports.deflate=vt,exports.deflateEnd=kt,exports.deflateSetDictionary=zt,exports.deflateInfo="pako deflate (from Nodeca project)";
},{"../utils/common":"tbG5","./trees":"+sRJ","./adler32":"uxo6","./crc32":"X4kj","./messages":"gMAY"}],"34Q3":[function(require,module,exports) {
"use strict";var r=require("./common"),n=!0,t=!0;try{String.fromCharCode.apply(null,[0])}catch(u){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(u){t=!1}for(var e=new r.Buf8(256),o=0;o<256;o++)e[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;function f(e,o){if(o<65537&&(e.subarray&&t||!e.subarray&&n))return String.fromCharCode.apply(null,r.shrinkBuf(e,o));for(var f="",u=0;u<o;u++)f+=String.fromCharCode(e[u]);return f}e[254]=e[254]=1,exports.string2buf=function(n){var t,e,o,f,u,a=n.length,i=0;for(f=0;f<a;f++)55296==(64512&(e=n.charCodeAt(f)))&&f+1<a&&56320==(64512&(o=n.charCodeAt(f+1)))&&(e=65536+(e-55296<<10)+(o-56320),f++),i+=e<128?1:e<2048?2:e<65536?3:4;for(t=new r.Buf8(i),u=0,f=0;u<i;f++)55296==(64512&(e=n.charCodeAt(f)))&&f+1<a&&56320==(64512&(o=n.charCodeAt(f+1)))&&(e=65536+(e-55296<<10)+(o-56320),f++),e<128?t[u++]=e:e<2048?(t[u++]=192|e>>>6,t[u++]=128|63&e):e<65536?(t[u++]=224|e>>>12,t[u++]=128|e>>>6&63,t[u++]=128|63&e):(t[u++]=240|e>>>18,t[u++]=128|e>>>12&63,t[u++]=128|e>>>6&63,t[u++]=128|63&e);return t},exports.buf2binstring=function(r){return f(r,r.length)},exports.binstring2buf=function(n){for(var t=new r.Buf8(n.length),e=0,o=t.length;e<o;e++)t[e]=n.charCodeAt(e);return t},exports.buf2string=function(r,n){var t,o,u,a,i=n||r.length,h=new Array(2*i);for(o=0,t=0;t<i;)if((u=r[t++])<128)h[o++]=u;else if((a=e[u])>4)h[o++]=65533,t+=a-1;else{for(u&=2===a?31:3===a?15:7;a>1&&t<i;)u=u<<6|63&r[t++],a--;a>1?h[o++]=65533:u<65536?h[o++]=u:(u-=65536,h[o++]=55296|u>>10&1023,h[o++]=56320|1023&u)}return f(h,o)},exports.utf8border=function(r,n){var t;for((n=n||r.length)>r.length&&(n=r.length),t=n-1;t>=0&&128==(192&r[t]);)t--;return t<0?n:0===t?n:t+e[r[t]]>n?t:n};
},{"./common":"tbG5"}],"bdtv":[function(require,module,exports) {
"use strict";function t(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}module.exports=t;
},{}],"nFS2":[function(require,module,exports) {
"use strict";var t=require("./zlib/deflate"),i=require("./utils/common"),e=require("./utils/strings"),n=require("./zlib/messages"),r=require("./zlib/zstream"),s=Object.prototype.toString,o=0,a=4,u=0,h=1,d=2,l=-1,f=0,p=8;function w(o){if(!(this instanceof w))return new w(o);this.options=i.assign({level:l,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},o||{});var a=this.options;a.raw&&a.windowBits>0?a.windowBits=-a.windowBits:a.gzip&&a.windowBits>0&&a.windowBits<16&&(a.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new r,this.strm.avail_out=0;var h=t.deflateInit2(this.strm,a.level,a.method,a.windowBits,a.memLevel,a.strategy);if(h!==u)throw new Error(n[h]);if(a.header&&t.deflateSetHeader(this.strm,a.header),a.dictionary){var d;if(d="string"==typeof a.dictionary?e.string2buf(a.dictionary):"[object ArrayBuffer]"===s.call(a.dictionary)?new Uint8Array(a.dictionary):a.dictionary,(h=t.deflateSetDictionary(this.strm,d))!==u)throw new Error(n[h]);this._dict_set=!0}}function c(t,i){var e=new w(i);if(e.push(t,!0),e.err)throw e.msg||n[e.err];return e.result}function m(t,i){return(i=i||{}).raw=!0,c(t,i)}function g(t,i){return(i=i||{}).gzip=!0,c(t,i)}w.prototype.push=function(n,r){var l,f,p=this.strm,w=this.options.chunkSize;if(this.ended)return!1;f=r===~~r?r:!0===r?a:o,"string"==typeof n?p.input=e.string2buf(n):"[object ArrayBuffer]"===s.call(n)?p.input=new Uint8Array(n):p.input=n,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new i.Buf8(w),p.next_out=0,p.avail_out=w),(l=t.deflate(p,f))!==h&&l!==u)return this.onEnd(l),this.ended=!0,!1;0!==p.avail_out&&(0!==p.avail_in||f!==a&&f!==d)||("string"===this.options.to?this.onData(e.buf2binstring(i.shrinkBuf(p.output,p.next_out))):this.onData(i.shrinkBuf(p.output,p.next_out)))}while((p.avail_in>0||0===p.avail_out)&&l!==h);return f===a?(l=t.deflateEnd(this.strm),this.onEnd(l),this.ended=!0,l===u):f!==d||(this.onEnd(u),p.avail_out=0,!0)},w.prototype.onData=function(t){this.chunks.push(t)},w.prototype.onEnd=function(t){t===u&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},exports.Deflate=w,exports.deflate=c,exports.deflateRaw=m,exports.gzip=g;
},{"./zlib/deflate":"+BLB","./utils/common":"tbG5","./utils/strings":"34Q3","./zlib/messages":"gMAY","./zlib/zstream":"bdtv"}],"LP5M":[function(require,module,exports) {
"use strict";var i=30,e=12;module.exports=function(o,a){var t,d,n,l,s,f,r,b,c,u,v,m,w,h,k,_,x,g,p,z,j,q,y,A,B;t=o.state,d=o.next_in,A=o.input,n=d+(o.avail_in-5),l=o.next_out,B=o.output,s=l-(a-o.avail_out),f=l+(o.avail_out-257),r=t.dmax,b=t.wsize,c=t.whave,u=t.wnext,v=t.window,m=t.hold,w=t.bits,h=t.lencode,k=t.distcode,_=(1<<t.lenbits)-1,x=(1<<t.distbits)-1;i:do{w<15&&(m+=A[d++]<<w,w+=8,m+=A[d++]<<w,w+=8),g=h[m&_];e:for(;;){if(m>>>=p=g>>>24,w-=p,0===(p=g>>>16&255))B[l++]=65535&g;else{if(!(16&p)){if(0==(64&p)){g=h[(65535&g)+(m&(1<<p)-1)];continue e}if(32&p){t.mode=e;break i}o.msg="invalid literal/length code",t.mode=i;break i}z=65535&g,(p&=15)&&(w<p&&(m+=A[d++]<<w,w+=8),z+=m&(1<<p)-1,m>>>=p,w-=p),w<15&&(m+=A[d++]<<w,w+=8,m+=A[d++]<<w,w+=8),g=k[m&x];o:for(;;){if(m>>>=p=g>>>24,w-=p,!(16&(p=g>>>16&255))){if(0==(64&p)){g=k[(65535&g)+(m&(1<<p)-1)];continue o}o.msg="invalid distance code",t.mode=i;break i}if(j=65535&g,w<(p&=15)&&(m+=A[d++]<<w,(w+=8)<p&&(m+=A[d++]<<w,w+=8)),(j+=m&(1<<p)-1)>r){o.msg="invalid distance too far back",t.mode=i;break i}if(m>>>=p,w-=p,j>(p=l-s)){if((p=j-p)>c&&t.sane){o.msg="invalid distance too far back",t.mode=i;break i}if(q=0,y=v,0===u){if(q+=b-p,p<z){z-=p;do{B[l++]=v[q++]}while(--p);q=l-j,y=B}}else if(u<p){if(q+=b+u-p,(p-=u)<z){z-=p;do{B[l++]=v[q++]}while(--p);if(q=0,u<z){z-=p=u;do{B[l++]=v[q++]}while(--p);q=l-j,y=B}}}else if(q+=u-p,p<z){z-=p;do{B[l++]=v[q++]}while(--p);q=l-j,y=B}for(;z>2;)B[l++]=y[q++],B[l++]=y[q++],B[l++]=y[q++],z-=3;z&&(B[l++]=y[q++],z>1&&(B[l++]=y[q++]))}else{q=l-j;do{B[l++]=B[q++],B[l++]=B[q++],B[l++]=B[q++],z-=3}while(z>2);z&&(B[l++]=B[q++],z>1&&(B[l++]=B[q++]))}break}}break}}while(d<n&&l<f);d-=z=w>>3,m&=(1<<(w-=z<<3))-1,o.next_in=d,o.next_out=l,o.avail_in=d<n?n-d+5:5-(d-n),o.avail_out=l<f?f-l+257:257-(l-f),t.hold=m,t.bits=w};
},{}],"2u+n":[function(require,module,exports) {
"use strict";var r=require("../utils/common"),f=15,i=852,o=592,e=0,u=1,t=2,n=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],b=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];module.exports=function(a,c,m,w,d,v,B,h){var k,p,q,x,g,j,y,z,A,C=h.bits,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=null,O=0,P=new r.Buf16(f+1),Q=new r.Buf16(f+1),R=null,S=0;for(D=0;D<=f;D++)P[D]=0;for(E=0;E<w;E++)P[c[m+E]]++;for(H=C,G=f;G>=1&&0===P[G];G--);if(H>G&&(H=G),0===G)return d[v++]=20971520,d[v++]=20971520,h.bits=1,0;for(F=1;F<G&&0===P[F];F++);for(H<F&&(H=F),K=1,D=1;D<=f;D++)if(K<<=1,(K-=P[D])<0)return-1;if(K>0&&(a===e||1!==G))return-1;for(Q[1]=0,D=1;D<f;D++)Q[D+1]=Q[D]+P[D];for(E=0;E<w;E++)0!==c[m+E]&&(B[Q[c[m+E]]++]=E);if(a===e?(N=R=B,j=19):a===u?(N=n,O-=257,R=l,S-=257,j=256):(N=s,R=b,j=-1),M=0,E=0,D=F,g=v,I=H,J=0,q=-1,x=(L=1<<H)-1,a===u&&L>i||a===t&&L>o)return 1;for(;;){y=D-J,B[E]<j?(z=0,A=B[E]):B[E]>j?(z=R[S+B[E]],A=N[O+B[E]]):(z=96,A=0),k=1<<D-J,F=p=1<<I;do{d[g+(M>>J)+(p-=k)]=y<<24|z<<16|A|0}while(0!==p);for(k=1<<D-1;M&k;)k>>=1;if(0!==k?(M&=k-1,M+=k):M=0,E++,0==--P[D]){if(D===G)break;D=c[m+B[E]]}if(D>H&&(M&x)!==q){for(0===J&&(J=H),g+=F,K=1<<(I=D-J);I+J<G&&!((K-=P[I+J])<=0);)I++,K<<=1;if(L+=1<<I,a===u&&L>i||a===t&&L>o)return 1;d[q=M&x]=H<<24|I<<16|g-v|0}}return 0!==M&&(d[g+M]=D-J<<24|64<<16|0),h.bits=H,0};
},{"../utils/common":"tbG5"}],"GIDK":[function(require,module,exports) {
"use strict";var e=require("../utils/common"),a=require("./adler32"),t=require("./crc32"),i=require("./inffast"),s=require("./inftrees"),n=0,r=1,o=2,d=4,l=5,f=6,c=0,h=1,k=2,b=-2,m=-3,w=-4,u=-5,g=8,v=1,x=2,p=3,_=4,y=5,z=6,B=7,S=8,q=9,C=10,I=11,R=12,j=13,A=14,D=15,E=16,G=17,H=18,K=19,N=20,F=21,J=22,L=23,M=24,O=25,P=26,Q=27,T=28,U=29,V=30,W=31,X=32,Y=852,Z=592,$=15,ee=$;function ae(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function te(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ie(a){var t;return a&&a.state?(t=a.state,a.total_in=a.total_out=t.total=0,a.msg="",t.wrap&&(a.adler=1&t.wrap),t.mode=v,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new e.Buf32(Y),t.distcode=t.distdyn=new e.Buf32(Z),t.sane=1,t.back=-1,c):b}function se(e){var a;return e&&e.state?((a=e.state).wsize=0,a.whave=0,a.wnext=0,ie(e)):b}function ne(e,a){var t,i;return e&&e.state?(i=e.state,a<0?(t=0,a=-a):(t=1+(a>>4),a<48&&(a&=15)),a&&(a<8||a>15)?b:(null!==i.window&&i.wbits!==a&&(i.window=null),i.wrap=t,i.wbits=a,se(e))):b}function re(e,a){var t,i;return e?(i=new te,e.state=i,i.window=null,(t=ne(e,a))!==c&&(e.state=null),t):b}function oe(e){return re(e,ee)}var de,le,fe=!0;function ce(a){if(fe){var t;for(de=new e.Buf32(512),le=new e.Buf32(32),t=0;t<144;)a.lens[t++]=8;for(;t<256;)a.lens[t++]=9;for(;t<280;)a.lens[t++]=7;for(;t<288;)a.lens[t++]=8;for(s(r,a.lens,0,288,de,0,a.work,{bits:9}),t=0;t<32;)a.lens[t++]=5;s(o,a.lens,0,32,le,0,a.work,{bits:5}),fe=!1}a.lencode=de,a.lenbits=9,a.distcode=le,a.distbits=5}function he(a,t,i,s){var n,r=a.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new e.Buf8(r.wsize)),s>=r.wsize?(e.arraySet(r.window,t,i-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):((n=r.wsize-r.wnext)>s&&(n=s),e.arraySet(r.window,t,i-s,n,r.wnext),(s-=n)?(e.arraySet(r.window,t,i-s,s,0),r.wnext=s,r.whave=r.wsize):(r.wnext+=n,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=n))),0}function ke(Y,Z){var $,ee,te,ie,se,ne,re,oe,de,le,fe,ke,be,me,we,ue,ge,ve,xe,pe,_e,ye,ze,Be,Se=0,qe=new e.Buf8(4),Ce=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Y||!Y.state||!Y.output||!Y.input&&0!==Y.avail_in)return b;($=Y.state).mode===R&&($.mode=j),se=Y.next_out,te=Y.output,re=Y.avail_out,ie=Y.next_in,ee=Y.input,ne=Y.avail_in,oe=$.hold,de=$.bits,le=ne,fe=re,ye=c;e:for(;;)switch($.mode){case v:if(0===$.wrap){$.mode=j;break}for(;de<16;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}if(2&$.wrap&&35615===oe){$.check=0,qe[0]=255&oe,qe[1]=oe>>>8&255,$.check=t($.check,qe,2,0),oe=0,de=0,$.mode=x;break}if($.flags=0,$.head&&($.head.done=!1),!(1&$.wrap)||(((255&oe)<<8)+(oe>>8))%31){Y.msg="incorrect header check",$.mode=V;break}if((15&oe)!==g){Y.msg="unknown compression method",$.mode=V;break}if(de-=4,_e=8+(15&(oe>>>=4)),0===$.wbits)$.wbits=_e;else if(_e>$.wbits){Y.msg="invalid window size",$.mode=V;break}$.dmax=1<<_e,Y.adler=$.check=1,$.mode=512&oe?C:R,oe=0,de=0;break;case x:for(;de<16;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}if($.flags=oe,(255&$.flags)!==g){Y.msg="unknown compression method",$.mode=V;break}if(57344&$.flags){Y.msg="unknown header flags set",$.mode=V;break}$.head&&($.head.text=oe>>8&1),512&$.flags&&(qe[0]=255&oe,qe[1]=oe>>>8&255,$.check=t($.check,qe,2,0)),oe=0,de=0,$.mode=p;case p:for(;de<32;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}$.head&&($.head.time=oe),512&$.flags&&(qe[0]=255&oe,qe[1]=oe>>>8&255,qe[2]=oe>>>16&255,qe[3]=oe>>>24&255,$.check=t($.check,qe,4,0)),oe=0,de=0,$.mode=_;case _:for(;de<16;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}$.head&&($.head.xflags=255&oe,$.head.os=oe>>8),512&$.flags&&(qe[0]=255&oe,qe[1]=oe>>>8&255,$.check=t($.check,qe,2,0)),oe=0,de=0,$.mode=y;case y:if(1024&$.flags){for(;de<16;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}$.length=oe,$.head&&($.head.extra_len=oe),512&$.flags&&(qe[0]=255&oe,qe[1]=oe>>>8&255,$.check=t($.check,qe,2,0)),oe=0,de=0}else $.head&&($.head.extra=null);$.mode=z;case z:if(1024&$.flags&&((ke=$.length)>ne&&(ke=ne),ke&&($.head&&(_e=$.head.extra_len-$.length,$.head.extra||($.head.extra=new Array($.head.extra_len)),e.arraySet($.head.extra,ee,ie,ke,_e)),512&$.flags&&($.check=t($.check,ee,ke,ie)),ne-=ke,ie+=ke,$.length-=ke),$.length))break e;$.length=0,$.mode=B;case B:if(2048&$.flags){if(0===ne)break e;ke=0;do{_e=ee[ie+ke++],$.head&&_e&&$.length<65536&&($.head.name+=String.fromCharCode(_e))}while(_e&&ke<ne);if(512&$.flags&&($.check=t($.check,ee,ke,ie)),ne-=ke,ie+=ke,_e)break e}else $.head&&($.head.name=null);$.length=0,$.mode=S;case S:if(4096&$.flags){if(0===ne)break e;ke=0;do{_e=ee[ie+ke++],$.head&&_e&&$.length<65536&&($.head.comment+=String.fromCharCode(_e))}while(_e&&ke<ne);if(512&$.flags&&($.check=t($.check,ee,ke,ie)),ne-=ke,ie+=ke,_e)break e}else $.head&&($.head.comment=null);$.mode=q;case q:if(512&$.flags){for(;de<16;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}if(oe!==(65535&$.check)){Y.msg="header crc mismatch",$.mode=V;break}oe=0,de=0}$.head&&($.head.hcrc=$.flags>>9&1,$.head.done=!0),Y.adler=$.check=0,$.mode=R;break;case C:for(;de<32;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}Y.adler=$.check=ae(oe),oe=0,de=0,$.mode=I;case I:if(0===$.havedict)return Y.next_out=se,Y.avail_out=re,Y.next_in=ie,Y.avail_in=ne,$.hold=oe,$.bits=de,k;Y.adler=$.check=1,$.mode=R;case R:if(Z===l||Z===f)break e;case j:if($.last){oe>>>=7&de,de-=7&de,$.mode=Q;break}for(;de<3;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}switch($.last=1&oe,de-=1,3&(oe>>>=1)){case 0:$.mode=A;break;case 1:if(ce($),$.mode=N,Z===f){oe>>>=2,de-=2;break e}break;case 2:$.mode=G;break;case 3:Y.msg="invalid block type",$.mode=V}oe>>>=2,de-=2;break;case A:for(oe>>>=7&de,de-=7&de;de<32;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}if((65535&oe)!=(oe>>>16^65535)){Y.msg="invalid stored block lengths",$.mode=V;break}if($.length=65535&oe,oe=0,de=0,$.mode=D,Z===f)break e;case D:$.mode=E;case E:if(ke=$.length){if(ke>ne&&(ke=ne),ke>re&&(ke=re),0===ke)break e;e.arraySet(te,ee,ie,ke,se),ne-=ke,ie+=ke,re-=ke,se+=ke,$.length-=ke;break}$.mode=R;break;case G:for(;de<14;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}if($.nlen=257+(31&oe),oe>>>=5,de-=5,$.ndist=1+(31&oe),oe>>>=5,de-=5,$.ncode=4+(15&oe),oe>>>=4,de-=4,$.nlen>286||$.ndist>30){Y.msg="too many length or distance symbols",$.mode=V;break}$.have=0,$.mode=H;case H:for(;$.have<$.ncode;){for(;de<3;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}$.lens[Ce[$.have++]]=7&oe,oe>>>=3,de-=3}for(;$.have<19;)$.lens[Ce[$.have++]]=0;if($.lencode=$.lendyn,$.lenbits=7,ze={bits:$.lenbits},ye=s(n,$.lens,0,19,$.lencode,0,$.work,ze),$.lenbits=ze.bits,ye){Y.msg="invalid code lengths set",$.mode=V;break}$.have=0,$.mode=K;case K:for(;$.have<$.nlen+$.ndist;){for(;ue=(Se=$.lencode[oe&(1<<$.lenbits)-1])>>>16&255,ge=65535&Se,!((we=Se>>>24)<=de);){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}if(ge<16)oe>>>=we,de-=we,$.lens[$.have++]=ge;else{if(16===ge){for(Be=we+2;de<Be;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}if(oe>>>=we,de-=we,0===$.have){Y.msg="invalid bit length repeat",$.mode=V;break}_e=$.lens[$.have-1],ke=3+(3&oe),oe>>>=2,de-=2}else if(17===ge){for(Be=we+3;de<Be;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}de-=we,_e=0,ke=3+(7&(oe>>>=we)),oe>>>=3,de-=3}else{for(Be=we+7;de<Be;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}de-=we,_e=0,ke=11+(127&(oe>>>=we)),oe>>>=7,de-=7}if($.have+ke>$.nlen+$.ndist){Y.msg="invalid bit length repeat",$.mode=V;break}for(;ke--;)$.lens[$.have++]=_e}}if($.mode===V)break;if(0===$.lens[256]){Y.msg="invalid code -- missing end-of-block",$.mode=V;break}if($.lenbits=9,ze={bits:$.lenbits},ye=s(r,$.lens,0,$.nlen,$.lencode,0,$.work,ze),$.lenbits=ze.bits,ye){Y.msg="invalid literal/lengths set",$.mode=V;break}if($.distbits=6,$.distcode=$.distdyn,ze={bits:$.distbits},ye=s(o,$.lens,$.nlen,$.ndist,$.distcode,0,$.work,ze),$.distbits=ze.bits,ye){Y.msg="invalid distances set",$.mode=V;break}if($.mode=N,Z===f)break e;case N:$.mode=F;case F:if(ne>=6&&re>=258){Y.next_out=se,Y.avail_out=re,Y.next_in=ie,Y.avail_in=ne,$.hold=oe,$.bits=de,i(Y,fe),se=Y.next_out,te=Y.output,re=Y.avail_out,ie=Y.next_in,ee=Y.input,ne=Y.avail_in,oe=$.hold,de=$.bits,$.mode===R&&($.back=-1);break}for($.back=0;ue=(Se=$.lencode[oe&(1<<$.lenbits)-1])>>>16&255,ge=65535&Se,!((we=Se>>>24)<=de);){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}if(ue&&0==(240&ue)){for(ve=we,xe=ue,pe=ge;ue=(Se=$.lencode[pe+((oe&(1<<ve+xe)-1)>>ve)])>>>16&255,ge=65535&Se,!(ve+(we=Se>>>24)<=de);){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}oe>>>=ve,de-=ve,$.back+=ve}if(oe>>>=we,de-=we,$.back+=we,$.length=ge,0===ue){$.mode=P;break}if(32&ue){$.back=-1,$.mode=R;break}if(64&ue){Y.msg="invalid literal/length code",$.mode=V;break}$.extra=15&ue,$.mode=J;case J:if($.extra){for(Be=$.extra;de<Be;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}$.length+=oe&(1<<$.extra)-1,oe>>>=$.extra,de-=$.extra,$.back+=$.extra}$.was=$.length,$.mode=L;case L:for(;ue=(Se=$.distcode[oe&(1<<$.distbits)-1])>>>16&255,ge=65535&Se,!((we=Se>>>24)<=de);){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}if(0==(240&ue)){for(ve=we,xe=ue,pe=ge;ue=(Se=$.distcode[pe+((oe&(1<<ve+xe)-1)>>ve)])>>>16&255,ge=65535&Se,!(ve+(we=Se>>>24)<=de);){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}oe>>>=ve,de-=ve,$.back+=ve}if(oe>>>=we,de-=we,$.back+=we,64&ue){Y.msg="invalid distance code",$.mode=V;break}$.offset=ge,$.extra=15&ue,$.mode=M;case M:if($.extra){for(Be=$.extra;de<Be;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}$.offset+=oe&(1<<$.extra)-1,oe>>>=$.extra,de-=$.extra,$.back+=$.extra}if($.offset>$.dmax){Y.msg="invalid distance too far back",$.mode=V;break}$.mode=O;case O:if(0===re)break e;if(ke=fe-re,$.offset>ke){if((ke=$.offset-ke)>$.whave&&$.sane){Y.msg="invalid distance too far back",$.mode=V;break}ke>$.wnext?(ke-=$.wnext,be=$.wsize-ke):be=$.wnext-ke,ke>$.length&&(ke=$.length),me=$.window}else me=te,be=se-$.offset,ke=$.length;ke>re&&(ke=re),re-=ke,$.length-=ke;do{te[se++]=me[be++]}while(--ke);0===$.length&&($.mode=F);break;case P:if(0===re)break e;te[se++]=$.length,re--,$.mode=F;break;case Q:if($.wrap){for(;de<32;){if(0===ne)break e;ne--,oe|=ee[ie++]<<de,de+=8}if(fe-=re,Y.total_out+=fe,$.total+=fe,fe&&(Y.adler=$.check=$.flags?t($.check,te,fe,se-fe):a($.check,te,fe,se-fe)),fe=re,($.flags?oe:ae(oe))!==$.check){Y.msg="incorrect data check",$.mode=V;break}oe=0,de=0}$.mode=T;case T:if($.wrap&&$.flags){for(;de<32;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}if(oe!==(4294967295&$.total)){Y.msg="incorrect length check",$.mode=V;break}oe=0,de=0}$.mode=U;case U:ye=h;break e;case V:ye=m;break e;case W:return w;case X:default:return b}return Y.next_out=se,Y.avail_out=re,Y.next_in=ie,Y.avail_in=ne,$.hold=oe,$.bits=de,($.wsize||fe!==Y.avail_out&&$.mode<V&&($.mode<Q||Z!==d))&&he(Y,Y.output,Y.next_out,fe-Y.avail_out)?($.mode=W,w):(le-=Y.avail_in,fe-=Y.avail_out,Y.total_in+=le,Y.total_out+=fe,$.total+=fe,$.wrap&&fe&&(Y.adler=$.check=$.flags?t($.check,te,fe,Y.next_out-fe):a($.check,te,fe,Y.next_out-fe)),Y.data_type=$.bits+($.last?64:0)+($.mode===R?128:0)+($.mode===N||$.mode===D?256:0),(0===le&&0===fe||Z===d)&&ye===c&&(ye=u),ye)}function be(e){if(!e||!e.state)return b;var a=e.state;return a.window&&(a.window=null),e.state=null,c}function me(e,a){var t;return e&&e.state?0==(2&(t=e.state).wrap)?b:(t.head=a,a.done=!1,c):b}function we(e,t){var i,s=t.length;return e&&e.state?0!==(i=e.state).wrap&&i.mode!==I?b:i.mode===I&&a(1,t,s,0)!==i.check?m:he(e,t,s,s)?(i.mode=W,w):(i.havedict=1,c):b}exports.inflateReset=se,exports.inflateReset2=ne,exports.inflateResetKeep=ie,exports.inflateInit=oe,exports.inflateInit2=re,exports.inflate=ke,exports.inflateEnd=be,exports.inflateGetHeader=me,exports.inflateSetDictionary=we,exports.inflateInfo="pako inflate (from Nodeca project)";
},{"../utils/common":"tbG5","./adler32":"uxo6","./crc32":"X4kj","./inffast":"LP5M","./inftrees":"2u+n"}],"xUUw":[function(require,module,exports) {
"use strict";module.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};
},{}],"/+WI":[function(require,module,exports) {
"use strict";function t(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}module.exports=t;
},{}],"faQk":[function(require,module,exports) {
"use strict";var t=require("./zlib/inflate"),i=require("./utils/common"),n=require("./utils/strings"),s=require("./zlib/constants"),r=require("./zlib/messages"),e=require("./zlib/zstream"),o=require("./zlib/gzheader"),u=Object.prototype.toString;function a(n){if(!(this instanceof a))return new a(n);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},n||{});var u=this.options;u.raw&&u.windowBits>=0&&u.windowBits<16&&(u.windowBits=-u.windowBits,0===u.windowBits&&(u.windowBits=-15)),!(u.windowBits>=0&&u.windowBits<16)||n&&n.windowBits||(u.windowBits+=32),u.windowBits>15&&u.windowBits<48&&0==(15&u.windowBits)&&(u.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new e,this.strm.avail_out=0;var h=t.inflateInit2(this.strm,u.windowBits);if(h!==s.Z_OK)throw new Error(r[h]);this.header=new o,t.inflateGetHeader(this.strm,this.header)}function h(t,i){var n=new a(i);if(n.push(t,!0),n.err)throw n.msg||r[n.err];return n.result}function _(t,i){return(i=i||{}).raw=!0,h(t,i)}a.prototype.push=function(r,e){var o,a,h,_,w,l,d=this.strm,f=this.options.chunkSize,p=this.options.dictionary,c=!1;if(this.ended)return!1;a=e===~~e?e:!0===e?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof r?d.input=n.binstring2buf(r):"[object ArrayBuffer]"===u.call(r)?d.input=new Uint8Array(r):d.input=r,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new i.Buf8(f),d.next_out=0,d.avail_out=f),(o=t.inflate(d,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&p&&(l="string"==typeof p?n.string2buf(p):"[object ArrayBuffer]"===u.call(p)?new Uint8Array(p):p,o=t.inflateSetDictionary(this.strm,l)),o===s.Z_BUF_ERROR&&!0===c&&(o=s.Z_OK,c=!1),o!==s.Z_STREAM_END&&o!==s.Z_OK)return this.onEnd(o),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&o!==s.Z_STREAM_END&&(0!==d.avail_in||a!==s.Z_FINISH&&a!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(h=n.utf8border(d.output,d.next_out),_=d.next_out-h,w=n.buf2string(d.output,h),d.next_out=_,d.avail_out=f-_,_&&i.arraySet(d.output,d.output,h,_,0),this.onData(w)):this.onData(i.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(c=!0)}while((d.avail_in>0||0===d.avail_out)&&o!==s.Z_STREAM_END);return o===s.Z_STREAM_END&&(a=s.Z_FINISH),a===s.Z_FINISH?(o=t.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===s.Z_OK):a!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),d.avail_out=0,!0)},a.prototype.onData=function(t){this.chunks.push(t)},a.prototype.onEnd=function(t){t===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},exports.Inflate=a,exports.inflate=h,exports.inflateRaw=_,exports.ungzip=h;
},{"./zlib/inflate":"GIDK","./utils/common":"tbG5","./utils/strings":"34Q3","./zlib/constants":"xUUw","./zlib/messages":"gMAY","./zlib/zstream":"bdtv","./zlib/gzheader":"/+WI"}],"f4vO":[function(require,module,exports) {
"use strict";var e=require("./lib/utils/common").assign,i=require("./lib/deflate"),r=require("./lib/inflate"),l=require("./lib/zlib/constants"),s={};e(s,i,r,l),module.exports=s;
},{"./lib/utils/common":"tbG5","./lib/deflate":"nFS2","./lib/inflate":"faQk","./lib/zlib/constants":"xUUw"}],"+XWs":[function(require,module,exports) {

},{}],"yh9p":[function(require,module,exports) {
"use strict";exports.byteLength=u,exports.toByteArray=i,exports.fromByteArray=d;for(var r=[],t=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)r[o]=n[o],t[n.charCodeAt(o)]=o;function h(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}function u(r){var t=h(r),e=t[0],n=t[1];return 3*(e+n)/4-n}function c(r,t,e){return 3*(t+e)/4-e}function i(r){for(var n,o=h(r),a=o[0],u=o[1],i=new e(c(r,a,u)),f=0,A=u>0?a-4:a,d=0;d<A;d+=4)n=t[r.charCodeAt(d)]<<18|t[r.charCodeAt(d+1)]<<12|t[r.charCodeAt(d+2)]<<6|t[r.charCodeAt(d+3)],i[f++]=n>>16&255,i[f++]=n>>8&255,i[f++]=255&n;return 2===u&&(n=t[r.charCodeAt(d)]<<2|t[r.charCodeAt(d+1)]>>4,i[f++]=255&n),1===u&&(n=t[r.charCodeAt(d)]<<10|t[r.charCodeAt(d+1)]<<4|t[r.charCodeAt(d+2)]>>2,i[f++]=n>>8&255,i[f++]=255&n),i}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function A(r,t,e){for(var n,o=[],a=t;a<e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(f(n));return o.join("")}function d(t){for(var e,n=t.length,o=n%3,a=[],h=0,u=n-o;h<u;h+=16383)a.push(A(t,h,h+16383>u?u:h+16383));return 1===o?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;
},{}],"JgNJ":[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],"REa7":[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],"dskh":[function(require,module,exports) {

var global = arguments[3];
var t=arguments[3],r=require("base64-js"),e=require("ieee754"),n=require("isarray");function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(r){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(o()<r)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=f.prototype:(null===t&&(t=new f(r)),t.length=r),t}function f(t,r,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,e)}function s(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?g(t,r,e,n):"string"==typeof r?l(t,r,e):y(t,r)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,r,e,n){return h(r),r<=0?u(t,r):void 0!==e?"string"==typeof n?u(t,r).fill(e,n):u(t,r).fill(e):u(t,r)}function c(t,r){if(h(r),t=u(t,r<0?0:0|w(r)),!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function l(t,r,e){if("string"==typeof e&&""!==e||(e="utf8"),!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(r,e),i=(t=u(t,n)).write(r,e);return i!==n&&(t=t.slice(0,i)),t}function p(t,r){var e=r.length<0?0:0|w(r.length);t=u(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function g(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n),f.TYPED_ARRAY_SUPPORT?(t=r).__proto__=f.prototype:t=p(t,r),t}function y(t,r){if(f.isBuffer(r)){var e=0|w(r.length);return 0===(t=u(t,e)).length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||W(r.length)?u(t,0):p(t,r);if("Buffer"===r.type&&n(r.data))return p(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function w(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),f.alloc(+t)}function v(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function E(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,r,e);case"utf8":case"utf-8":return Y(this,r,e);case"ascii":return L(this,r,e);case"latin1":case"binary":return D(this,r,e);case"base64":return S(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function R(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=f.from(r,n)),f.isBuffer(r))return 0===r.length?-1:_(t,r,e,n,i);if("number"==typeof r)return r&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):_(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,r,e,n,i){var o,u=1,f=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,f/=2,s/=2,e/=2}function h(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(i){var a=-1;for(o=e;o<f;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*u}else-1!==a&&(o-=o-a),a=-1}else for(e+s>f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,l=0;l<s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return o}return-1}function A(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var f=parseInt(r.substr(2*u,2),16);if(isNaN(f))return u;t[e+u]=f}return u}function m(t,r,e,n){return Q($(r,t.length-e),t,e,n)}function P(t,r,e,n){return Q(G(r),t,e,n)}function T(t,r,e,n){return P(t,r,e,n)}function B(t,r,e,n){return Q(K(r),t,e,n)}function U(t,r,e,n){return Q(H(r,t.length-e),t,e,n)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function Y(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,u,f,s,h=t[i],a=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=e)switch(c){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&h)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&h)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(a=s)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return O(n)}exports.Buffer=f,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),exports.kMaxLength=o(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,e){return s(null,t,r,e)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,e){return a(null,t,r,e)},f.allocUnsafe=function(t){return c(null,t)},f.allocUnsafeSlow=function(t){return c(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=f.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var u=t[e];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)b(this,r,r+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)b(this,r,r+3),b(this,r+1,r+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)b(this,r,r+7),b(this,r+1,r+6),b(this,r+2,r+5),b(this,r+3,r+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Y(this,0,t):E.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",r=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,r,e,n,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(e>>>=0)-(r>>>=0),s=Math.min(o,u),h=this.slice(n,i),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return o<u?-1:u<o?1:0},f.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},f.prototype.indexOf=function(t,r,e){return R(this,t,r,e,!0)},f.prototype.lastIndexOf=function(t,r,e){return R(this,t,r,e,!1)},f.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,r,e);case"utf8":case"utf-8":return m(this,t,r,e);case"ascii":return P(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(t){var r=t.length;if(r<=I)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return e}function L(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function x(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Z(t[o]);return i}function C(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function k(t,r,e,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function N(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function F(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function j(t,r,n,i,o){return o||F(t,r,n,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(t,r,n,i,23,4),n+4}function q(t,r,n,i,o){return o||F(t,r,n,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(t,r,n,i,52,8),n+8}f.prototype.slice=function(t,r){var e,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),f.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=f.prototype;else{var i=r-t;e=new f(i,void 0);for(var o=0;o<i;++o)e[o]=this[o+t]}return e},f.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},f.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},f.prototype.readUInt8=function(t,r){return r||M(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||M(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,r){return r||M(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,r){return r||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,r){return r||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},f.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},f.prototype.readInt8=function(t,r){return r||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||M(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(t,r){r||M(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(t,r){return r||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,r){return r||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},f.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},f.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):z(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=0,u=1,f=0;for(this[r]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[r+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):z(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},f.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},f.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},f.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},f.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o=n-e;if(this===t&&e<r&&r<n)for(i=o-1;i>=0;--i)t[i+r]=this[i+e];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+r]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},f.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var u=f.isBuffer(t)?t:$(new f(t,n).toString()),s=u.length;for(o=0;o<e-r;++o)this[o+r]=u[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function X(t){if((t=J(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],u=0;u<n;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function G(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function H(t,r){for(var e,n,i,o=[],u=0;u<t.length&&!((r-=2)<0);++u)n=(e=t.charCodeAt(u))>>8,i=e%256,o.push(i),o.push(n);return o}function K(t){return r.toByteArray(X(t))}function Q(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function W(t){return t!=t}
},{"base64-js":"yh9p","ieee754":"JgNJ","isarray":"REa7","buffer":"dskh"}],"38Wu":[function(require,module,exports) {

var r=require("buffer"),e=r.Buffer;function n(r,e){for(var n in r)e[n]=r[n]}function o(r,n,o){return e(r,n,o)}e.from&&e.alloc&&e.allocUnsafe&&e.allocUnsafeSlow?module.exports=r:(n(r,exports),exports.Buffer=o),n(e,o),o.from=function(r,n,o){if("number"==typeof r)throw new TypeError("Argument must not be a number");return e(r,n,o)},o.alloc=function(r,n,o){if("number"!=typeof r)throw new TypeError("Argument must be a number");var f=e(r);return void 0!==n?"string"==typeof o?f.fill(n,o):f.fill(n):f.fill(0),f},o.allocUnsafe=function(r){if("number"!=typeof r)throw new TypeError("Argument must be a number");return e(r)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)};
},{"buffer":"dskh"}],"XQun":[function(require,module,exports) {

const r=require("safe-buffer").Buffer;module.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);t.fill(255);for(let r=0;r<e.length;r++){const o=e.charAt(r),n=o.charCodeAt(0);if(255!==t[n])throw new TypeError(o+" is ambiguous");t[n]=r}const o=e.length,n=e.charAt(0),f=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function c(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return r.alloc(0);let l=0;if(" "===e[l])return;let c=0,i=0;for(;e[l]===n;)c++,l++;const a=(e.length-l)*f+1>>>0,h=new Uint8Array(a);for(;e[l];){let r=t[e.charCodeAt(l)];if(255===r)return;let n=0;for(let e=a-1;(0!==r||n<i)&&-1!==e;e--,n++)r+=o*h[e]>>>0,h[e]=r%256>>>0,r=r/256>>>0;if(0!==r)throw new Error("Non-zero carry");i=n,l++}if(" "===e[l])return;let u=a-i;for(;u!==a&&0===h[u];)u++;const s=r.allocUnsafe(c+(a-u));s.fill(0,0,c);let w=c;for(;u!==a;)s[w++]=h[u++];return s}return{encode:function(t){if(!r.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";let f=0,c=0,i=0;const a=t.length;for(;i!==a&&0===t[i];)i++,f++;const h=(a-i)*l+1>>>0,u=new Uint8Array(h);for(;i!==a;){let r=t[i],e=0;for(let t=h-1;(0!==r||e<c)&&-1!==t;t--,e++)r+=256*u[t]>>>0,u[t]=r%o>>>0,r=r/o>>>0;if(0!==r)throw new Error("Non-zero carry");c=e,i++}let s=h-c;for(;s!==h&&0===u[s];)s++;let w=n.repeat(f);for(;s<h;++s)w+=e.charAt(u[s]);return w},decodeUnsafe:c,decode:function(r){const e=c(r);if(e)return e;throw new Error("Non-base"+o+" character")}}};
},{"safe-buffer":"38Wu"}],"GtuF":[function(require,module,exports) {
var e=require("base-x"),r="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";module.exports=e(r);
},{"base-x":"XQun"}],"EVxB":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},t=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(exports,"__esModule",{value:!0});var n=e(require("xterm/src/xterm.ts")),r=t(require("./attach.ts")),o=t(require("xterm/src/addons/fullscreen/fullscreen.ts")),i=t(require("xterm/src/addons/fit/fit.ts")),s=e(require("pako"));require("xterm/dist/xterm.css"),require("xterm/dist/addons/fullscreen/fullscreen.css");var a=e(require("bs58")),c=require("safe-buffer");window.pako=s.default,n.default.applyAddon(r),n.default.applyAddon(o),n.default.applyAddon(i);var l=function(e){return a.default.encode(c.Buffer.from(s.default.deflate(JSON.stringify({Sdp:e}))))},u=function(e){return JSON.parse(s.default.inflate(a.default.decode(e),{to:"string"}))},d=function(e,t){return fetch("https://up.10kb.site/"+e,{method:"POST",body:t}).then(function(e){return e.text()}).then(function(e){})},f=function(e){var t=u(e);""!=t.TenKbSiteLoc&&(h=t.TenKbSiteLoc),g.setRemoteDescription(new RTCSessionDescription({type:"offer",sdp:t.Sdp})).catch(w),g.createAnswer().then(function(e){return g.setLocalDescription(e)}).catch(w)},h=null,p=new n.default;p.open(document.getElementById("terminal")),p.toggleFullScreen(),p.fit(),window.onresize=function(){p.fit()},p.write("Welcome to the WebRTTY web client.\n\r");var g=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]}),w=function(e){p.write(e+"\n\r")},m=g.createDataChannel("data");m.onclose=function(){return console.log("sendChannel has closed")},m.onopen=function(){p.reset(),p.terminadoAttach(m),m.send(JSON.stringify(["set_size",p.rows,p.cols])),console.log("sendChannel has opened")},g.onsignalingstatechange=function(e){return w(g.signalingState)},g.oniceconnectionstatechange=function(e){return w(g.iceConnectionState)},g.onicecandidate=function(e){null===e.candidate&&(null==h?(p.write("Answer created. Send the following answer to the host:\n\r\n\r"),p.write(l(g.localDescription.sdp))):(p.write("Waiting for connection..."),d(h,l(g.localDescription.sdp))))},g.onnegotiationneeded=function(e){return console.log(e)},window.sendMessage=function(){var e=document.getElementById("message").value;if(""===e)return alert("Message must not be empty");m.send(e)};var y=!1,S=window.location.hash.substr(1);if(console.log(S),""!=S)try{f(S),y=!0}catch(b){console.log(b)}0==y&&p.write("Run webrtty and paste the offer message below:\n\r"),p.on("data",function(e){if(!y){p.reset();try{f(e)}catch(b){return console.log(b),p.write("There was an error with the offer: "+e+"\n\r"),void p.write("Try entering the message again: ")}y=!0}});
},{"xterm/src/xterm.ts":"xWgB","./attach.ts":"pTUZ","xterm/src/addons/fullscreen/fullscreen.ts":"CS9K","xterm/src/addons/fit/fit.ts":"ISf0","pako":"f4vO","xterm/dist/xterm.css":"+XWs","xterm/dist/addons/fullscreen/fullscreen.css":"+XWs","bs58":"GtuF","safe-buffer":"38Wu"}]},{},["EVxB"], null)
//# sourceMappingURL=app.3a8b27e5.map